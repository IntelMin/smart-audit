"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/@walletconnect+legacy-client@2.0.0";
exports.ids = ["vendor-chunks/@walletconnect+legacy-client@2.0.0"];
exports.modules = {

/***/ "(ssr)/./node_modules/.pnpm/@walletconnect+legacy-client@2.0.0/node_modules/@walletconnect/legacy-client/dist/cjs/core.js":
/*!**************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@walletconnect+legacy-client@2.0.0/node_modules/@walletconnect/legacy-client/dist/cjs/core.js ***!
  \**************************************************************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nconst tslib_1 = __webpack_require__(/*! tslib */ \"(ssr)/./node_modules/.pnpm/tslib@2.6.2/node_modules/tslib/tslib.es6.mjs\");\nconst legacy_types_1 = __webpack_require__(/*! @walletconnect/legacy-types */ \"(ssr)/./node_modules/.pnpm/@walletconnect+legacy-types@2.0.0/node_modules/@walletconnect/legacy-types/dist/cjs/index.js\");\nconst legacy_utils_1 = __webpack_require__(/*! @walletconnect/legacy-utils */ \"(ssr)/./node_modules/.pnpm/@walletconnect+legacy-utils@2.0.0/node_modules/@walletconnect/legacy-utils/dist/cjs/index.js\");\nconst socket_1 = tslib_1.__importDefault(__webpack_require__(/*! ./socket */ \"(ssr)/./node_modules/.pnpm/@walletconnect+legacy-client@2.0.0/node_modules/@walletconnect/legacy-client/dist/cjs/socket.js\"));\nconst events_1 = tslib_1.__importDefault(__webpack_require__(/*! ./events */ \"(ssr)/./node_modules/.pnpm/@walletconnect+legacy-client@2.0.0/node_modules/@walletconnect/legacy-client/dist/cjs/events.js\"));\nconst storage_1 = tslib_1.__importDefault(__webpack_require__(/*! ./storage */ \"(ssr)/./node_modules/.pnpm/@walletconnect+legacy-client@2.0.0/node_modules/@walletconnect/legacy-client/dist/cjs/storage.js\"));\nconst url_1 = __webpack_require__(/*! ./url */ \"(ssr)/./node_modules/.pnpm/@walletconnect+legacy-client@2.0.0/node_modules/@walletconnect/legacy-client/dist/cjs/url.js\");\nclass Connector {\n    constructor(opts){\n        this.protocol = \"wc\";\n        this.version = 1;\n        this._bridge = \"\";\n        this._key = null;\n        this._clientId = \"\";\n        this._clientMeta = null;\n        this._peerId = \"\";\n        this._peerMeta = null;\n        this._handshakeId = 0;\n        this._handshakeTopic = \"\";\n        this._connected = false;\n        this._accounts = [];\n        this._chainId = 0;\n        this._networkId = 0;\n        this._rpcUrl = \"\";\n        this._eventManager = new events_1.default();\n        this._clientMeta = legacy_utils_1.getClientMeta() || opts.connectorOpts.clientMeta || null;\n        this._cryptoLib = opts.cryptoLib;\n        this._sessionStorage = opts.sessionStorage || new storage_1.default(opts.connectorOpts.storageId);\n        this._qrcodeModal = opts.connectorOpts.qrcodeModal;\n        this._qrcodeModalOptions = opts.connectorOpts.qrcodeModalOptions;\n        this._signingMethods = [\n            ...legacy_types_1.SIGNING_METHODS,\n            ...opts.connectorOpts.signingMethods || []\n        ];\n        if (!opts.connectorOpts.bridge && !opts.connectorOpts.uri && !opts.connectorOpts.session) {\n            throw new Error(legacy_types_1.ERROR_MISSING_REQUIRED);\n        }\n        if (opts.connectorOpts.bridge) {\n            this.bridge = url_1.getBridgeUrl(opts.connectorOpts.bridge);\n        }\n        if (opts.connectorOpts.uri) {\n            this.uri = opts.connectorOpts.uri;\n        }\n        const session = opts.connectorOpts.session || this._getStorageSession();\n        if (session) {\n            this.session = session;\n        }\n        if (this.handshakeId) {\n            this._subscribeToSessionResponse(this.handshakeId, \"Session request rejected\");\n        }\n        this._transport = opts.transport || new socket_1.default({\n            protocol: this.protocol,\n            version: this.version,\n            url: this.bridge,\n            subscriptions: [\n                this.clientId\n            ]\n        });\n        this._subscribeToInternalEvents();\n        this._initTransport();\n        if (opts.connectorOpts.uri) {\n            this._subscribeToSessionRequest();\n        }\n        if (opts.pushServerOpts) {\n            this._registerPushServer(opts.pushServerOpts);\n        }\n    }\n    set bridge(value) {\n        if (!value) {\n            return;\n        }\n        this._bridge = value;\n    }\n    get bridge() {\n        return this._bridge;\n    }\n    set key(value) {\n        if (!value) {\n            return;\n        }\n        const key = legacy_utils_1.convertHexToArrayBuffer(value);\n        this._key = key;\n    }\n    get key() {\n        if (this._key) {\n            const key = legacy_utils_1.convertArrayBufferToHex(this._key, true);\n            return key;\n        }\n        return \"\";\n    }\n    set clientId(value) {\n        if (!value) {\n            return;\n        }\n        this._clientId = value;\n    }\n    get clientId() {\n        let clientId = this._clientId;\n        if (!clientId) {\n            clientId = this._clientId = legacy_utils_1.uuid();\n        }\n        return this._clientId;\n    }\n    set peerId(value) {\n        if (!value) {\n            return;\n        }\n        this._peerId = value;\n    }\n    get peerId() {\n        return this._peerId;\n    }\n    set clientMeta(value) {}\n    get clientMeta() {\n        let clientMeta = this._clientMeta;\n        if (!clientMeta) {\n            clientMeta = this._clientMeta = legacy_utils_1.getClientMeta();\n        }\n        return clientMeta;\n    }\n    set peerMeta(value) {\n        this._peerMeta = value;\n    }\n    get peerMeta() {\n        const peerMeta = this._peerMeta;\n        return peerMeta;\n    }\n    set handshakeTopic(value) {\n        if (!value) {\n            return;\n        }\n        this._handshakeTopic = value;\n    }\n    get handshakeTopic() {\n        return this._handshakeTopic;\n    }\n    set handshakeId(value) {\n        if (!value) {\n            return;\n        }\n        this._handshakeId = value;\n    }\n    get handshakeId() {\n        return this._handshakeId;\n    }\n    get uri() {\n        const _uri = this._formatUri();\n        return _uri;\n    }\n    set uri(value) {\n        if (!value) {\n            return;\n        }\n        const { handshakeTopic, bridge, key } = this._parseUri(value);\n        this.handshakeTopic = handshakeTopic;\n        this.bridge = bridge;\n        this.key = key;\n    }\n    set chainId(value) {\n        this._chainId = value;\n    }\n    get chainId() {\n        const chainId = this._chainId;\n        return chainId;\n    }\n    set networkId(value) {\n        this._networkId = value;\n    }\n    get networkId() {\n        const networkId = this._networkId;\n        return networkId;\n    }\n    set accounts(value) {\n        this._accounts = value;\n    }\n    get accounts() {\n        const accounts = this._accounts;\n        return accounts;\n    }\n    set rpcUrl(value) {\n        this._rpcUrl = value;\n    }\n    get rpcUrl() {\n        const rpcUrl = this._rpcUrl;\n        return rpcUrl;\n    }\n    set connected(value) {}\n    get connected() {\n        return this._connected;\n    }\n    set pending(value) {}\n    get pending() {\n        return !!this._handshakeTopic;\n    }\n    get session() {\n        return {\n            connected: this.connected,\n            accounts: this.accounts,\n            chainId: this.chainId,\n            bridge: this.bridge,\n            key: this.key,\n            clientId: this.clientId,\n            clientMeta: this.clientMeta,\n            peerId: this.peerId,\n            peerMeta: this.peerMeta,\n            handshakeId: this.handshakeId,\n            handshakeTopic: this.handshakeTopic\n        };\n    }\n    set session(value) {\n        if (!value) {\n            return;\n        }\n        this._connected = value.connected;\n        this.accounts = value.accounts;\n        this.chainId = value.chainId;\n        this.bridge = value.bridge;\n        this.key = value.key;\n        this.clientId = value.clientId;\n        this.clientMeta = value.clientMeta;\n        this.peerId = value.peerId;\n        this.peerMeta = value.peerMeta;\n        this.handshakeId = value.handshakeId;\n        this.handshakeTopic = value.handshakeTopic;\n    }\n    on(event, callback) {\n        const eventEmitter = {\n            event,\n            callback\n        };\n        this._eventManager.subscribe(eventEmitter);\n    }\n    off(event) {\n        this._eventManager.unsubscribe(event);\n    }\n    createInstantRequest(instantRequest) {\n        return tslib_1.__awaiter(this, void 0, void 0, function*() {\n            this._key = yield this._generateKey();\n            const request = this._formatRequest({\n                method: \"wc_instantRequest\",\n                params: [\n                    {\n                        peerId: this.clientId,\n                        peerMeta: this.clientMeta,\n                        request: this._formatRequest(instantRequest)\n                    }\n                ]\n            });\n            this.handshakeId = request.id;\n            this.handshakeTopic = legacy_utils_1.uuid();\n            this._eventManager.trigger({\n                event: \"display_uri\",\n                params: [\n                    this.uri\n                ]\n            });\n            this.on(\"modal_closed\", ()=>{\n                throw new Error(legacy_types_1.ERROR_QRCODE_MODAL_USER_CLOSED);\n            });\n            const endInstantRequest = ()=>{\n                this.killSession();\n            };\n            try {\n                const result = yield this._sendCallRequest(request);\n                if (result) {\n                    endInstantRequest();\n                }\n                return result;\n            } catch (error) {\n                endInstantRequest();\n                throw error;\n            }\n        });\n    }\n    connect(opts) {\n        return tslib_1.__awaiter(this, void 0, void 0, function*() {\n            if (!this._qrcodeModal) {\n                throw new Error(legacy_types_1.ERROR_QRCODE_MODAL_NOT_PROVIDED);\n            }\n            if (this.connected) {\n                return {\n                    chainId: this.chainId,\n                    accounts: this.accounts\n                };\n            }\n            yield this.createSession(opts);\n            return new Promise((resolve, reject)=>tslib_1.__awaiter(this, void 0, void 0, function*() {\n                    this.on(\"modal_closed\", ()=>reject(new Error(legacy_types_1.ERROR_QRCODE_MODAL_USER_CLOSED)));\n                    this.on(\"connect\", (error, payload)=>{\n                        if (error) {\n                            return reject(error);\n                        }\n                        resolve(payload.params[0]);\n                    });\n                }));\n        });\n    }\n    createSession(opts) {\n        return tslib_1.__awaiter(this, void 0, void 0, function*() {\n            if (this._connected) {\n                throw new Error(legacy_types_1.ERROR_SESSION_CONNECTED);\n            }\n            if (this.pending) {\n                return;\n            }\n            this._key = yield this._generateKey();\n            const request = this._formatRequest({\n                method: \"wc_sessionRequest\",\n                params: [\n                    {\n                        peerId: this.clientId,\n                        peerMeta: this.clientMeta,\n                        chainId: opts && opts.chainId ? opts.chainId : null\n                    }\n                ]\n            });\n            this.handshakeId = request.id;\n            this.handshakeTopic = legacy_utils_1.uuid();\n            this._sendSessionRequest(request, \"Session update rejected\", {\n                topic: this.handshakeTopic\n            });\n            this._eventManager.trigger({\n                event: \"display_uri\",\n                params: [\n                    this.uri\n                ]\n            });\n        });\n    }\n    approveSession(sessionStatus) {\n        if (this._connected) {\n            throw new Error(legacy_types_1.ERROR_SESSION_CONNECTED);\n        }\n        this.chainId = sessionStatus.chainId;\n        this.accounts = sessionStatus.accounts;\n        this.networkId = sessionStatus.networkId || 0;\n        this.rpcUrl = sessionStatus.rpcUrl || \"\";\n        const sessionParams = {\n            approved: true,\n            chainId: this.chainId,\n            networkId: this.networkId,\n            accounts: this.accounts,\n            rpcUrl: this.rpcUrl,\n            peerId: this.clientId,\n            peerMeta: this.clientMeta\n        };\n        const response = {\n            id: this.handshakeId,\n            jsonrpc: \"2.0\",\n            result: sessionParams\n        };\n        this._sendResponse(response);\n        this._connected = true;\n        this._setStorageSession();\n        this._eventManager.trigger({\n            event: \"connect\",\n            params: [\n                {\n                    peerId: this.peerId,\n                    peerMeta: this.peerMeta,\n                    chainId: this.chainId,\n                    accounts: this.accounts\n                }\n            ]\n        });\n    }\n    rejectSession(sessionError) {\n        if (this._connected) {\n            throw new Error(legacy_types_1.ERROR_SESSION_CONNECTED);\n        }\n        const message = sessionError && sessionError.message ? sessionError.message : legacy_types_1.ERROR_SESSION_REJECTED;\n        const response = this._formatResponse({\n            id: this.handshakeId,\n            error: {\n                message\n            }\n        });\n        this._sendResponse(response);\n        this._connected = false;\n        this._eventManager.trigger({\n            event: \"disconnect\",\n            params: [\n                {\n                    message\n                }\n            ]\n        });\n        this._removeStorageSession();\n    }\n    updateSession(sessionStatus) {\n        if (!this._connected) {\n            throw new Error(legacy_types_1.ERROR_SESSION_DISCONNECTED);\n        }\n        this.chainId = sessionStatus.chainId;\n        this.accounts = sessionStatus.accounts;\n        this.networkId = sessionStatus.networkId || 0;\n        this.rpcUrl = sessionStatus.rpcUrl || \"\";\n        const sessionParams = {\n            approved: true,\n            chainId: this.chainId,\n            networkId: this.networkId,\n            accounts: this.accounts,\n            rpcUrl: this.rpcUrl\n        };\n        const request = this._formatRequest({\n            method: \"wc_sessionUpdate\",\n            params: [\n                sessionParams\n            ]\n        });\n        this._sendSessionRequest(request, \"Session update rejected\");\n        this._eventManager.trigger({\n            event: \"session_update\",\n            params: [\n                {\n                    chainId: this.chainId,\n                    accounts: this.accounts\n                }\n            ]\n        });\n        this._manageStorageSession();\n    }\n    killSession(sessionError) {\n        return tslib_1.__awaiter(this, void 0, void 0, function*() {\n            const message = sessionError ? sessionError.message : \"Session Disconnected\";\n            const sessionParams = {\n                approved: false,\n                chainId: null,\n                networkId: null,\n                accounts: null\n            };\n            const request = this._formatRequest({\n                method: \"wc_sessionUpdate\",\n                params: [\n                    sessionParams\n                ]\n            });\n            yield this._sendRequest(request);\n            this._handleSessionDisconnect(message);\n        });\n    }\n    sendTransaction(tx) {\n        return tslib_1.__awaiter(this, void 0, void 0, function*() {\n            if (!this._connected) {\n                throw new Error(legacy_types_1.ERROR_SESSION_DISCONNECTED);\n            }\n            const parsedTx = tx;\n            const request = this._formatRequest({\n                method: \"eth_sendTransaction\",\n                params: [\n                    parsedTx\n                ]\n            });\n            const result = yield this._sendCallRequest(request);\n            return result;\n        });\n    }\n    signTransaction(tx) {\n        return tslib_1.__awaiter(this, void 0, void 0, function*() {\n            if (!this._connected) {\n                throw new Error(legacy_types_1.ERROR_SESSION_DISCONNECTED);\n            }\n            const parsedTx = tx;\n            const request = this._formatRequest({\n                method: \"eth_signTransaction\",\n                params: [\n                    parsedTx\n                ]\n            });\n            const result = yield this._sendCallRequest(request);\n            return result;\n        });\n    }\n    signMessage(params) {\n        return tslib_1.__awaiter(this, void 0, void 0, function*() {\n            if (!this._connected) {\n                throw new Error(legacy_types_1.ERROR_SESSION_DISCONNECTED);\n            }\n            const request = this._formatRequest({\n                method: \"eth_sign\",\n                params\n            });\n            const result = yield this._sendCallRequest(request);\n            return result;\n        });\n    }\n    signPersonalMessage(params) {\n        return tslib_1.__awaiter(this, void 0, void 0, function*() {\n            if (!this._connected) {\n                throw new Error(legacy_types_1.ERROR_SESSION_DISCONNECTED);\n            }\n            const request = this._formatRequest({\n                method: \"personal_sign\",\n                params\n            });\n            const result = yield this._sendCallRequest(request);\n            return result;\n        });\n    }\n    signTypedData(params) {\n        return tslib_1.__awaiter(this, void 0, void 0, function*() {\n            if (!this._connected) {\n                throw new Error(legacy_types_1.ERROR_SESSION_DISCONNECTED);\n            }\n            const request = this._formatRequest({\n                method: \"eth_signTypedData\",\n                params\n            });\n            const result = yield this._sendCallRequest(request);\n            return result;\n        });\n    }\n    updateChain(chainParams) {\n        return tslib_1.__awaiter(this, void 0, void 0, function*() {\n            if (!this._connected) {\n                throw new Error(\"Session currently disconnected\");\n            }\n            const request = this._formatRequest({\n                method: \"wallet_updateChain\",\n                params: [\n                    chainParams\n                ]\n            });\n            const result = yield this._sendCallRequest(request);\n            return result;\n        });\n    }\n    unsafeSend(request, options) {\n        this._sendRequest(request, options);\n        this._eventManager.trigger({\n            event: \"call_request_sent\",\n            params: [\n                {\n                    request,\n                    options\n                }\n            ]\n        });\n        return new Promise((resolve, reject)=>{\n            this._subscribeToResponse(request.id, (error, payload)=>{\n                if (error) {\n                    reject(error);\n                    return;\n                }\n                if (!payload) {\n                    throw new Error(legacy_types_1.ERROR_MISSING_JSON_RPC);\n                }\n                resolve(payload);\n            });\n        });\n    }\n    sendCustomRequest(request, options) {\n        return tslib_1.__awaiter(this, void 0, void 0, function*() {\n            if (!this._connected) {\n                throw new Error(legacy_types_1.ERROR_SESSION_DISCONNECTED);\n            }\n            switch(request.method){\n                case \"eth_accounts\":\n                    return this.accounts;\n                case \"eth_chainId\":\n                    return legacy_utils_1.convertNumberToHex(this.chainId);\n                case \"eth_sendTransaction\":\n                case \"eth_signTransaction\":\n                    if (request.params) {}\n                    break;\n                case \"personal_sign\":\n                    if (request.params) {}\n                    break;\n                default:\n                    break;\n            }\n            const formattedRequest = this._formatRequest(request);\n            const result = yield this._sendCallRequest(formattedRequest, options);\n            return result;\n        });\n    }\n    approveRequest(response) {\n        if (legacy_utils_1.isJsonRpcResponseSuccess(response)) {\n            const formattedResponse = this._formatResponse(response);\n            this._sendResponse(formattedResponse);\n        } else {\n            throw new Error(legacy_types_1.ERROR_MISSING_RESULT);\n        }\n    }\n    rejectRequest(response) {\n        if (legacy_utils_1.isJsonRpcResponseError(response)) {\n            const formattedResponse = this._formatResponse(response);\n            this._sendResponse(formattedResponse);\n        } else {\n            throw new Error(legacy_types_1.ERROR_MISSING_ERROR);\n        }\n    }\n    transportClose() {\n        this._transport.close();\n    }\n    _sendRequest(request, options) {\n        return tslib_1.__awaiter(this, void 0, void 0, function*() {\n            const callRequest = this._formatRequest(request);\n            const encryptionPayload = yield this._encrypt(callRequest);\n            const topic = typeof (options === null || options === void 0 ? void 0 : options.topic) !== \"undefined\" ? options.topic : this.peerId;\n            const payload = JSON.stringify(encryptionPayload);\n            const silent = typeof (options === null || options === void 0 ? void 0 : options.forcePushNotification) !== \"undefined\" ? !options.forcePushNotification : legacy_utils_1.isSilentPayload(callRequest);\n            this._transport.send(payload, topic, silent);\n        });\n    }\n    _sendResponse(response) {\n        return tslib_1.__awaiter(this, void 0, void 0, function*() {\n            const encryptionPayload = yield this._encrypt(response);\n            const topic = this.peerId;\n            const payload = JSON.stringify(encryptionPayload);\n            const silent = true;\n            this._transport.send(payload, topic, silent);\n        });\n    }\n    _sendSessionRequest(request, errorMsg, options) {\n        return tslib_1.__awaiter(this, void 0, void 0, function*() {\n            this._sendRequest(request, options);\n            this._subscribeToSessionResponse(request.id, errorMsg);\n        });\n    }\n    _sendCallRequest(request, options) {\n        this._sendRequest(request, options);\n        this._eventManager.trigger({\n            event: \"call_request_sent\",\n            params: [\n                {\n                    request,\n                    options\n                }\n            ]\n        });\n        return this._subscribeToCallResponse(request.id);\n    }\n    _formatRequest(request) {\n        if (typeof request.method === \"undefined\") {\n            throw new Error(legacy_types_1.ERROR_MISSING_METHOD);\n        }\n        const formattedRequest = {\n            id: typeof request.id === \"undefined\" ? legacy_utils_1.payloadId() : request.id,\n            jsonrpc: \"2.0\",\n            method: request.method,\n            params: typeof request.params === \"undefined\" ? [] : request.params\n        };\n        return formattedRequest;\n    }\n    _formatResponse(response) {\n        if (typeof response.id === \"undefined\") {\n            throw new Error(legacy_types_1.ERROR_MISSING_ID);\n        }\n        const baseResponse = {\n            id: response.id,\n            jsonrpc: \"2.0\"\n        };\n        if (legacy_utils_1.isJsonRpcResponseError(response)) {\n            const error = legacy_utils_1.formatRpcError(response.error);\n            const errorResponse = Object.assign(Object.assign(Object.assign({}, baseResponse), response), {\n                error\n            });\n            return errorResponse;\n        } else if (legacy_utils_1.isJsonRpcResponseSuccess(response)) {\n            const successResponse = Object.assign(Object.assign({}, baseResponse), response);\n            return successResponse;\n        }\n        throw new Error(legacy_types_1.ERROR_INVALID_RESPONSE);\n    }\n    _handleSessionDisconnect(errorMsg) {\n        const message = errorMsg || \"Session Disconnected\";\n        if (!this._connected) {\n            if (this._qrcodeModal) {\n                this._qrcodeModal.close();\n            }\n            legacy_utils_1.removeLocal(legacy_types_1.MOBILE_LINK_CHOICE_KEY);\n        }\n        if (this._connected) {\n            this._connected = false;\n        }\n        if (this._handshakeId) {\n            this._handshakeId = 0;\n        }\n        if (this._handshakeTopic) {\n            this._handshakeTopic = \"\";\n        }\n        if (this._peerId) {\n            this._peerId = \"\";\n        }\n        this._eventManager.trigger({\n            event: \"disconnect\",\n            params: [\n                {\n                    message\n                }\n            ]\n        });\n        this._removeStorageSession();\n        this.transportClose();\n    }\n    _handleSessionResponse(errorMsg, sessionParams) {\n        if (sessionParams) {\n            if (sessionParams.approved) {\n                if (!this._connected) {\n                    this._connected = true;\n                    if (sessionParams.chainId) {\n                        this.chainId = sessionParams.chainId;\n                    }\n                    if (sessionParams.accounts) {\n                        this.accounts = sessionParams.accounts;\n                    }\n                    if (sessionParams.peerId && !this.peerId) {\n                        this.peerId = sessionParams.peerId;\n                    }\n                    if (sessionParams.peerMeta && !this.peerMeta) {\n                        this.peerMeta = sessionParams.peerMeta;\n                    }\n                    this._eventManager.trigger({\n                        event: \"connect\",\n                        params: [\n                            {\n                                peerId: this.peerId,\n                                peerMeta: this.peerMeta,\n                                chainId: this.chainId,\n                                accounts: this.accounts\n                            }\n                        ]\n                    });\n                } else {\n                    if (sessionParams.chainId) {\n                        this.chainId = sessionParams.chainId;\n                    }\n                    if (sessionParams.accounts) {\n                        this.accounts = sessionParams.accounts;\n                    }\n                    this._eventManager.trigger({\n                        event: \"session_update\",\n                        params: [\n                            {\n                                chainId: this.chainId,\n                                accounts: this.accounts\n                            }\n                        ]\n                    });\n                }\n                this._manageStorageSession();\n            } else {\n                this._handleSessionDisconnect(errorMsg);\n            }\n        } else {\n            this._handleSessionDisconnect(errorMsg);\n        }\n    }\n    _handleIncomingMessages(socketMessage) {\n        return tslib_1.__awaiter(this, void 0, void 0, function*() {\n            const activeTopics = [\n                this.clientId,\n                this.handshakeTopic\n            ];\n            if (!activeTopics.includes(socketMessage.topic)) {\n                return;\n            }\n            let encryptionPayload;\n            try {\n                encryptionPayload = JSON.parse(socketMessage.payload);\n            } catch (error) {\n                return;\n            }\n            const payload = yield this._decrypt(encryptionPayload);\n            if (payload) {\n                this._eventManager.trigger(payload);\n            }\n        });\n    }\n    _subscribeToSessionRequest() {\n        this._transport.subscribe(this.handshakeTopic);\n    }\n    _subscribeToResponse(id, callback) {\n        this.on(`response:${id}`, callback);\n    }\n    _subscribeToSessionResponse(id, errorMsg) {\n        this._subscribeToResponse(id, (error, payload)=>{\n            if (error) {\n                this._handleSessionResponse(error.message);\n                return;\n            }\n            if (legacy_utils_1.isJsonRpcResponseSuccess(payload)) {\n                this._handleSessionResponse(errorMsg, payload.result);\n            } else if (payload.error && payload.error.message) {\n                this._handleSessionResponse(payload.error.message);\n            } else {\n                this._handleSessionResponse(errorMsg);\n            }\n        });\n    }\n    _subscribeToCallResponse(id) {\n        return new Promise((resolve, reject)=>{\n            this._subscribeToResponse(id, (error, payload)=>{\n                if (error) {\n                    reject(error);\n                    return;\n                }\n                if (legacy_utils_1.isJsonRpcResponseSuccess(payload)) {\n                    resolve(payload.result);\n                } else if (payload.error && payload.error.message) {\n                    reject(payload.error);\n                } else {\n                    reject(new Error(legacy_types_1.ERROR_INVALID_RESPONSE));\n                }\n            });\n        });\n    }\n    _subscribeToInternalEvents() {\n        this.on(\"display_uri\", ()=>{\n            if (this._qrcodeModal) {\n                this._qrcodeModal.open(this.uri, ()=>{\n                    this._eventManager.trigger({\n                        event: \"modal_closed\",\n                        params: []\n                    });\n                }, this._qrcodeModalOptions);\n            }\n        });\n        this.on(\"connect\", ()=>{\n            if (this._qrcodeModal) {\n                this._qrcodeModal.close();\n            }\n        });\n        this.on(\"call_request_sent\", (error, payload)=>{\n            const { request } = payload.params[0];\n            if (legacy_utils_1.isMobile() && this._signingMethods.includes(request.method)) {\n                const mobileLinkUrl = legacy_utils_1.getLocal(legacy_types_1.MOBILE_LINK_CHOICE_KEY);\n                if (mobileLinkUrl) {\n                    window.location.href = mobileLinkUrl.href;\n                }\n            }\n        });\n        this.on(\"wc_sessionRequest\", (error, payload)=>{\n            if (error) {\n                this._eventManager.trigger({\n                    event: \"error\",\n                    params: [\n                        {\n                            code: \"SESSION_REQUEST_ERROR\",\n                            message: error.toString()\n                        }\n                    ]\n                });\n            }\n            this.handshakeId = payload.id;\n            this.peerId = payload.params[0].peerId;\n            this.peerMeta = payload.params[0].peerMeta;\n            const internalPayload = Object.assign(Object.assign({}, payload), {\n                method: \"session_request\"\n            });\n            this._eventManager.trigger(internalPayload);\n        });\n        this.on(\"wc_sessionUpdate\", (error, payload)=>{\n            if (error) {\n                this._handleSessionResponse(error.message);\n            }\n            this._handleSessionResponse(\"Session disconnected\", payload.params[0]);\n        });\n    }\n    _initTransport() {\n        this._transport.on(\"message\", (socketMessage)=>this._handleIncomingMessages(socketMessage));\n        this._transport.on(\"open\", ()=>this._eventManager.trigger({\n                event: \"transport_open\",\n                params: []\n            }));\n        this._transport.on(\"close\", ()=>this._eventManager.trigger({\n                event: \"transport_close\",\n                params: []\n            }));\n        this._transport.on(\"error\", ()=>this._eventManager.trigger({\n                event: \"transport_error\",\n                params: [\n                    \"Websocket connection failed\"\n                ]\n            }));\n        this._transport.open();\n    }\n    _formatUri() {\n        const protocol = this.protocol;\n        const handshakeTopic = this.handshakeTopic;\n        const version = this.version;\n        const bridge = encodeURIComponent(this.bridge);\n        const key = this.key;\n        const uri = `${protocol}:${handshakeTopic}@${version}?bridge=${bridge}&key=${key}`;\n        return uri;\n    }\n    _parseUri(uri) {\n        const result = legacy_utils_1.parseWalletConnectUri(uri);\n        if (result.protocol === this.protocol) {\n            if (!result.handshakeTopic) {\n                throw Error(\"Invalid or missing handshakeTopic parameter value\");\n            }\n            const handshakeTopic = result.handshakeTopic;\n            if (!result.bridge) {\n                throw Error(\"Invalid or missing bridge url parameter value\");\n            }\n            const bridge = decodeURIComponent(result.bridge);\n            if (!result.key) {\n                throw Error(\"Invalid or missing key parameter value\");\n            }\n            const key = result.key;\n            return {\n                handshakeTopic,\n                bridge,\n                key\n            };\n        } else {\n            throw new Error(legacy_types_1.ERROR_INVALID_URI);\n        }\n    }\n    _generateKey() {\n        return tslib_1.__awaiter(this, void 0, void 0, function*() {\n            if (this._cryptoLib) {\n                const result = yield this._cryptoLib.generateKey();\n                return result;\n            }\n            return null;\n        });\n    }\n    _encrypt(data) {\n        return tslib_1.__awaiter(this, void 0, void 0, function*() {\n            const key = this._key;\n            if (this._cryptoLib && key) {\n                const result = yield this._cryptoLib.encrypt(data, key);\n                return result;\n            }\n            return null;\n        });\n    }\n    _decrypt(payload) {\n        return tslib_1.__awaiter(this, void 0, void 0, function*() {\n            const key = this._key;\n            if (this._cryptoLib && key) {\n                const result = yield this._cryptoLib.decrypt(payload, key);\n                return result;\n            }\n            return null;\n        });\n    }\n    _getStorageSession() {\n        let result = null;\n        if (this._sessionStorage) {\n            result = this._sessionStorage.getSession();\n        }\n        return result;\n    }\n    _setStorageSession() {\n        if (this._sessionStorage) {\n            this._sessionStorage.setSession(this.session);\n        }\n    }\n    _removeStorageSession() {\n        if (this._sessionStorage) {\n            this._sessionStorage.removeSession();\n        }\n    }\n    _manageStorageSession() {\n        if (this._connected) {\n            this._setStorageSession();\n        } else {\n            this._removeStorageSession();\n        }\n    }\n    _registerPushServer(pushServerOpts) {\n        if (!pushServerOpts.url || typeof pushServerOpts.url !== \"string\") {\n            throw Error(\"Invalid or missing pushServerOpts.url parameter value\");\n        }\n        if (!pushServerOpts.type || typeof pushServerOpts.type !== \"string\") {\n            throw Error(\"Invalid or missing pushServerOpts.type parameter value\");\n        }\n        if (!pushServerOpts.token || typeof pushServerOpts.token !== \"string\") {\n            throw Error(\"Invalid or missing pushServerOpts.token parameter value\");\n        }\n        const pushSubscription = {\n            bridge: this.bridge,\n            topic: this.clientId,\n            type: pushServerOpts.type,\n            token: pushServerOpts.token,\n            peerName: \"\",\n            language: pushServerOpts.language || \"\"\n        };\n        this.on(\"connect\", (error, payload)=>tslib_1.__awaiter(this, void 0, void 0, function*() {\n                if (error) {\n                    throw error;\n                }\n                if (pushServerOpts.peerMeta) {\n                    const peerName = payload.params[0].peerMeta.name;\n                    pushSubscription.peerName = peerName;\n                }\n                try {\n                    const response = yield fetch(`${pushServerOpts.url}/new`, {\n                        method: \"POST\",\n                        headers: {\n                            Accept: \"application/json\",\n                            \"Content-Type\": \"application/json\"\n                        },\n                        body: JSON.stringify(pushSubscription)\n                    });\n                    const json = yield response.json();\n                    if (!json.success) {\n                        throw Error(\"Failed to register in Push Server\");\n                    }\n                } catch (error) {\n                    throw Error(\"Failed to register in Push Server\");\n                }\n            }));\n    }\n}\nexports[\"default\"] = Connector; //# sourceMappingURL=core.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vQHdhbGxldGNvbm5lY3QrbGVnYWN5LWNsaWVudEAyLjAuMC9ub2RlX21vZHVsZXMvQHdhbGxldGNvbm5lY3QvbGVnYWN5LWNsaWVudC9kaXN0L2Nqcy9jb3JlLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2JBLDhDQUE2QztJQUFFRyxPQUFPO0FBQUssQ0FBQyxFQUFDO0FBQzdELE1BQU1DLFVBQVVDLG1CQUFPQSxDQUFDLHNGQUFPO0FBQy9CLE1BQU1DLGlCQUFpQkQsbUJBQU9BLENBQUMsNEpBQTZCO0FBQzVELE1BQU1FLGlCQUFpQkYsbUJBQU9BLENBQUMsNEpBQTZCO0FBQzVELE1BQU1HLFdBQVdKLFFBQVFLLGVBQWUsQ0FBQ0osbUJBQU9BLENBQUMsNElBQVU7QUFDM0QsTUFBTUssV0FBV04sUUFBUUssZUFBZSxDQUFDSixtQkFBT0EsQ0FBQyw0SUFBVTtBQUMzRCxNQUFNTSxZQUFZUCxRQUFRSyxlQUFlLENBQUNKLG1CQUFPQSxDQUFDLDhJQUFXO0FBQzdELE1BQU1PLFFBQVFQLG1CQUFPQSxDQUFDLHNJQUFPO0FBQzdCLE1BQU1RO0lBQ0ZDLFlBQVlDLElBQUksQ0FBRTtRQUNkLElBQUksQ0FBQ0MsUUFBUSxHQUFHO1FBQ2hCLElBQUksQ0FBQ0MsT0FBTyxHQUFHO1FBQ2YsSUFBSSxDQUFDQyxPQUFPLEdBQUc7UUFDZixJQUFJLENBQUNDLElBQUksR0FBRztRQUNaLElBQUksQ0FBQ0MsU0FBUyxHQUFHO1FBQ2pCLElBQUksQ0FBQ0MsV0FBVyxHQUFHO1FBQ25CLElBQUksQ0FBQ0MsT0FBTyxHQUFHO1FBQ2YsSUFBSSxDQUFDQyxTQUFTLEdBQUc7UUFDakIsSUFBSSxDQUFDQyxZQUFZLEdBQUc7UUFDcEIsSUFBSSxDQUFDQyxlQUFlLEdBQUc7UUFDdkIsSUFBSSxDQUFDQyxVQUFVLEdBQUc7UUFDbEIsSUFBSSxDQUFDQyxTQUFTLEdBQUcsRUFBRTtRQUNuQixJQUFJLENBQUNDLFFBQVEsR0FBRztRQUNoQixJ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LEtBQUssR0FBRztnQkFDM0UsSUFBSWEsT0FBTztvQkFDUCxNQUFNQTtnQkFDVjtnQkFDQSxJQUFJeEMsZUFBZU8sUUFBUSxFQUFFO29CQUN6QixNQUFNNkksV0FBV3JHLFFBQVFmLE1BQU0sQ0FBQyxFQUFFLENBQUN6QixRQUFRLENBQUMrSSxJQUFJO29CQUNoREgsaUJBQWlCQyxRQUFRLEdBQUdBO2dCQUNoQztnQkFDQSxJQUFJO29CQUNBLE1BQU03RixXQUFXLE1BQU1nRyxNQUFNLENBQUMsRUFBRXZKLGVBQWVOLEdBQUcsQ0FBQyxJQUFJLENBQUMsRUFBRTt3QkFDdERxQyxRQUFRO3dCQUNSeUgsU0FBUzs0QkFDTEMsUUFBUTs0QkFDUixnQkFBZ0I7d0JBQ3BCO3dCQUNBQyxNQUFNeEQsS0FBS0MsU0FBUyxDQUFDZ0Q7b0JBQ3pCO29CQUNBLE1BQU1RLE9BQU8sTUFBTXBHLFNBQVNvRyxJQUFJO29CQUNoQyxJQUFJLENBQUNBLEtBQUtDLE9BQU8sRUFBRTt3QkFDZixNQUFNMUssTUFBTTtvQkFDaEI7Z0JBQ0osRUFDQSxPQUFPc0QsT0FBTztvQkFDVixNQUFNdEQsTUFBTTtnQkFDaEI7WUFDSjtJQUNKO0FBQ0o7QUFDQWpELGtCQUFlLEdBQUdXLFdBQ2xCLGdDQUFnQyIsInNvdXJjZXMiOlsid2VicGFjazovL3NtYXJ0LWF1ZGl0Ly4vbm9kZV9tb2R1bGVzLy5wbnBtL0B3YWxsZXRjb25uZWN0K2xlZ2FjeS1jbGllbnRAMi4wLjAvbm9kZV9tb2R1bGVzL0B3YWxsZXRjb25uZWN0L2xlZ2FjeS1jbGllbnQvZGlzdC9janMvY29yZS5qcz9mZDg1Il0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuY29uc3QgdHNsaWJfMSA9IHJlcXVpcmUoXCJ0c2xpYlwiKTtcbmNvbnN0IGxlZ2FjeV90eXBlc18xID0gcmVxdWlyZShcIkB3YWxsZXRjb25uZWN0L2xlZ2FjeS10eXBlc1wiKTtcbmNvbnN0IGxlZ2FjeV91dGlsc18xID0gcmVxdWlyZShcIkB3YWxsZXRjb25uZWN0L2xlZ2FjeS11dGlsc1wiKTtcbmNvbnN0IHNvY2tldF8xID0gdHNsaWJfMS5fX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIi4vc29ja2V0XCIpKTtcbmNvbnN0IGV2ZW50c18xID0gdHNsaWJfMS5fX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIi4vZXZlbnRzXCIpKTtcbmNvbnN0IHN0b3JhZ2VfMSA9IHRzbGliXzEuX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCIuL3N0b3JhZ2VcIikpO1xuY29uc3QgdXJsXzEgPSByZXF1aXJlKFwiLi91cmxcIik7XG5jbGFzcyBDb25uZWN0b3Ige1xuICAgIGNvbnN0cnVjdG9yKG9wdHMpIHtcbiAgICAgICAgdGhpcy5wcm90b2NvbCA9IFwid2NcIjtcbiAgICAgICAgdGhpcy52ZXJzaW9uID0gMTtcbiAgICAgICAgdGhpcy5fYnJpZGdlID0gXCJcIjtcbiAgICAgICAgdGhpcy5fa2V5ID0gbnVsbDtcbiAgICAgICAgdGhpcy5fY2xpZW50SWQgPSBcIlwiO1xuICAgICAgICB0aGlzLl9jbGllbnRNZXRhID0gbnVsbDtcbiAgICAgICAgdGhpcy5fcGVlcklkID0gXCJcIjtcbiAgICAgICAgdGhpcy5fcGVlck1ldGEgPSBudWxsO1xuICAgICAgICB0aGlzLl9oYW5kc2hha2VJZCA9IDA7XG4gICAgICAgIHRoaXMuX2hhbmRzaGFrZVRvcGljID0gXCJcIjtcbiAgICAgICAgdGhpcy5fY29ubmVjdGVkID0gZmFsc2U7XG4gICAgICAgIHRoaXMuX2FjY291bnRzID0gW107XG4gICAgICAgIHRoaXMuX2NoYWluSWQgPSAwO1xuICAgICAgICB0aGlzLl9uZXR3b3JrSWQgPSAwO1xuICAgICAgICB0aGlzLl9ycGNVcmwgPSBcIlwiO1xuICAgICAgICB0aGlzLl9ldmVudE1hbmFnZXIgPSBuZXcgZXZlbnRzXzEuZGVmYXVsdCgpO1xuICAgICAgICB0aGlzLl9jbGllbnRNZXRhID0gbGVnYWN5X3V0aWxzXzEuZ2V0Q2xpZW50TWV0YSgpIHx8IG9wdHMuY29ubmVjdG9yT3B0cy5jbGllbnRNZXRhIHx8IG51bGw7XG4gICAgICAgIHRoaXMuX2NyeXB0b0xpYiA9IG9wdHMuY3J5cHRvTGliO1xuICAgICAgICB0aGlzLl9zZXNzaW9uU3RvcmFnZSA9IG9wdHMuc2Vzc2lvblN0b3JhZ2UgfHwgbmV3IHN0b3JhZ2VfMS5kZWZhdWx0KG9wdHMuY29ubmVjdG9yT3B0cy5zdG9yYWdlSWQpO1xuICAgICAgICB0aGlzLl9xcmNvZGVNb2RhbCA9IG9wdHMuY29ubmVjdG9yT3B0cy5xcmNvZGVNb2RhbDtcbiAgICAgICAgdGhpcy5fcXJjb2RlTW9kYWxPcHRpb25zID0gb3B0cy5jb25uZWN0b3JPcHRzLnFyY29kZU1vZGFsT3B0aW9ucztcbiAgICAgICAgdGhpcy5fc2lnbmluZ01ldGhvZHMgPSBbLi4ubGVnYWN5X3R5cGVzXzEuU0lHTklOR19NRVRIT0RTLCAuLi4ob3B0cy5jb25uZWN0b3JPcHRzLnNpZ25pbmdNZXRob2RzIHx8IFtdKV07XG4gICAgICAgIGlmICghb3B0cy5jb25uZWN0b3JPcHRzLmJyaWRnZSAmJiAhb3B0cy5jb25uZWN0b3JPcHRzLnVyaSAmJiAhb3B0cy5jb25uZWN0b3JPcHRzLnNlc3Npb24pIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihsZWdhY3lfdHlwZXNfMS5FUlJPUl9NSVNTSU5HX1JFUVVJUkVEKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAob3B0cy5jb25uZWN0b3JPcHRzLmJyaWRnZSkge1xuICAgICAgICAgICAgdGhpcy5icmlkZ2UgPSB1cmxfMS5nZXRCcmlkZ2VVcmwob3B0cy5jb25uZWN0b3JPcHRzLmJyaWRnZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9wdHMuY29ubmVjdG9yT3B0cy51cmkpIHtcbiAgICAgICAgICAgIHRoaXMudXJpID0gb3B0cy5jb25uZWN0b3JPcHRzLnVyaTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBzZXNzaW9uID0gb3B0cy5jb25uZWN0b3JPcHRzLnNlc3Npb24gfHwgdGhpcy5fZ2V0U3RvcmFnZVNlc3Npb24oKTtcbiAgICAgICAgaWYgKHNlc3Npb24pIHtcbiAgICAgICAgICAgIHRoaXMuc2Vzc2lvbiA9IHNlc3Npb247XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuaGFuZHNoYWtlSWQpIHtcbiAgICAgICAgICAgIHRoaXMuX3N1YnNjcmliZVRvU2Vzc2lvblJlc3BvbnNlKHRoaXMuaGFuZHNoYWtlSWQsIFwiU2Vzc2lvbiByZXF1ZXN0IHJlamVjdGVkXCIpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX3RyYW5zcG9ydCA9XG4gICAgICAgICAgICBvcHRzLnRyYW5zcG9ydCB8fFxuICAgICAgICAgICAgICAgIG5ldyBzb2NrZXRfMS5kZWZhdWx0KHtcbiAgICAgICAgICAgICAgICAgICAgcHJvdG9jb2w6IHRoaXMucHJvdG9jb2wsXG4gICAgICAgICAgICAgICAgICAgIHZlcnNpb246IHRoaXMudmVyc2lvbixcbiAgICAgICAgICAgICAgICAgICAgdXJsOiB0aGlzLmJyaWRnZSxcbiAgICAgICAgICAgICAgICAgICAgc3Vic2NyaXB0aW9uczogW3RoaXMuY2xpZW50SWRdLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICB0aGlzLl9zdWJzY3JpYmVUb0ludGVybmFsRXZlbnRzKCk7XG4gICAgICAgIHRoaXMuX2luaXRUcmFuc3BvcnQoKTtcbiAgICAgICAgaWYgKG9wdHMuY29ubmVjdG9yT3B0cy51cmkpIHtcbiAgICAgICAgICAgIHRoaXMuX3N1YnNjcmliZVRvU2Vzc2lvblJlcXVlc3QoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAob3B0cy5wdXNoU2VydmVyT3B0cykge1xuICAgICAgICAgICAgdGhpcy5fcmVnaXN0ZXJQdXNoU2VydmVyKG9wdHMucHVzaFNlcnZlck9wdHMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHNldCBicmlkZ2UodmFsdWUpIHtcbiAgICAgICAgaWYgKCF2YWx1ZSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX2JyaWRnZSA9IHZhbHVlO1xuICAgIH1cbiAgICBnZXQgYnJpZGdlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYnJpZGdlO1xuICAgIH1cbiAgICBzZXQga2V5KHZhbHVlKSB7XG4gICAgICAgIGlmICghdmFsdWUpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBrZXkgPSBsZWdhY3lfdXRpbHNfMS5jb252ZXJ0SGV4VG9BcnJheUJ1ZmZlcih2YWx1ZSk7XG4gICAgICAgIHRoaXMuX2tleSA9IGtleTtcbiAgICB9XG4gICAgZ2V0IGtleSgpIHtcbiAgICAgICAgaWYgKHRoaXMuX2tleSkge1xuICAgICAgICAgICAgY29uc3Qga2V5ID0gbGVnYWN5X3V0aWxzXzEuY29udmVydEFycmF5QnVmZmVyVG9IZXgodGhpcy5fa2V5LCB0cnVlKTtcbiAgICAgICAgICAgIHJldHVybiBrZXk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFwiXCI7XG4gICAgfVxuICAgIHNldCBjbGllbnRJZCh2YWx1ZSkge1xuICAgICAgICBpZiAoIXZhbHVlKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fY2xpZW50SWQgPSB2YWx1ZTtcbiAgICB9XG4gICAgZ2V0IGNsaWVudElkKCkge1xuICAgICAgICBsZXQgY2xpZW50SWQgPSB0aGlzLl9jbGllbnRJZDtcbiAgICAgICAgaWYgKCFjbGllbnRJZCkge1xuICAgICAgICAgICAgY2xpZW50SWQgPSB0aGlzLl9jbGllbnRJZCA9IGxlZ2FjeV91dGlsc18xLnV1aWQoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5fY2xpZW50SWQ7XG4gICAgfVxuICAgIHNldCBwZWVySWQodmFsdWUpIHtcbiAgICAgICAgaWYgKCF2YWx1ZSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX3BlZXJJZCA9IHZhbHVlO1xuICAgIH1cbiAgICBnZXQgcGVlcklkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fcGVlcklkO1xuICAgIH1cbiAgICBzZXQgY2xpZW50TWV0YSh2YWx1ZSkge1xuICAgIH1cbiAgICBnZXQgY2xpZW50TWV0YSgpIHtcbiAgICAgICAgbGV0IGNsaWVudE1ldGEgPSB0aGlzLl9jbGllbnRNZXRhO1xuICAgICAgICBpZiAoIWNsaWVudE1ldGEpIHtcbiAgICAgICAgICAgIGNsaWVudE1ldGEgPSB0aGlzLl9jbGllbnRNZXRhID0gbGVnYWN5X3V0aWxzXzEuZ2V0Q2xpZW50TWV0YSgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjbGllbnRNZXRhO1xuICAgIH1cbiAgICBzZXQgcGVlck1ldGEodmFsdWUpIHtcbiAgICAgICAgdGhpcy5fcGVlck1ldGEgPSB2YWx1ZTtcbiAgICB9XG4gICAgZ2V0IHBlZXJNZXRhKCkge1xuICAgICAgICBjb25zdCBwZWVyTWV0YSA9IHRoaXMuX3BlZXJNZXRhO1xuICAgICAgICByZXR1cm4gcGVlck1ldGE7XG4gICAgfVxuICAgIHNldCBoYW5kc2hha2VUb3BpYyh2YWx1ZSkge1xuICAgICAgICBpZiAoIXZhbHVlKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5faGFuZHNoYWtlVG9waWMgPSB2YWx1ZTtcbiAgICB9XG4gICAgZ2V0IGhhbmRzaGFrZVRvcGljKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5faGFuZHNoYWtlVG9waWM7XG4gICAgfVxuICAgIHNldCBoYW5kc2hha2VJZCh2YWx1ZSkge1xuICAgICAgICBpZiAoIXZhbHVlKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5faGFuZHNoYWtlSWQgPSB2YWx1ZTtcbiAgICB9XG4gICAgZ2V0IGhhbmRzaGFrZUlkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5faGFuZHNoYWtlSWQ7XG4gICAgfVxuICAgIGdldCB1cmkoKSB7XG4gICAgICAgIGNvbnN0IF91cmkgPSB0aGlzLl9mb3JtYXRVcmkoKTtcbiAgICAgICAgcmV0dXJuIF91cmk7XG4gICAgfVxuICAgIHNldCB1cmkodmFsdWUpIHtcbiAgICAgICAgaWYgKCF2YWx1ZSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHsgaGFuZHNoYWtlVG9waWMsIGJyaWRnZSwga2V5IH0gPSB0aGlzLl9wYXJzZVVyaSh2YWx1ZSk7XG4gICAgICAgIHRoaXMuaGFuZHNoYWtlVG9waWMgPSBoYW5kc2hha2VUb3BpYztcbiAgICAgICAgdGhpcy5icmlkZ2UgPSBicmlkZ2U7XG4gICAgICAgIHRoaXMua2V5ID0ga2V5O1xuICAgIH1cbiAgICBzZXQgY2hhaW5JZCh2YWx1ZSkge1xuICAgICAgICB0aGlzLl9jaGFpbklkID0gdmFsdWU7XG4gICAgfVxuICAgIGdldCBjaGFpbklkKCkge1xuICAgICAgICBjb25zdCBjaGFpbklkID0gdGhpcy5fY2hhaW5JZDtcbiAgICAgICAgcmV0dXJuIGNoYWluSWQ7XG4gICAgfVxuICAgIHNldCBuZXR3b3JrSWQodmFsdWUpIHtcbiAgICAgICAgdGhpcy5fbmV0d29ya0lkID0gdmFsdWU7XG4gICAgfVxuICAgIGdldCBuZXR3b3JrSWQoKSB7XG4gICAgICAgIGNvbnN0IG5ldHdvcmtJZCA9IHRoaXMuX25ldHdvcmtJZDtcbiAgICAgICAgcmV0dXJuIG5ldHdvcmtJZDtcbiAgICB9XG4gICAgc2V0IGFjY291bnRzKHZhbHVlKSB7XG4gICAgICAgIHRoaXMuX2FjY291bnRzID0gdmFsdWU7XG4gICAgfVxuICAgIGdldCBhY2NvdW50cygpIHtcbiAgICAgICAgY29uc3QgYWNjb3VudHMgPSB0aGlzLl9hY2NvdW50cztcbiAgICAgICAgcmV0dXJuIGFjY291bnRzO1xuICAgIH1cbiAgICBzZXQgcnBjVXJsKHZhbHVlKSB7XG4gICAgICAgIHRoaXMuX3JwY1VybCA9IHZhbHVlO1xuICAgIH1cbiAgICBnZXQgcnBjVXJsKCkge1xuICAgICAgICBjb25zdCBycGNVcmwgPSB0aGlzLl9ycGNVcmw7XG4gICAgICAgIHJldHVybiBycGNVcmw7XG4gICAgfVxuICAgIHNldCBjb25uZWN0ZWQodmFsdWUpIHtcbiAgICB9XG4gICAgZ2V0IGNvbm5lY3RlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2Nvbm5lY3RlZDtcbiAgICB9XG4gICAgc2V0IHBlbmRpbmcodmFsdWUpIHtcbiAgICB9XG4gICAgZ2V0IHBlbmRpbmcoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuX2hhbmRzaGFrZVRvcGljO1xuICAgIH1cbiAgICBnZXQgc2Vzc2lvbigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGNvbm5lY3RlZDogdGhpcy5jb25uZWN0ZWQsXG4gICAgICAgICAgICBhY2NvdW50czogdGhpcy5hY2NvdW50cyxcbiAgICAgICAgICAgIGNoYWluSWQ6IHRoaXMuY2hhaW5JZCxcbiAgICAgICAgICAgIGJyaWRnZTogdGhpcy5icmlkZ2UsXG4gICAgICAgICAgICBrZXk6IHRoaXMua2V5LFxuICAgICAgICAgICAgY2xpZW50SWQ6IHRoaXMuY2xpZW50SWQsXG4gICAgICAgICAgICBjbGllbnRNZXRhOiB0aGlzLmNsaWVudE1ldGEsXG4gICAgICAgICAgICBwZWVySWQ6IHRoaXMucGVlcklkLFxuICAgICAgICAgICAgcGVlck1ldGE6IHRoaXMucGVlck1ldGEsXG4gICAgICAgICAgICBoYW5kc2hha2VJZDogdGhpcy5oYW5kc2hha2VJZCxcbiAgICAgICAgICAgIGhhbmRzaGFrZVRvcGljOiB0aGlzLmhhbmRzaGFrZVRvcGljLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBzZXQgc2Vzc2lvbih2YWx1ZSkge1xuICAgICAgICBpZiAoIXZhbHVlKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fY29ubmVjdGVkID0gdmFsdWUuY29ubmVjdGVkO1xuICAgICAgICB0aGlzLmFjY291bnRzID0gdmFsdWUuYWNjb3VudHM7XG4gICAgICAgIHRoaXMuY2hhaW5JZCA9IHZhbHVlLmNoYWluSWQ7XG4gICAgICAgIHRoaXMuYnJpZGdlID0gdmFsdWUuYnJpZGdlO1xuICAgICAgICB0aGlzLmtleSA9IHZhbHVlLmtleTtcbiAgICAgICAgdGhpcy5jbGllbnRJZCA9IHZhbHVlLmNsaWVudElkO1xuICAgICAgICB0aGlzLmNsaWVudE1ldGEgPSB2YWx1ZS5jbGllbnRNZXRhO1xuICAgICAgICB0aGlzLnBlZXJJZCA9IHZhbHVlLnBlZXJJZDtcbiAgICAgICAgdGhpcy5wZWVyTWV0YSA9IHZhbHVlLnBlZXJNZXRhO1xuICAgICAgICB0aGlzLmhhbmRzaGFrZUlkID0gdmFsdWUuaGFuZHNoYWtlSWQ7XG4gICAgICAgIHRoaXMuaGFuZHNoYWtlVG9waWMgPSB2YWx1ZS5oYW5kc2hha2VUb3BpYztcbiAgICB9XG4gICAgb24oZXZlbnQsIGNhbGxiYWNrKSB7XG4gICAgICAgIGNvbnN0IGV2ZW50RW1pdHRlciA9IHtcbiAgICAgICAgICAgIGV2ZW50LFxuICAgICAgICAgICAgY2FsbGJhY2ssXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuX2V2ZW50TWFuYWdlci5zdWJzY3JpYmUoZXZlbnRFbWl0dGVyKTtcbiAgICB9XG4gICAgb2ZmKGV2ZW50KSB7XG4gICAgICAgIHRoaXMuX2V2ZW50TWFuYWdlci51bnN1YnNjcmliZShldmVudCk7XG4gICAgfVxuICAgIGNyZWF0ZUluc3RhbnRSZXF1ZXN0KGluc3RhbnRSZXF1ZXN0KSB7XG4gICAgICAgIHJldHVybiB0c2xpYl8xLl9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIHRoaXMuX2tleSA9IHlpZWxkIHRoaXMuX2dlbmVyYXRlS2V5KCk7XG4gICAgICAgICAgICBjb25zdCByZXF1ZXN0ID0gdGhpcy5fZm9ybWF0UmVxdWVzdCh7XG4gICAgICAgICAgICAgICAgbWV0aG9kOiBcIndjX2luc3RhbnRSZXF1ZXN0XCIsXG4gICAgICAgICAgICAgICAgcGFyYW1zOiBbXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBlZXJJZDogdGhpcy5jbGllbnRJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHBlZXJNZXRhOiB0aGlzLmNsaWVudE1ldGEsXG4gICAgICAgICAgICAgICAgICAgICAgICByZXF1ZXN0OiB0aGlzLl9mb3JtYXRSZXF1ZXN0KGluc3RhbnRSZXF1ZXN0KSxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLmhhbmRzaGFrZUlkID0gcmVxdWVzdC5pZDtcbiAgICAgICAgICAgIHRoaXMuaGFuZHNoYWtlVG9waWMgPSBsZWdhY3lfdXRpbHNfMS51dWlkKCk7XG4gICAgICAgICAgICB0aGlzLl9ldmVudE1hbmFnZXIudHJpZ2dlcih7XG4gICAgICAgICAgICAgICAgZXZlbnQ6IFwiZGlzcGxheV91cmlcIixcbiAgICAgICAgICAgICAgICBwYXJhbXM6IFt0aGlzLnVyaV0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMub24oXCJtb2RhbF9jbG9zZWRcIiwgKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihsZWdhY3lfdHlwZXNfMS5FUlJPUl9RUkNPREVfTU9EQUxfVVNFUl9DTE9TRUQpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBjb25zdCBlbmRJbnN0YW50UmVxdWVzdCA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmtpbGxTZXNzaW9uKCk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSB5aWVsZCB0aGlzLl9zZW5kQ2FsbFJlcXVlc3QocmVxdWVzdCk7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICBlbmRJbnN0YW50UmVxdWVzdCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgZW5kSW5zdGFudFJlcXVlc3QoKTtcbiAgICAgICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGNvbm5lY3Qob3B0cykge1xuICAgICAgICByZXR1cm4gdHNsaWJfMS5fX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuX3FyY29kZU1vZGFsKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGxlZ2FjeV90eXBlc18xLkVSUk9SX1FSQ09ERV9NT0RBTF9OT1RfUFJPVklERUQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuY29ubmVjdGVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgY2hhaW5JZDogdGhpcy5jaGFpbklkLFxuICAgICAgICAgICAgICAgICAgICBhY2NvdW50czogdGhpcy5hY2NvdW50cyxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgeWllbGQgdGhpcy5jcmVhdGVTZXNzaW9uKG9wdHMpO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHRzbGliXzEuX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgICAgIHRoaXMub24oXCJtb2RhbF9jbG9zZWRcIiwgKCkgPT4gcmVqZWN0KG5ldyBFcnJvcihsZWdhY3lfdHlwZXNfMS5FUlJPUl9RUkNPREVfTU9EQUxfVVNFUl9DTE9TRUQpKSk7XG4gICAgICAgICAgICAgICAgdGhpcy5vbihcImNvbm5lY3RcIiwgKGVycm9yLCBwYXlsb2FkKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlamVjdChlcnJvcik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShwYXlsb2FkLnBhcmFtc1swXSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBjcmVhdGVTZXNzaW9uKG9wdHMpIHtcbiAgICAgICAgcmV0dXJuIHRzbGliXzEuX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuX2Nvbm5lY3RlZCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihsZWdhY3lfdHlwZXNfMS5FUlJPUl9TRVNTSU9OX0NPTk5FQ1RFRCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5wZW5kaW5nKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5fa2V5ID0geWllbGQgdGhpcy5fZ2VuZXJhdGVLZXkoKTtcbiAgICAgICAgICAgIGNvbnN0IHJlcXVlc3QgPSB0aGlzLl9mb3JtYXRSZXF1ZXN0KHtcbiAgICAgICAgICAgICAgICBtZXRob2Q6IFwid2Nfc2Vzc2lvblJlcXVlc3RcIixcbiAgICAgICAgICAgICAgICBwYXJhbXM6IFtcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGVlcklkOiB0aGlzLmNsaWVudElkLFxuICAgICAgICAgICAgICAgICAgICAgICAgcGVlck1ldGE6IHRoaXMuY2xpZW50TWV0YSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoYWluSWQ6IG9wdHMgJiYgb3B0cy5jaGFpbklkID8gb3B0cy5jaGFpbklkIDogbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLmhhbmRzaGFrZUlkID0gcmVxdWVzdC5pZDtcbiAgICAgICAgICAgIHRoaXMuaGFuZHNoYWtlVG9waWMgPSBsZWdhY3lfdXRpbHNfMS51dWlkKCk7XG4gICAgICAgICAgICB0aGlzLl9zZW5kU2Vzc2lvblJlcXVlc3QocmVxdWVzdCwgXCJTZXNzaW9uIHVwZGF0ZSByZWplY3RlZFwiLCB7XG4gICAgICAgICAgICAgICAgdG9waWM6IHRoaXMuaGFuZHNoYWtlVG9waWMsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMuX2V2ZW50TWFuYWdlci50cmlnZ2VyKHtcbiAgICAgICAgICAgICAgICBldmVudDogXCJkaXNwbGF5X3VyaVwiLFxuICAgICAgICAgICAgICAgIHBhcmFtczogW3RoaXMudXJpXSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgYXBwcm92ZVNlc3Npb24oc2Vzc2lvblN0YXR1cykge1xuICAgICAgICBpZiAodGhpcy5fY29ubmVjdGVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IobGVnYWN5X3R5cGVzXzEuRVJST1JfU0VTU0lPTl9DT05ORUNURUQpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuY2hhaW5JZCA9IHNlc3Npb25TdGF0dXMuY2hhaW5JZDtcbiAgICAgICAgdGhpcy5hY2NvdW50cyA9IHNlc3Npb25TdGF0dXMuYWNjb3VudHM7XG4gICAgICAgIHRoaXMubmV0d29ya0lkID0gc2Vzc2lvblN0YXR1cy5uZXR3b3JrSWQgfHwgMDtcbiAgICAgICAgdGhpcy5ycGNVcmwgPSBzZXNzaW9uU3RhdHVzLnJwY1VybCB8fCBcIlwiO1xuICAgICAgICBjb25zdCBzZXNzaW9uUGFyYW1zID0ge1xuICAgICAgICAgICAgYXBwcm92ZWQ6IHRydWUsXG4gICAgICAgICAgICBjaGFpbklkOiB0aGlzLmNoYWluSWQsXG4gICAgICAgICAgICBuZXR3b3JrSWQ6IHRoaXMubmV0d29ya0lkLFxuICAgICAgICAgICAgYWNjb3VudHM6IHRoaXMuYWNjb3VudHMsXG4gICAgICAgICAgICBycGNVcmw6IHRoaXMucnBjVXJsLFxuICAgICAgICAgICAgcGVlcklkOiB0aGlzLmNsaWVudElkLFxuICAgICAgICAgICAgcGVlck1ldGE6IHRoaXMuY2xpZW50TWV0YSxcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB7XG4gICAgICAgICAgICBpZDogdGhpcy5oYW5kc2hha2VJZCxcbiAgICAgICAgICAgIGpzb25ycGM6IFwiMi4wXCIsXG4gICAgICAgICAgICByZXN1bHQ6IHNlc3Npb25QYXJhbXMsXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuX3NlbmRSZXNwb25zZShyZXNwb25zZSk7XG4gICAgICAgIHRoaXMuX2Nvbm5lY3RlZCA9IHRydWU7XG4gICAgICAgIHRoaXMuX3NldFN0b3JhZ2VTZXNzaW9uKCk7XG4gICAgICAgIHRoaXMuX2V2ZW50TWFuYWdlci50cmlnZ2VyKHtcbiAgICAgICAgICAgIGV2ZW50OiBcImNvbm5lY3RcIixcbiAgICAgICAgICAgIHBhcmFtczogW1xuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgcGVlcklkOiB0aGlzLnBlZXJJZCxcbiAgICAgICAgICAgICAgICAgICAgcGVlck1ldGE6IHRoaXMucGVlck1ldGEsXG4gICAgICAgICAgICAgICAgICAgIGNoYWluSWQ6IHRoaXMuY2hhaW5JZCxcbiAgICAgICAgICAgICAgICAgICAgYWNjb3VudHM6IHRoaXMuYWNjb3VudHMsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF0sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICByZWplY3RTZXNzaW9uKHNlc3Npb25FcnJvcikge1xuICAgICAgICBpZiAodGhpcy5fY29ubmVjdGVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IobGVnYWN5X3R5cGVzXzEuRVJST1JfU0VTU0lPTl9DT05ORUNURUQpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBzZXNzaW9uRXJyb3IgJiYgc2Vzc2lvbkVycm9yLm1lc3NhZ2UgPyBzZXNzaW9uRXJyb3IubWVzc2FnZSA6IGxlZ2FjeV90eXBlc18xLkVSUk9SX1NFU1NJT05fUkVKRUNURUQ7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gdGhpcy5fZm9ybWF0UmVzcG9uc2Uoe1xuICAgICAgICAgICAgaWQ6IHRoaXMuaGFuZHNoYWtlSWQsXG4gICAgICAgICAgICBlcnJvcjogeyBtZXNzYWdlIH0sXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLl9zZW5kUmVzcG9uc2UocmVzcG9uc2UpO1xuICAgICAgICB0aGlzLl9jb25uZWN0ZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5fZXZlbnRNYW5hZ2VyLnRyaWdnZXIoe1xuICAgICAgICAgICAgZXZlbnQ6IFwiZGlzY29ubmVjdFwiLFxuICAgICAgICAgICAgcGFyYW1zOiBbeyBtZXNzYWdlIH1dLFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5fcmVtb3ZlU3RvcmFnZVNlc3Npb24oKTtcbiAgICB9XG4gICAgdXBkYXRlU2Vzc2lvbihzZXNzaW9uU3RhdHVzKSB7XG4gICAgICAgIGlmICghdGhpcy5fY29ubmVjdGVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IobGVnYWN5X3R5cGVzXzEuRVJST1JfU0VTU0lPTl9ESVNDT05ORUNURUQpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuY2hhaW5JZCA9IHNlc3Npb25TdGF0dXMuY2hhaW5JZDtcbiAgICAgICAgdGhpcy5hY2NvdW50cyA9IHNlc3Npb25TdGF0dXMuYWNjb3VudHM7XG4gICAgICAgIHRoaXMubmV0d29ya0lkID0gc2Vzc2lvblN0YXR1cy5uZXR3b3JrSWQgfHwgMDtcbiAgICAgICAgdGhpcy5ycGNVcmwgPSBzZXNzaW9uU3RhdHVzLnJwY1VybCB8fCBcIlwiO1xuICAgICAgICBjb25zdCBzZXNzaW9uUGFyYW1zID0ge1xuICAgICAgICAgICAgYXBwcm92ZWQ6IHRydWUsXG4gICAgICAgICAgICBjaGFpbklkOiB0aGlzLmNoYWluSWQsXG4gICAgICAgICAgICBuZXR3b3JrSWQ6IHRoaXMubmV0d29ya0lkLFxuICAgICAgICAgICAgYWNjb3VudHM6IHRoaXMuYWNjb3VudHMsXG4gICAgICAgICAgICBycGNVcmw6IHRoaXMucnBjVXJsLFxuICAgICAgICB9O1xuICAgICAgICBjb25zdCByZXF1ZXN0ID0gdGhpcy5fZm9ybWF0UmVxdWVzdCh7XG4gICAgICAgICAgICBtZXRob2Q6IFwid2Nfc2Vzc2lvblVwZGF0ZVwiLFxuICAgICAgICAgICAgcGFyYW1zOiBbc2Vzc2lvblBhcmFtc10sXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLl9zZW5kU2Vzc2lvblJlcXVlc3QocmVxdWVzdCwgXCJTZXNzaW9uIHVwZGF0ZSByZWplY3RlZFwiKTtcbiAgICAgICAgdGhpcy5fZXZlbnRNYW5hZ2VyLnRyaWdnZXIoe1xuICAgICAgICAgICAgZXZlbnQ6IFwic2Vzc2lvbl91cGRhdGVcIixcbiAgICAgICAgICAgIHBhcmFtczogW1xuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgY2hhaW5JZDogdGhpcy5jaGFpbklkLFxuICAgICAgICAgICAgICAgICAgICBhY2NvdW50czogdGhpcy5hY2NvdW50cyxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgXSxcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuX21hbmFnZVN0b3JhZ2VTZXNzaW9uKCk7XG4gICAgfVxuICAgIGtpbGxTZXNzaW9uKHNlc3Npb25FcnJvcikge1xuICAgICAgICByZXR1cm4gdHNsaWJfMS5fX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBjb25zdCBtZXNzYWdlID0gc2Vzc2lvbkVycm9yID8gc2Vzc2lvbkVycm9yLm1lc3NhZ2UgOiBcIlNlc3Npb24gRGlzY29ubmVjdGVkXCI7XG4gICAgICAgICAgICBjb25zdCBzZXNzaW9uUGFyYW1zID0ge1xuICAgICAgICAgICAgICAgIGFwcHJvdmVkOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBjaGFpbklkOiBudWxsLFxuICAgICAgICAgICAgICAgIG5ldHdvcmtJZDogbnVsbCxcbiAgICAgICAgICAgICAgICBhY2NvdW50czogbnVsbCxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCByZXF1ZXN0ID0gdGhpcy5fZm9ybWF0UmVxdWVzdCh7XG4gICAgICAgICAgICAgICAgbWV0aG9kOiBcIndjX3Nlc3Npb25VcGRhdGVcIixcbiAgICAgICAgICAgICAgICBwYXJhbXM6IFtzZXNzaW9uUGFyYW1zXSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgeWllbGQgdGhpcy5fc2VuZFJlcXVlc3QocmVxdWVzdCk7XG4gICAgICAgICAgICB0aGlzLl9oYW5kbGVTZXNzaW9uRGlzY29ubmVjdChtZXNzYWdlKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHNlbmRUcmFuc2FjdGlvbih0eCkge1xuICAgICAgICByZXR1cm4gdHNsaWJfMS5fX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuX2Nvbm5lY3RlZCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihsZWdhY3lfdHlwZXNfMS5FUlJPUl9TRVNTSU9OX0RJU0NPTk5FQ1RFRCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBwYXJzZWRUeCA9IHR4O1xuICAgICAgICAgICAgY29uc3QgcmVxdWVzdCA9IHRoaXMuX2Zvcm1hdFJlcXVlc3Qoe1xuICAgICAgICAgICAgICAgIG1ldGhvZDogXCJldGhfc2VuZFRyYW5zYWN0aW9uXCIsXG4gICAgICAgICAgICAgICAgcGFyYW1zOiBbcGFyc2VkVHhdLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSB5aWVsZCB0aGlzLl9zZW5kQ2FsbFJlcXVlc3QocmVxdWVzdCk7XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgc2lnblRyYW5zYWN0aW9uKHR4KSB7XG4gICAgICAgIHJldHVybiB0c2xpYl8xLl9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5fY29ubmVjdGVkKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGxlZ2FjeV90eXBlc18xLkVSUk9SX1NFU1NJT05fRElTQ09OTkVDVEVEKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHBhcnNlZFR4ID0gdHg7XG4gICAgICAgICAgICBjb25zdCByZXF1ZXN0ID0gdGhpcy5fZm9ybWF0UmVxdWVzdCh7XG4gICAgICAgICAgICAgICAgbWV0aG9kOiBcImV0aF9zaWduVHJhbnNhY3Rpb25cIixcbiAgICAgICAgICAgICAgICBwYXJhbXM6IFtwYXJzZWRUeF0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IHlpZWxkIHRoaXMuX3NlbmRDYWxsUmVxdWVzdChyZXF1ZXN0KTtcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBzaWduTWVzc2FnZShwYXJhbXMpIHtcbiAgICAgICAgcmV0dXJuIHRzbGliXzEuX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLl9jb25uZWN0ZWQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IobGVnYWN5X3R5cGVzXzEuRVJST1JfU0VTU0lPTl9ESVNDT05ORUNURUQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcmVxdWVzdCA9IHRoaXMuX2Zvcm1hdFJlcXVlc3Qoe1xuICAgICAgICAgICAgICAgIG1ldGhvZDogXCJldGhfc2lnblwiLFxuICAgICAgICAgICAgICAgIHBhcmFtcyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0geWllbGQgdGhpcy5fc2VuZENhbGxSZXF1ZXN0KHJlcXVlc3QpO1xuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHNpZ25QZXJzb25hbE1lc3NhZ2UocGFyYW1zKSB7XG4gICAgICAgIHJldHVybiB0c2xpYl8xLl9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5fY29ubmVjdGVkKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGxlZ2FjeV90eXBlc18xLkVSUk9SX1NFU1NJT05fRElTQ09OTkVDVEVEKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHJlcXVlc3QgPSB0aGlzLl9mb3JtYXRSZXF1ZXN0KHtcbiAgICAgICAgICAgICAgICBtZXRob2Q6IFwicGVyc29uYWxfc2lnblwiLFxuICAgICAgICAgICAgICAgIHBhcmFtcyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0geWllbGQgdGhpcy5fc2VuZENhbGxSZXF1ZXN0KHJlcXVlc3QpO1xuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHNpZ25UeXBlZERhdGEocGFyYW1zKSB7XG4gICAgICAgIHJldHVybiB0c2xpYl8xLl9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5fY29ubmVjdGVkKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGxlZ2FjeV90eXBlc18xLkVSUk9SX1NFU1NJT05fRElTQ09OTkVDVEVEKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHJlcXVlc3QgPSB0aGlzLl9mb3JtYXRSZXF1ZXN0KHtcbiAgICAgICAgICAgICAgICBtZXRob2Q6IFwiZXRoX3NpZ25UeXBlZERhdGFcIixcbiAgICAgICAgICAgICAgICBwYXJhbXMsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IHlpZWxkIHRoaXMuX3NlbmRDYWxsUmVxdWVzdChyZXF1ZXN0KTtcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICB1cGRhdGVDaGFpbihjaGFpblBhcmFtcykge1xuICAgICAgICByZXR1cm4gdHNsaWJfMS5fX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuX2Nvbm5lY3RlZCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlNlc3Npb24gY3VycmVudGx5IGRpc2Nvbm5lY3RlZFwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHJlcXVlc3QgPSB0aGlzLl9mb3JtYXRSZXF1ZXN0KHtcbiAgICAgICAgICAgICAgICBtZXRob2Q6IFwid2FsbGV0X3VwZGF0ZUNoYWluXCIsXG4gICAgICAgICAgICAgICAgcGFyYW1zOiBbY2hhaW5QYXJhbXNdLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSB5aWVsZCB0aGlzLl9zZW5kQ2FsbFJlcXVlc3QocmVxdWVzdCk7XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgdW5zYWZlU2VuZChyZXF1ZXN0LCBvcHRpb25zKSB7XG4gICAgICAgIHRoaXMuX3NlbmRSZXF1ZXN0KHJlcXVlc3QsIG9wdGlvbnMpO1xuICAgICAgICB0aGlzLl9ldmVudE1hbmFnZXIudHJpZ2dlcih7XG4gICAgICAgICAgICBldmVudDogXCJjYWxsX3JlcXVlc3Rfc2VudFwiLFxuICAgICAgICAgICAgcGFyYW1zOiBbeyByZXF1ZXN0LCBvcHRpb25zIH1dLFxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgIHRoaXMuX3N1YnNjcmliZVRvUmVzcG9uc2UocmVxdWVzdC5pZCwgKGVycm9yLCBwYXlsb2FkKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlamVjdChlcnJvcik7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCFwYXlsb2FkKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihsZWdhY3lfdHlwZXNfMS5FUlJPUl9NSVNTSU5HX0pTT05fUlBDKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmVzb2x2ZShwYXlsb2FkKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgc2VuZEN1c3RvbVJlcXVlc3QocmVxdWVzdCwgb3B0aW9ucykge1xuICAgICAgICByZXR1cm4gdHNsaWJfMS5fX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuX2Nvbm5lY3RlZCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihsZWdhY3lfdHlwZXNfMS5FUlJPUl9TRVNTSU9OX0RJU0NPTk5FQ1RFRCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzd2l0Y2ggKHJlcXVlc3QubWV0aG9kKSB7XG4gICAgICAgICAgICAgICAgY2FzZSBcImV0aF9hY2NvdW50c1wiOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5hY2NvdW50cztcbiAgICAgICAgICAgICAgICBjYXNlIFwiZXRoX2NoYWluSWRcIjpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGxlZ2FjeV91dGlsc18xLmNvbnZlcnROdW1iZXJUb0hleCh0aGlzLmNoYWluSWQpO1xuICAgICAgICAgICAgICAgIGNhc2UgXCJldGhfc2VuZFRyYW5zYWN0aW9uXCI6XG4gICAgICAgICAgICAgICAgY2FzZSBcImV0aF9zaWduVHJhbnNhY3Rpb25cIjpcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlcXVlc3QucGFyYW1zKSB7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBcInBlcnNvbmFsX3NpZ25cIjpcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlcXVlc3QucGFyYW1zKSB7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBmb3JtYXR0ZWRSZXF1ZXN0ID0gdGhpcy5fZm9ybWF0UmVxdWVzdChyZXF1ZXN0KTtcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IHlpZWxkIHRoaXMuX3NlbmRDYWxsUmVxdWVzdChmb3JtYXR0ZWRSZXF1ZXN0LCBvcHRpb25zKTtcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBhcHByb3ZlUmVxdWVzdChyZXNwb25zZSkge1xuICAgICAgICBpZiAobGVnYWN5X3V0aWxzXzEuaXNKc29uUnBjUmVzcG9uc2VTdWNjZXNzKHJlc3BvbnNlKSkge1xuICAgICAgICAgICAgY29uc3QgZm9ybWF0dGVkUmVzcG9uc2UgPSB0aGlzLl9mb3JtYXRSZXNwb25zZShyZXNwb25zZSk7XG4gICAgICAgICAgICB0aGlzLl9zZW5kUmVzcG9uc2UoZm9ybWF0dGVkUmVzcG9uc2UpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGxlZ2FjeV90eXBlc18xLkVSUk9SX01JU1NJTkdfUkVTVUxUKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZWplY3RSZXF1ZXN0KHJlc3BvbnNlKSB7XG4gICAgICAgIGlmIChsZWdhY3lfdXRpbHNfMS5pc0pzb25ScGNSZXNwb25zZUVycm9yKHJlc3BvbnNlKSkge1xuICAgICAgICAgICAgY29uc3QgZm9ybWF0dGVkUmVzcG9uc2UgPSB0aGlzLl9mb3JtYXRSZXNwb25zZShyZXNwb25zZSk7XG4gICAgICAgICAgICB0aGlzLl9zZW5kUmVzcG9uc2UoZm9ybWF0dGVkUmVzcG9uc2UpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGxlZ2FjeV90eXBlc18xLkVSUk9SX01JU1NJTkdfRVJST1IpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHRyYW5zcG9ydENsb3NlKCkge1xuICAgICAgICB0aGlzLl90cmFuc3BvcnQuY2xvc2UoKTtcbiAgICB9XG4gICAgX3NlbmRSZXF1ZXN0KHJlcXVlc3QsIG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIHRzbGliXzEuX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgY29uc3QgY2FsbFJlcXVlc3QgPSB0aGlzLl9mb3JtYXRSZXF1ZXN0KHJlcXVlc3QpO1xuICAgICAgICAgICAgY29uc3QgZW5jcnlwdGlvblBheWxvYWQgPSB5aWVsZCB0aGlzLl9lbmNyeXB0KGNhbGxSZXF1ZXN0KTtcbiAgICAgICAgICAgIGNvbnN0IHRvcGljID0gdHlwZW9mIChvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMudG9waWMpICE9PSBcInVuZGVmaW5lZFwiID8gb3B0aW9ucy50b3BpYyA6IHRoaXMucGVlcklkO1xuICAgICAgICAgICAgY29uc3QgcGF5bG9hZCA9IEpTT04uc3RyaW5naWZ5KGVuY3J5cHRpb25QYXlsb2FkKTtcbiAgICAgICAgICAgIGNvbnN0IHNpbGVudCA9IHR5cGVvZiAob3B0aW9ucyA9PT0gbnVsbCB8fCBvcHRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRpb25zLmZvcmNlUHVzaE5vdGlmaWNhdGlvbikgIT09IFwidW5kZWZpbmVkXCJcbiAgICAgICAgICAgICAgICA/ICFvcHRpb25zLmZvcmNlUHVzaE5vdGlmaWNhdGlvblxuICAgICAgICAgICAgICAgIDogbGVnYWN5X3V0aWxzXzEuaXNTaWxlbnRQYXlsb2FkKGNhbGxSZXF1ZXN0KTtcbiAgICAgICAgICAgIHRoaXMuX3RyYW5zcG9ydC5zZW5kKHBheWxvYWQsIHRvcGljLCBzaWxlbnQpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgX3NlbmRSZXNwb25zZShyZXNwb25zZSkge1xuICAgICAgICByZXR1cm4gdHNsaWJfMS5fX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBjb25zdCBlbmNyeXB0aW9uUGF5bG9hZCA9IHlpZWxkIHRoaXMuX2VuY3J5cHQocmVzcG9uc2UpO1xuICAgICAgICAgICAgY29uc3QgdG9waWMgPSB0aGlzLnBlZXJJZDtcbiAgICAgICAgICAgIGNvbnN0IHBheWxvYWQgPSBKU09OLnN0cmluZ2lmeShlbmNyeXB0aW9uUGF5bG9hZCk7XG4gICAgICAgICAgICBjb25zdCBzaWxlbnQgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5fdHJhbnNwb3J0LnNlbmQocGF5bG9hZCwgdG9waWMsIHNpbGVudCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBfc2VuZFNlc3Npb25SZXF1ZXN0KHJlcXVlc3QsIGVycm9yTXNnLCBvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiB0c2xpYl8xLl9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIHRoaXMuX3NlbmRSZXF1ZXN0KHJlcXVlc3QsIG9wdGlvbnMpO1xuICAgICAgICAgICAgdGhpcy5fc3Vic2NyaWJlVG9TZXNzaW9uUmVzcG9uc2UocmVxdWVzdC5pZCwgZXJyb3JNc2cpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgX3NlbmRDYWxsUmVxdWVzdChyZXF1ZXN0LCBvcHRpb25zKSB7XG4gICAgICAgIHRoaXMuX3NlbmRSZXF1ZXN0KHJlcXVlc3QsIG9wdGlvbnMpO1xuICAgICAgICB0aGlzLl9ldmVudE1hbmFnZXIudHJpZ2dlcih7XG4gICAgICAgICAgICBldmVudDogXCJjYWxsX3JlcXVlc3Rfc2VudFwiLFxuICAgICAgICAgICAgcGFyYW1zOiBbeyByZXF1ZXN0LCBvcHRpb25zIH1dLFxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3N1YnNjcmliZVRvQ2FsbFJlc3BvbnNlKHJlcXVlc3QuaWQpO1xuICAgIH1cbiAgICBfZm9ybWF0UmVxdWVzdChyZXF1ZXN0KSB7XG4gICAgICAgIGlmICh0eXBlb2YgcmVxdWVzdC5tZXRob2QgPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihsZWdhY3lfdHlwZXNfMS5FUlJPUl9NSVNTSU5HX01FVEhPRCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZm9ybWF0dGVkUmVxdWVzdCA9IHtcbiAgICAgICAgICAgIGlkOiB0eXBlb2YgcmVxdWVzdC5pZCA9PT0gXCJ1bmRlZmluZWRcIiA/IGxlZ2FjeV91dGlsc18xLnBheWxvYWRJZCgpIDogcmVxdWVzdC5pZCxcbiAgICAgICAgICAgIGpzb25ycGM6IFwiMi4wXCIsXG4gICAgICAgICAgICBtZXRob2Q6IHJlcXVlc3QubWV0aG9kLFxuICAgICAgICAgICAgcGFyYW1zOiB0eXBlb2YgcmVxdWVzdC5wYXJhbXMgPT09IFwidW5kZWZpbmVkXCIgPyBbXSA6IHJlcXVlc3QucGFyYW1zLFxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gZm9ybWF0dGVkUmVxdWVzdDtcbiAgICB9XG4gICAgX2Zvcm1hdFJlc3BvbnNlKHJlc3BvbnNlKSB7XG4gICAgICAgIGlmICh0eXBlb2YgcmVzcG9uc2UuaWQgPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihsZWdhY3lfdHlwZXNfMS5FUlJPUl9NSVNTSU5HX0lEKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBiYXNlUmVzcG9uc2UgPSB7IGlkOiByZXNwb25zZS5pZCwganNvbnJwYzogXCIyLjBcIiB9O1xuICAgICAgICBpZiAobGVnYWN5X3V0aWxzXzEuaXNKc29uUnBjUmVzcG9uc2VFcnJvcihyZXNwb25zZSkpIHtcbiAgICAgICAgICAgIGNvbnN0IGVycm9yID0gbGVnYWN5X3V0aWxzXzEuZm9ybWF0UnBjRXJyb3IocmVzcG9uc2UuZXJyb3IpO1xuICAgICAgICAgICAgY29uc3QgZXJyb3JSZXNwb25zZSA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBiYXNlUmVzcG9uc2UpLCByZXNwb25zZSksIHsgZXJyb3IgfSk7XG4gICAgICAgICAgICByZXR1cm4gZXJyb3JSZXNwb25zZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChsZWdhY3lfdXRpbHNfMS5pc0pzb25ScGNSZXNwb25zZVN1Y2Nlc3MocmVzcG9uc2UpKSB7XG4gICAgICAgICAgICBjb25zdCBzdWNjZXNzUmVzcG9uc2UgPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIGJhc2VSZXNwb25zZSksIHJlc3BvbnNlKTtcbiAgICAgICAgICAgIHJldHVybiBzdWNjZXNzUmVzcG9uc2U7XG4gICAgICAgIH1cbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGxlZ2FjeV90eXBlc18xLkVSUk9SX0lOVkFMSURfUkVTUE9OU0UpO1xuICAgIH1cbiAgICBfaGFuZGxlU2Vzc2lvbkRpc2Nvbm5lY3QoZXJyb3JNc2cpIHtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IGVycm9yTXNnIHx8IFwiU2Vzc2lvbiBEaXNjb25uZWN0ZWRcIjtcbiAgICAgICAgaWYgKCF0aGlzLl9jb25uZWN0ZWQpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLl9xcmNvZGVNb2RhbCkge1xuICAgICAgICAgICAgICAgIHRoaXMuX3FyY29kZU1vZGFsLmNsb3NlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZWdhY3lfdXRpbHNfMS5yZW1vdmVMb2NhbChsZWdhY3lfdHlwZXNfMS5NT0JJTEVfTElOS19DSE9JQ0VfS0VZKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5fY29ubmVjdGVkKSB7XG4gICAgICAgICAgICB0aGlzLl9jb25uZWN0ZWQgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5faGFuZHNoYWtlSWQpIHtcbiAgICAgICAgICAgIHRoaXMuX2hhbmRzaGFrZUlkID0gMDtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5faGFuZHNoYWtlVG9waWMpIHtcbiAgICAgICAgICAgIHRoaXMuX2hhbmRzaGFrZVRvcGljID0gXCJcIjtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5fcGVlcklkKSB7XG4gICAgICAgICAgICB0aGlzLl9wZWVySWQgPSBcIlwiO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX2V2ZW50TWFuYWdlci50cmlnZ2VyKHtcbiAgICAgICAgICAgIGV2ZW50OiBcImRpc2Nvbm5lY3RcIixcbiAgICAgICAgICAgIHBhcmFtczogW3sgbWVzc2FnZSB9XSxcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuX3JlbW92ZVN0b3JhZ2VTZXNzaW9uKCk7XG4gICAgICAgIHRoaXMudHJhbnNwb3J0Q2xvc2UoKTtcbiAgICB9XG4gICAgX2hhbmRsZVNlc3Npb25SZXNwb25zZShlcnJvck1zZywgc2Vzc2lvblBhcmFtcykge1xuICAgICAgICBpZiAoc2Vzc2lvblBhcmFtcykge1xuICAgICAgICAgICAgaWYgKHNlc3Npb25QYXJhbXMuYXBwcm92ZWQpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuX2Nvbm5lY3RlZCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9jb25uZWN0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBpZiAoc2Vzc2lvblBhcmFtcy5jaGFpbklkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNoYWluSWQgPSBzZXNzaW9uUGFyYW1zLmNoYWluSWQ7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHNlc3Npb25QYXJhbXMuYWNjb3VudHMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYWNjb3VudHMgPSBzZXNzaW9uUGFyYW1zLmFjY291bnRzO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChzZXNzaW9uUGFyYW1zLnBlZXJJZCAmJiAhdGhpcy5wZWVySWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGVlcklkID0gc2Vzc2lvblBhcmFtcy5wZWVySWQ7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHNlc3Npb25QYXJhbXMucGVlck1ldGEgJiYgIXRoaXMucGVlck1ldGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGVlck1ldGEgPSBzZXNzaW9uUGFyYW1zLnBlZXJNZXRhO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2V2ZW50TWFuYWdlci50cmlnZ2VyKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50OiBcImNvbm5lY3RcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcmFtczogW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGVlcklkOiB0aGlzLnBlZXJJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGVlck1ldGE6IHRoaXMucGVlck1ldGEsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoYWluSWQ6IHRoaXMuY2hhaW5JZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWNjb3VudHM6IHRoaXMuYWNjb3VudHMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNlc3Npb25QYXJhbXMuY2hhaW5JZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jaGFpbklkID0gc2Vzc2lvblBhcmFtcy5jaGFpbklkO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChzZXNzaW9uUGFyYW1zLmFjY291bnRzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFjY291bnRzID0gc2Vzc2lvblBhcmFtcy5hY2NvdW50cztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9ldmVudE1hbmFnZXIudHJpZ2dlcih7XG4gICAgICAgICAgICAgICAgICAgICAgICBldmVudDogXCJzZXNzaW9uX3VwZGF0ZVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgcGFyYW1zOiBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGFpbklkOiB0aGlzLmNoYWluSWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnRzOiB0aGlzLmFjY291bnRzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5fbWFuYWdlU3RvcmFnZVNlc3Npb24oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuX2hhbmRsZVNlc3Npb25EaXNjb25uZWN0KGVycm9yTXNnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuX2hhbmRsZVNlc3Npb25EaXNjb25uZWN0KGVycm9yTXNnKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBfaGFuZGxlSW5jb21pbmdNZXNzYWdlcyhzb2NrZXRNZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0c2xpYl8xLl9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGNvbnN0IGFjdGl2ZVRvcGljcyA9IFt0aGlzLmNsaWVudElkLCB0aGlzLmhhbmRzaGFrZVRvcGljXTtcbiAgICAgICAgICAgIGlmICghYWN0aXZlVG9waWNzLmluY2x1ZGVzKHNvY2tldE1lc3NhZ2UudG9waWMpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGV0IGVuY3J5cHRpb25QYXlsb2FkO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBlbmNyeXB0aW9uUGF5bG9hZCA9IEpTT04ucGFyc2Uoc29ja2V0TWVzc2FnZS5wYXlsb2FkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHBheWxvYWQgPSB5aWVsZCB0aGlzLl9kZWNyeXB0KGVuY3J5cHRpb25QYXlsb2FkKTtcbiAgICAgICAgICAgIGlmIChwYXlsb2FkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fZXZlbnRNYW5hZ2VyLnRyaWdnZXIocGF5bG9hZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBfc3Vic2NyaWJlVG9TZXNzaW9uUmVxdWVzdCgpIHtcbiAgICAgICAgdGhpcy5fdHJhbnNwb3J0LnN1YnNjcmliZSh0aGlzLmhhbmRzaGFrZVRvcGljKTtcbiAgICB9XG4gICAgX3N1YnNjcmliZVRvUmVzcG9uc2UoaWQsIGNhbGxiYWNrKSB7XG4gICAgICAgIHRoaXMub24oYHJlc3BvbnNlOiR7aWR9YCwgY2FsbGJhY2spO1xuICAgIH1cbiAgICBfc3Vic2NyaWJlVG9TZXNzaW9uUmVzcG9uc2UoaWQsIGVycm9yTXNnKSB7XG4gICAgICAgIHRoaXMuX3N1YnNjcmliZVRvUmVzcG9uc2UoaWQsIChlcnJvciwgcGF5bG9hZCkgPT4ge1xuICAgICAgICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5faGFuZGxlU2Vzc2lvblJlc3BvbnNlKGVycm9yLm1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChsZWdhY3lfdXRpbHNfMS5pc0pzb25ScGNSZXNwb25zZVN1Y2Nlc3MocGF5bG9hZCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9oYW5kbGVTZXNzaW9uUmVzcG9uc2UoZXJyb3JNc2csIHBheWxvYWQucmVzdWx0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHBheWxvYWQuZXJyb3IgJiYgcGF5bG9hZC5lcnJvci5tZXNzYWdlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5faGFuZGxlU2Vzc2lvblJlc3BvbnNlKHBheWxvYWQuZXJyb3IubWVzc2FnZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9oYW5kbGVTZXNzaW9uUmVzcG9uc2UoZXJyb3JNc2cpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgX3N1YnNjcmliZVRvQ2FsbFJlc3BvbnNlKGlkKSB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICB0aGlzLl9zdWJzY3JpYmVUb1Jlc3BvbnNlKGlkLCAoZXJyb3IsIHBheWxvYWQpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KGVycm9yKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAobGVnYWN5X3V0aWxzXzEuaXNKc29uUnBjUmVzcG9uc2VTdWNjZXNzKHBheWxvYWQpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUocGF5bG9hZC5yZXN1bHQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChwYXlsb2FkLmVycm9yICYmIHBheWxvYWQuZXJyb3IubWVzc2FnZSkge1xuICAgICAgICAgICAgICAgICAgICByZWplY3QocGF5bG9hZC5lcnJvcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByZWplY3QobmV3IEVycm9yKGxlZ2FjeV90eXBlc18xLkVSUk9SX0lOVkFMSURfUkVTUE9OU0UpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIF9zdWJzY3JpYmVUb0ludGVybmFsRXZlbnRzKCkge1xuICAgICAgICB0aGlzLm9uKFwiZGlzcGxheV91cmlcIiwgKCkgPT4ge1xuICAgICAgICAgICAgaWYgKHRoaXMuX3FyY29kZU1vZGFsKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fcXJjb2RlTW9kYWwub3Blbih0aGlzLnVyaSwgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9ldmVudE1hbmFnZXIudHJpZ2dlcih7XG4gICAgICAgICAgICAgICAgICAgICAgICBldmVudDogXCJtb2RhbF9jbG9zZWRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcmFtczogW10sXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0sIHRoaXMuX3FyY29kZU1vZGFsT3B0aW9ucyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLm9uKFwiY29ubmVjdFwiLCAoKSA9PiB7XG4gICAgICAgICAgICBpZiAodGhpcy5fcXJjb2RlTW9kYWwpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9xcmNvZGVNb2RhbC5jbG9zZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5vbihcImNhbGxfcmVxdWVzdF9zZW50XCIsIChlcnJvciwgcGF5bG9hZCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgeyByZXF1ZXN0IH0gPSBwYXlsb2FkLnBhcmFtc1swXTtcbiAgICAgICAgICAgIGlmIChsZWdhY3lfdXRpbHNfMS5pc01vYmlsZSgpICYmIHRoaXMuX3NpZ25pbmdNZXRob2RzLmluY2x1ZGVzKHJlcXVlc3QubWV0aG9kKSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IG1vYmlsZUxpbmtVcmwgPSBsZWdhY3lfdXRpbHNfMS5nZXRMb2NhbChsZWdhY3lfdHlwZXNfMS5NT0JJTEVfTElOS19DSE9JQ0VfS0VZKTtcbiAgICAgICAgICAgICAgICBpZiAobW9iaWxlTGlua1VybCkge1xuICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IG1vYmlsZUxpbmtVcmwuaHJlZjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLm9uKFwid2Nfc2Vzc2lvblJlcXVlc3RcIiwgKGVycm9yLCBwYXlsb2FkKSA9PiB7XG4gICAgICAgICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9ldmVudE1hbmFnZXIudHJpZ2dlcih7XG4gICAgICAgICAgICAgICAgICAgIGV2ZW50OiBcImVycm9yXCIsXG4gICAgICAgICAgICAgICAgICAgIHBhcmFtczogW1xuICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFwiU0VTU0lPTl9SRVFVRVNUX0VSUk9SXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogZXJyb3IudG9TdHJpbmcoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmhhbmRzaGFrZUlkID0gcGF5bG9hZC5pZDtcbiAgICAgICAgICAgIHRoaXMucGVlcklkID0gcGF5bG9hZC5wYXJhbXNbMF0ucGVlcklkO1xuICAgICAgICAgICAgdGhpcy5wZWVyTWV0YSA9IHBheWxvYWQucGFyYW1zWzBdLnBlZXJNZXRhO1xuICAgICAgICAgICAgY29uc3QgaW50ZXJuYWxQYXlsb2FkID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBwYXlsb2FkKSwgeyBtZXRob2Q6IFwic2Vzc2lvbl9yZXF1ZXN0XCIgfSk7XG4gICAgICAgICAgICB0aGlzLl9ldmVudE1hbmFnZXIudHJpZ2dlcihpbnRlcm5hbFBheWxvYWQpO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5vbihcIndjX3Nlc3Npb25VcGRhdGVcIiwgKGVycm9yLCBwYXlsb2FkKSA9PiB7XG4gICAgICAgICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9oYW5kbGVTZXNzaW9uUmVzcG9uc2UoZXJyb3IubWVzc2FnZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLl9oYW5kbGVTZXNzaW9uUmVzcG9uc2UoXCJTZXNzaW9uIGRpc2Nvbm5lY3RlZFwiLCBwYXlsb2FkLnBhcmFtc1swXSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBfaW5pdFRyYW5zcG9ydCgpIHtcbiAgICAgICAgdGhpcy5fdHJhbnNwb3J0Lm9uKFwibWVzc2FnZVwiLCAoc29ja2V0TWVzc2FnZSkgPT4gdGhpcy5faGFuZGxlSW5jb21pbmdNZXNzYWdlcyhzb2NrZXRNZXNzYWdlKSk7XG4gICAgICAgIHRoaXMuX3RyYW5zcG9ydC5vbihcIm9wZW5cIiwgKCkgPT4gdGhpcy5fZXZlbnRNYW5hZ2VyLnRyaWdnZXIoeyBldmVudDogXCJ0cmFuc3BvcnRfb3BlblwiLCBwYXJhbXM6IFtdIH0pKTtcbiAgICAgICAgdGhpcy5fdHJhbnNwb3J0Lm9uKFwiY2xvc2VcIiwgKCkgPT4gdGhpcy5fZXZlbnRNYW5hZ2VyLnRyaWdnZXIoeyBldmVudDogXCJ0cmFuc3BvcnRfY2xvc2VcIiwgcGFyYW1zOiBbXSB9KSk7XG4gICAgICAgIHRoaXMuX3RyYW5zcG9ydC5vbihcImVycm9yXCIsICgpID0+IHRoaXMuX2V2ZW50TWFuYWdlci50cmlnZ2VyKHtcbiAgICAgICAgICAgIGV2ZW50OiBcInRyYW5zcG9ydF9lcnJvclwiLFxuICAgICAgICAgICAgcGFyYW1zOiBbXCJXZWJzb2NrZXQgY29ubmVjdGlvbiBmYWlsZWRcIl0sXG4gICAgICAgIH0pKTtcbiAgICAgICAgdGhpcy5fdHJhbnNwb3J0Lm9wZW4oKTtcbiAgICB9XG4gICAgX2Zvcm1hdFVyaSgpIHtcbiAgICAgICAgY29uc3QgcHJvdG9jb2wgPSB0aGlzLnByb3RvY29sO1xuICAgICAgICBjb25zdCBoYW5kc2hha2VUb3BpYyA9IHRoaXMuaGFuZHNoYWtlVG9waWM7XG4gICAgICAgIGNvbnN0IHZlcnNpb24gPSB0aGlzLnZlcnNpb247XG4gICAgICAgIGNvbnN0IGJyaWRnZSA9IGVuY29kZVVSSUNvbXBvbmVudCh0aGlzLmJyaWRnZSk7XG4gICAgICAgIGNvbnN0IGtleSA9IHRoaXMua2V5O1xuICAgICAgICBjb25zdCB1cmkgPSBgJHtwcm90b2NvbH06JHtoYW5kc2hha2VUb3BpY31AJHt2ZXJzaW9ufT9icmlkZ2U9JHticmlkZ2V9JmtleT0ke2tleX1gO1xuICAgICAgICByZXR1cm4gdXJpO1xuICAgIH1cbiAgICBfcGFyc2VVcmkodXJpKSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGxlZ2FjeV91dGlsc18xLnBhcnNlV2FsbGV0Q29ubmVjdFVyaSh1cmkpO1xuICAgICAgICBpZiAocmVzdWx0LnByb3RvY29sID09PSB0aGlzLnByb3RvY29sKSB7XG4gICAgICAgICAgICBpZiAoIXJlc3VsdC5oYW5kc2hha2VUb3BpYykge1xuICAgICAgICAgICAgICAgIHRocm93IEVycm9yKFwiSW52YWxpZCBvciBtaXNzaW5nIGhhbmRzaGFrZVRvcGljIHBhcmFtZXRlciB2YWx1ZVwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGhhbmRzaGFrZVRvcGljID0gcmVzdWx0LmhhbmRzaGFrZVRvcGljO1xuICAgICAgICAgICAgaWYgKCFyZXN1bHQuYnJpZGdlKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgRXJyb3IoXCJJbnZhbGlkIG9yIG1pc3NpbmcgYnJpZGdlIHVybCBwYXJhbWV0ZXIgdmFsdWVcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBicmlkZ2UgPSBkZWNvZGVVUklDb21wb25lbnQocmVzdWx0LmJyaWRnZSk7XG4gICAgICAgICAgICBpZiAoIXJlc3VsdC5rZXkpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBFcnJvcihcIkludmFsaWQgb3IgbWlzc2luZyBrZXkgcGFyYW1ldGVyIHZhbHVlXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3Qga2V5ID0gcmVzdWx0LmtleTtcbiAgICAgICAgICAgIHJldHVybiB7IGhhbmRzaGFrZVRvcGljLCBicmlkZ2UsIGtleSB9O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGxlZ2FjeV90eXBlc18xLkVSUk9SX0lOVkFMSURfVVJJKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBfZ2VuZXJhdGVLZXkoKSB7XG4gICAgICAgIHJldHVybiB0c2xpYl8xLl9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLl9jcnlwdG9MaWIpIHtcbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSB5aWVsZCB0aGlzLl9jcnlwdG9MaWIuZ2VuZXJhdGVLZXkoKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBfZW5jcnlwdChkYXRhKSB7XG4gICAgICAgIHJldHVybiB0c2xpYl8xLl9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGNvbnN0IGtleSA9IHRoaXMuX2tleTtcbiAgICAgICAgICAgIGlmICh0aGlzLl9jcnlwdG9MaWIgJiYga2V5KSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0geWllbGQgdGhpcy5fY3J5cHRvTGliLmVuY3J5cHQoZGF0YSwga2V5KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBfZGVjcnlwdChwYXlsb2FkKSB7XG4gICAgICAgIHJldHVybiB0c2xpYl8xLl9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGNvbnN0IGtleSA9IHRoaXMuX2tleTtcbiAgICAgICAgICAgIGlmICh0aGlzLl9jcnlwdG9MaWIgJiYga2V5KSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0geWllbGQgdGhpcy5fY3J5cHRvTGliLmRlY3J5cHQocGF5bG9hZCwga2V5KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBfZ2V0U3RvcmFnZVNlc3Npb24oKSB7XG4gICAgICAgIGxldCByZXN1bHQgPSBudWxsO1xuICAgICAgICBpZiAodGhpcy5fc2Vzc2lvblN0b3JhZ2UpIHtcbiAgICAgICAgICAgIHJlc3VsdCA9IHRoaXMuX3Nlc3Npb25TdG9yYWdlLmdldFNlc3Npb24oKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICBfc2V0U3RvcmFnZVNlc3Npb24oKSB7XG4gICAgICAgIGlmICh0aGlzLl9zZXNzaW9uU3RvcmFnZSkge1xuICAgICAgICAgICAgdGhpcy5fc2Vzc2lvblN0b3JhZ2Uuc2V0U2Vzc2lvbih0aGlzLnNlc3Npb24pO1xuICAgICAgICB9XG4gICAgfVxuICAgIF9yZW1vdmVTdG9yYWdlU2Vzc2lvbigpIHtcbiAgICAgICAgaWYgKHRoaXMuX3Nlc3Npb25TdG9yYWdlKSB7XG4gICAgICAgICAgICB0aGlzLl9zZXNzaW9uU3RvcmFnZS5yZW1vdmVTZXNzaW9uKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgX21hbmFnZVN0b3JhZ2VTZXNzaW9uKCkge1xuICAgICAgICBpZiAodGhpcy5fY29ubmVjdGVkKSB7XG4gICAgICAgICAgICB0aGlzLl9zZXRTdG9yYWdlU2Vzc2lvbigpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5fcmVtb3ZlU3RvcmFnZVNlc3Npb24oKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBfcmVnaXN0ZXJQdXNoU2VydmVyKHB1c2hTZXJ2ZXJPcHRzKSB7XG4gICAgICAgIGlmICghcHVzaFNlcnZlck9wdHMudXJsIHx8IHR5cGVvZiBwdXNoU2VydmVyT3B0cy51cmwgIT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgIHRocm93IEVycm9yKFwiSW52YWxpZCBvciBtaXNzaW5nIHB1c2hTZXJ2ZXJPcHRzLnVybCBwYXJhbWV0ZXIgdmFsdWVcIik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFwdXNoU2VydmVyT3B0cy50eXBlIHx8IHR5cGVvZiBwdXNoU2VydmVyT3B0cy50eXBlICE9PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICB0aHJvdyBFcnJvcihcIkludmFsaWQgb3IgbWlzc2luZyBwdXNoU2VydmVyT3B0cy50eXBlIHBhcmFtZXRlciB2YWx1ZVwiKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXB1c2hTZXJ2ZXJPcHRzLnRva2VuIHx8IHR5cGVvZiBwdXNoU2VydmVyT3B0cy50b2tlbiAhPT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgdGhyb3cgRXJyb3IoXCJJbnZhbGlkIG9yIG1pc3NpbmcgcHVzaFNlcnZlck9wdHMudG9rZW4gcGFyYW1ldGVyIHZhbHVlXCIpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHB1c2hTdWJzY3JpcHRpb24gPSB7XG4gICAgICAgICAgICBicmlkZ2U6IHRoaXMuYnJpZGdlLFxuICAgICAgICAgICAgdG9waWM6IHRoaXMuY2xpZW50SWQsXG4gICAgICAgICAgICB0eXBlOiBwdXNoU2VydmVyT3B0cy50eXBlLFxuICAgICAgICAgICAgdG9rZW46IHB1c2hTZXJ2ZXJPcHRzLnRva2VuLFxuICAgICAgICAgICAgcGVlck5hbWU6IFwiXCIsXG4gICAgICAgICAgICBsYW5ndWFnZTogcHVzaFNlcnZlck9wdHMubGFuZ3VhZ2UgfHwgXCJcIixcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5vbihcImNvbm5lY3RcIiwgKGVycm9yLCBwYXlsb2FkKSA9PiB0c2xpYl8xLl9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGlmIChlcnJvcikge1xuICAgICAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHB1c2hTZXJ2ZXJPcHRzLnBlZXJNZXRhKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcGVlck5hbWUgPSBwYXlsb2FkLnBhcmFtc1swXS5wZWVyTWV0YS5uYW1lO1xuICAgICAgICAgICAgICAgIHB1c2hTdWJzY3JpcHRpb24ucGVlck5hbWUgPSBwZWVyTmFtZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB5aWVsZCBmZXRjaChgJHtwdXNoU2VydmVyT3B0cy51cmx9L25ld2AsIHtcbiAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgICAgICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgQWNjZXB0OiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShwdXNoU3Vic2NyaXB0aW9uKSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBjb25zdCBqc29uID0geWllbGQgcmVzcG9uc2UuanNvbigpO1xuICAgICAgICAgICAgICAgIGlmICghanNvbi5zdWNjZXNzKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IEVycm9yKFwiRmFpbGVkIHRvIHJlZ2lzdGVyIGluIFB1c2ggU2VydmVyXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIHRocm93IEVycm9yKFwiRmFpbGVkIHRvIHJlZ2lzdGVyIGluIFB1c2ggU2VydmVyXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KSk7XG4gICAgfVxufVxuZXhwb3J0cy5kZWZhdWx0ID0gQ29ubmVjdG9yO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y29yZS5qcy5tYXAiXSwibmFtZXMiOlsiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiLCJ0c2xpYl8xIiwicmVxdWlyZSIsImxlZ2FjeV90eXBlc18xIiwibGVnYWN5X3V0aWxzXzEiLCJzb2NrZXRfMSIsIl9faW1wb3J0RGVmYXVsdCIsImV2ZW50c18xIiwic3RvcmFnZV8xIiwidXJsXzEiLCJDb25uZWN0b3IiLCJjb25zdHJ1Y3RvciIsIm9wdHMiLCJwcm90b2NvbCIsInZlcnNpb24iLCJfYnJpZGdlIiwiX2tleSIsIl9jbGllbnRJZCIsIl9jbGllbnRNZXRhIiwiX3BlZXJJZCIsIl9wZWVyTWV0YSIsIl9oYW5kc2hha2VJZCIsIl9oYW5kc2hha2VUb3BpYyIsIl9jb25uZWN0ZWQiLCJfYWNjb3VudHMiLCJfY2hhaW5JZCIsIl9uZXR3b3JrSWQiLCJfcnBjVXJsIiwiX2V2ZW50TWFuYWdlciIsImRlZmF1bHQiLCJnZXRDbGllbnRNZXRhIiwiY29ubmVjdG9yT3B0cyIsImNsaWVudE1ldGEiLCJfY3J5cHRvTGliIiwiY3J5cHRvTGliIiwiX3Nlc3Npb25TdG9yYWdlIiwic2Vzc2lvblN0b3JhZ2UiLCJzdG9yYWdlSWQiLCJfcXJjb2RlTW9kYWwiLCJxcmNvZGVNb2RhbCIsIl9xcmNvZGVNb2RhbE9wdGlvbnMiLCJxcmNvZGVNb2RhbE9wdGlvbnMiLCJfc2lnbmluZ01ldGhvZHMiLCJTSUdOSU5HX01FVEhPRFMiLCJzaWduaW5nTWV0aG9kcyIsImJyaWRnZSIsInVyaSIsInNlc3Npb24iLCJFcnJvciIsIkVSUk9SX01JU1NJTkdfUkVRVUlSRUQiLCJnZXRCcmlkZ2VVcmwiLCJfZ2V0U3RvcmFnZVNlc3Npb24iLCJoYW5kc2hha2VJZCIsIl9zdWJzY3JpYmVUb1Nlc3Npb25SZXNwb25zZSIsIl90cmFuc3BvcnQiLCJ0cmFuc3BvcnQiLCJ1cmwiLCJzdWJzY3JpcHRpb25zIiwiY2xpZW50SWQiLCJfc3Vic2NyaWJlVG9JbnRlcm5hbEV2ZW50cyIsIl9pbml0VHJhbnNwb3J0IiwiX3N1YnNjcmliZVRvU2Vzc2lvblJlcXVlc3QiLCJwdXNoU2VydmVyT3B0cyIsIl9yZWdpc3RlclB1c2hTZXJ2ZXIiLCJrZXkiLCJjb252ZXJ0SGV4VG9BcnJheUJ1ZmZlciIsImNvbnZlcnRBcnJheUJ1ZmZlclRvSGV4IiwidXVpZCIsInBlZXJJZCIsInBlZXJNZXRhIiwiaGFuZHNoYWtlVG9waWMiLCJfdXJpIiwiX2Zvcm1hdFVyaSIsIl9wYXJzZVVyaSIsImNoYWluSWQiLCJuZXR3b3JrSWQiLCJhY2NvdW50cyIsInJwY1VybCIsImNvbm5lY3RlZCIsInBlbmRpbmciLCJvbiIsImV2ZW50IiwiY2FsbGJhY2siLCJldmVudEVtaXR0ZXIiLCJzdWJzY3JpYmUiLCJvZmYiLCJ1bnN1YnNjcmliZSIsImNyZWF0ZUluc3RhbnRSZXF1ZXN0IiwiaW5zdGFudFJlcXVlc3QiLCJfX2F3YWl0ZXIiLCJfZ2VuZXJhdGVLZXkiLCJyZXF1ZXN0IiwiX2Zvcm1hdFJlcXVlc3QiLCJtZXRob2QiLCJwYXJhbXMiLCJpZCIsInRyaWdnZXIiLCJFUlJPUl9RUkNPREVfTU9EQUxfVVNFUl9DTE9TRUQiLCJlbmRJbnN0YW50UmVxdWVzdCIsImtpbGxTZXNzaW9uIiwicmVzdWx0IiwiX3NlbmRDYWxsUmVxdWVzdCIsImVycm9yIiwiY29ubmVjdCIsIkVSUk9SX1FSQ09ERV9NT0RBTF9OT1RfUFJPVklERUQiLCJjcmVhdGVTZXNzaW9uIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJwYXlsb2FkIiwiRVJST1JfU0VTU0lPTl9DT05ORUNURUQiLCJfc2VuZFNlc3Npb25SZXF1ZXN0IiwidG9waWMiLCJhcHByb3ZlU2Vzc2lvbiIsInNlc3Npb25TdGF0dXMiLCJzZXNzaW9uUGFyYW1zIiwiYXBwcm92ZWQiLCJyZXNwb25zZSIsImpzb25ycGMiLCJfc2VuZFJlc3BvbnNlIiwiX3NldFN0b3JhZ2VTZXNzaW9uIiwicmVqZWN0U2Vzc2lvbiIsInNlc3Npb25FcnJvciIsIm1lc3NhZ2UiLCJFUlJPUl9TRVNTSU9OX1JFSkVDVEVEIiwiX2Zvcm1hdFJlc3BvbnNlIiwiX3JlbW92ZVN0b3JhZ2VTZXNzaW9uIiwidXBkYXRlU2Vzc2lvbiIsIkVSUk9SX1NFU1NJT05fRElTQ09OTkVDVEVEIiwiX21hbmFnZVN0b3JhZ2VTZXNzaW9uIiwiX3NlbmRSZXF1ZXN0IiwiX2hhbmRsZVNlc3Npb25EaXNjb25uZWN0Iiwic2VuZFRyYW5zYWN0aW9uIiwidHgiLCJwYXJzZWRUeCIsInNpZ25UcmFuc2FjdGlvbiIsInNpZ25NZXNzYWdlIiwic2lnblBlcnNvbmFsTWVzc2FnZSIsInNpZ25UeXBlZERhdGEiLCJ1cGRhdGVDaGFpbiIsImNoYWluUGFyYW1zIiwidW5zYWZlU2VuZCIsIm9wdGlvbnMiLCJfc3Vic2NyaWJlVG9SZXNwb25zZSIsIkVSUk9SX01JU1NJTkdfSlNPTl9SUEMiLCJzZW5kQ3VzdG9tUmVxdWVzdCIsImNvbnZlcnROdW1iZXJUb0hleCIsImZvcm1hdHRlZFJlcXVlc3QiLCJhcHByb3ZlUmVxdWVzdCIsImlzSnNvblJwY1Jlc3BvbnNlU3VjY2VzcyIsImZvcm1hdHRlZFJlc3BvbnNlIiwiRVJST1JfTUlTU0lOR19SRVNVTFQiLCJyZWplY3RSZXF1ZXN0IiwiaXNKc29uUnBjUmVzcG9uc2VFcnJvciIsIkVSUk9SX01JU1NJTkdfRVJST1IiLCJ0cmFuc3BvcnRDbG9zZSIsImNsb3NlIiwiY2FsbFJlcXVlc3QiLCJlbmNyeXB0aW9uUGF5bG9hZCIsIl9lbmNyeXB0IiwiSlNPTiIsInN0cmluZ2lmeSIsInNpbGVudCIsImZvcmNlUHVzaE5vdGlmaWNhdGlvbiIsImlzU2lsZW50UGF5bG9hZCIsInNlbmQiLCJlcnJvck1zZyIsIl9zdWJzY3JpYmVUb0NhbGxSZXNwb25zZSIsIkVSUk9SX01JU1NJTkdfTUVUSE9EIiwicGF5bG9hZElkIiwiRVJST1JfTUlTU0lOR19JRCIsImJhc2VSZXNwb25zZSIsImZvcm1hdFJwY0Vycm9yIiwiZXJyb3JSZXNwb25zZSIsImFzc2lnbiIsInN1Y2Nlc3NSZXNwb25zZSIsIkVSUk9SX0lOVkFMSURfUkVTUE9OU0UiLCJyZW1vdmVMb2NhbCIsIk1PQklMRV9MSU5LX0NIT0lDRV9LRVkiLCJfaGFuZGxlU2Vzc2lvblJlc3BvbnNlIiwiX2hhbmRsZUluY29taW5nTWVzc2FnZXMiLCJzb2NrZXRNZXNzYWdlIiwiYWN0aXZlVG9waWNzIiwiaW5jbHVkZXMiLCJwYXJzZSIsIl9kZWNyeXB0Iiwib3BlbiIsImlzTW9iaWxlIiwibW9iaWxlTGlua1VybCIsImdldExvY2FsIiwid2luZG93IiwibG9jYXRpb24iLCJocmVmIiwiY29kZSIsInRvU3RyaW5nIiwiaW50ZXJuYWxQYXlsb2FkIiwiZW5jb2RlVVJJQ29tcG9uZW50IiwicGFyc2VXYWxsZXRDb25uZWN0VXJpIiwiZGVjb2RlVVJJQ29tcG9uZW50IiwiRVJST1JfSU5WQUxJRF9VUkkiLCJnZW5lcmF0ZUtleSIsImRhdGEiLCJlbmNyeXB0IiwiZGVjcnlwdCIsImdldFNlc3Npb24iLCJzZXRTZXNzaW9uIiwicmVtb3ZlU2Vzc2lvbiIsInR5cGUiLCJ0b2tlbiIsInB1c2hTdWJzY3JpcHRpb24iLCJwZWVyTmFtZSIsImxhbmd1YWdlIiwibmFtZSIsImZldGNoIiwiaGVhZGVycyIsIkFjY2VwdCIsImJvZHkiLCJqc29uIiwic3VjY2VzcyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/@walletconnect+legacy-client@2.0.0/node_modules/@walletconnect/legacy-client/dist/cjs/core.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/@walletconnect+legacy-client@2.0.0/node_modules/@walletconnect/legacy-client/dist/cjs/crypto.js":
/*!****************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@walletconnect+legacy-client@2.0.0/node_modules/@walletconnect/legacy-client/dist/cjs/crypto.js ***!
  \****************************************************************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.decrypt = exports.encrypt = exports.verifyHmac = exports.generateKey = void 0;\nconst tslib_1 = __webpack_require__(/*! tslib */ \"(ssr)/./node_modules/.pnpm/tslib@2.6.2/node_modules/tslib/tslib.es6.mjs\");\nconst crypto = tslib_1.__importStar(__webpack_require__(/*! @walletconnect/crypto */ \"(ssr)/./node_modules/.pnpm/@walletconnect+crypto@1.0.3/node_modules/@walletconnect/crypto/dist/cjs/node/index.js\"));\nconst encoding = tslib_1.__importStar(__webpack_require__(/*! @walletconnect/encoding */ \"(ssr)/./node_modules/.pnpm/@walletconnect+encoding@1.0.2/node_modules/@walletconnect/encoding/dist/esm/index.js\"));\nconst legacy_utils_1 = __webpack_require__(/*! @walletconnect/legacy-utils */ \"(ssr)/./node_modules/.pnpm/@walletconnect+legacy-utils@2.0.0/node_modules/@walletconnect/legacy-utils/dist/cjs/index.js\");\nfunction generateKey(length) {\n    return tslib_1.__awaiter(this, void 0, void 0, function*() {\n        const _length = (length || 256) / 8;\n        const bytes = crypto.randomBytes(_length);\n        const result = legacy_utils_1.convertBufferToArrayBuffer(encoding.arrayToBuffer(bytes));\n        return result;\n    });\n}\nexports.generateKey = generateKey;\nfunction verifyHmac(payload, key) {\n    return tslib_1.__awaiter(this, void 0, void 0, function*() {\n        const cipherText = encoding.hexToArray(payload.data);\n        const iv = encoding.hexToArray(payload.iv);\n        const hmac = encoding.hexToArray(payload.hmac);\n        const hmacHex = encoding.arrayToHex(hmac, false);\n        const unsigned = encoding.concatArrays(cipherText, iv);\n        const chmac = yield crypto.hmacSha256Sign(key, unsigned);\n        const chmacHex = encoding.arrayToHex(chmac, false);\n        if (encoding.removeHexPrefix(hmacHex) === encoding.removeHexPrefix(chmacHex)) {\n            return true;\n        }\n        return false;\n    });\n}\nexports.verifyHmac = verifyHmac;\nfunction encrypt(data, key, providedIv) {\n    return tslib_1.__awaiter(this, void 0, void 0, function*() {\n        const _key = encoding.bufferToArray(legacy_utils_1.convertArrayBufferToBuffer(key));\n        const ivArrayBuffer = providedIv || (yield generateKey(128));\n        const iv = encoding.bufferToArray(legacy_utils_1.convertArrayBufferToBuffer(ivArrayBuffer));\n        const ivHex = encoding.arrayToHex(iv, false);\n        const contentString = JSON.stringify(data);\n        const content = encoding.utf8ToArray(contentString);\n        const cipherText = yield crypto.aesCbcEncrypt(iv, _key, content);\n        const cipherTextHex = encoding.arrayToHex(cipherText, false);\n        const unsigned = encoding.concatArrays(cipherText, iv);\n        const hmac = yield crypto.hmacSha256Sign(_key, unsigned);\n        const hmacHex = encoding.arrayToHex(hmac, false);\n        return {\n            data: cipherTextHex,\n            hmac: hmacHex,\n            iv: ivHex\n        };\n    });\n}\nexports.encrypt = encrypt;\nfunction decrypt(payload, key) {\n    return tslib_1.__awaiter(this, void 0, void 0, function*() {\n        const _key = encoding.bufferToArray(legacy_utils_1.convertArrayBufferToBuffer(key));\n        if (!_key) {\n            throw new Error(\"Missing key: required for decryption\");\n        }\n        const verified = yield verifyHmac(payload, _key);\n        if (!verified) {\n            return null;\n        }\n        const cipherText = encoding.hexToArray(payload.data);\n        const iv = encoding.hexToArray(payload.iv);\n        const buffer = yield crypto.aesCbcDecrypt(iv, _key, cipherText);\n        const utf8 = encoding.arrayToUtf8(buffer);\n        let data;\n        try {\n            data = JSON.parse(utf8);\n        } catch (error) {\n            return null;\n        }\n        return data;\n    });\n}\nexports.decrypt = decrypt; //# sourceMappingURL=crypto.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vQHdhbGxldGNvbm5lY3QrbGVnYWN5LWNsaWVudEAyLjAuMC9ub2RlX21vZHVsZXMvQHdhbGxldGNvbm5lY3QvbGVnYWN5LWNsaWVudC9kaXN0L2Nqcy9jcnlwdG8uanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYkEsOENBQTZDO0lBQUVHLE9BQU87QUFBSyxDQUFDLEVBQUM7QUFDN0RELGVBQWUsR0FBR0EsZUFBZSxHQUFHQSxrQkFBa0IsR0FBR0EsbUJBQW1CLEdBQUcsS0FBSztBQUNwRixNQUFNTSxVQUFVQyxtQkFBT0EsQ0FBQyxzRkFBTztBQUMvQixNQUFNQyxTQUFTRixRQUFRRyxZQUFZLENBQUNGLG1CQUFPQSxDQUFDLCtJQUF1QjtBQUNuRSxNQUFNRyxXQUFXSixRQUFRRyxZQUFZLENBQUNGLG1CQUFPQSxDQUFDLGdKQUF5QjtBQUN2RSxNQUFNSSxpQkFBaUJKLG1CQUFPQSxDQUFDLDRKQUE2QjtBQUM1RCxTQUFTRixZQUFZTyxNQUFNO0lBQ3ZCLE9BQU9OLFFBQVFPLFNBQVMsQ0FBQyxJQUFJLEVBQUUsS0FBSyxHQUFHLEtBQUssR0FBRztRQUMzQyxNQUFNQyxVQUFVLENBQUNGLFVBQVUsR0FBRSxJQUFLO1FBQ2xDLE1BQU1HLFFBQVFQLE9BQU9RLFdBQVcsQ0FBQ0Y7UUFDakMsTUFBTUcsU0FBU04sZUFBZU8sMEJBQTBCLENBQUNSLFNBQVNTLGFBQWEsQ0FBQ0o7UUFDaEYsT0FBT0U7SUFDWDtBQUNKO0FBQ0FqQixtQkFBbUIsR0FBR0s7QUFDdEIsU0FBU0QsV0FBV2dCLE9BQU8sRUFBRUMsR0FBRztJQUM1QixPQUFPZixRQUFRTyxTQUFTLENBQUMsSUFBSSxFQUFFLEtBQUssR0FBRyxLQUFLLEdBQUc7UUFDM0MsTUFBTVMsYUFBYVosU0FBU2EsVUFBVSxDQUFDSCxRQUFRSSxJQUFJO1FBQ25ELE1BQU1DLEtBQUtmLFNBQVNhLFVBQVUsQ0FBQ0gsUUFBUUssRUFBRTtRQUN6QyxNQUFNQyxPQUFPaEIsU0FBU2EsVUFBVSxDQUFDSCxRQUFRTSxJQUFJO1FBQzdDLE1BQU1DLFVBQVVqQixTQUFTa0IsVUFBVSxDQUFDRixNQUFNO1FBQzFDLE1BQU1HLFdBQVduQixTQUFTb0IsWUFBWSxDQUFDUixZQUFZRztRQUNuRCxNQUFNTSxRQUFRLE1BQU12QixPQUFPd0IsY0FBYyxDQUFDWCxLQUFLUTtRQUMvQyxNQUFNSSxXQUFXdkIsU0FBU2tCLFVBQVUsQ0FBQ0csT0FBTztRQUM1QyxJQUFJckIsU0FBU3dCLGVBQWUsQ0FBQ1AsYUFBYWpCLFNBQVN3QixlQUFlLENBQUNELFdBQVc7WUFDMUUsT0FBTztRQUNYO1FBQ0EsT0FBTztJQUNYO0FBQ0o7QUFDQWpDLGtCQUFrQixHQUFHSTtBQUNyQixTQUFTRCxRQUFRcUIsSUFBSSxFQUFFSCxHQUFHLEVBQUVjLFVBQVU7SUFDbEMsT0FBTzdCLFFBQVFPLFNBQVMsQ0FBQyxJQUFJLEVBQUUsS0FBSyxHQUFHLEtBQUssR0FBRztRQUMzQyxNQUFNdUIsT0FBTzFCLFNBQVMyQixhQUFhLENBQUMxQixlQUFlMkIsMEJBQTBCLENBQUNqQjtRQUM5RSxNQUFNa0IsZ0JBQWdCSixjQUFlLE9BQU05QixZQUFZLElBQUc7UUFDMUQsTUFBTW9CLEtBQUtmLFNBQVMyQixhQUFhLENBQUMxQixlQUFlMkIsMEJBQTBCLENBQUNDO1FBQzVFLE1BQU1DLFFBQVE5QixTQUFTa0IsVUFBVSxDQUFDSCxJQUFJO1FBQ3RDLE1BQU1nQixnQkFBZ0JDLEtBQUtDLFNBQVMsQ0FBQ25CO1FBQ3JDLE1BQU1vQixVQUFVbEMsU0FBU21DLFdBQVcsQ0FBQ0o7UUFDckMsTUFBTW5CLGFBQWEsTUFBTWQsT0FBT3NDLGFBQWEsQ0FBQ3JCLElBQUlXLE1BQU1RO1FBQ3hELE1BQU1HLGdCQUFnQnJDLFNBQVNrQixVQUFVLENBQUNOLFlBQVk7UUFDdEQsTUFBTU8sV0FBV25CLFNBQVNvQixZQUFZLENBQUNSLFlBQVlHO1FBQ25ELE1BQU1DLE9BQU8sTUFBTWxCLE9BQU93QixjQUFjLENBQUNJLE1BQU1QO1FBQy9DLE1BQU1GLFVBQVVqQixTQUFTa0IsVUFBVSxDQUFDRixNQUFNO1FBQzFDLE9BQU87WUFDSEYsTUFBTXVCO1lBQ05yQixNQUFNQztZQUNORixJQUFJZTtRQUNSO0lBQ0o7QUFDSjtBQUNBeEMsZUFBZSxHQUFHRztBQUNsQixTQUFTRCxRQUFRa0IsT0FBTyxFQUFFQyxHQUFHO0lBQ3pCLE9BQU9mLFFBQVFPLFNBQVMsQ0FBQyxJQUFJLEVBQUUsS0FBSyxHQUFHLEtBQUssR0FBRztRQUMzQyxNQUFNdUIsT0FBTzFCLFNBQVMyQixhQUFhLENBQUMxQixlQUFlMkIsMEJBQTBCLENBQUNqQjtRQUM5RSxJQUFJLENBQUNlLE1BQU07WUFDUCxNQUFNLElBQUlZLE1BQU07UUFDcEI7UUFDQSxNQUFNQyxXQUFXLE1BQU03QyxXQUFXZ0IsU0FBU2dCO1FBQzNDLElBQUksQ0FBQ2EsVUFBVTtZQUNYLE9BQU87UUFDWDtRQUNBLE1BQU0zQixhQUFhWixTQUFTYSxVQUFVLENBQUNILFFBQVFJLElBQUk7UUFDbkQsTUFBTUMsS0FBS2YsU0FBU2EsVUFBVSxDQUFDSCxRQUFRSyxFQUFFO1FBQ3pDLE1BQU15QixTQUFTLE1BQU0xQyxPQUFPMkMsYUFBYSxDQUFDMUIsSUFBSVcsTUFBTWQ7UUFDcEQsTUFBTThCLE9BQU8xQyxTQUFTMkMsV0FBVyxDQUFDSDtRQUNsQyxJQUFJMUI7UUFDSixJQUFJO1lBQ0FBLE9BQU9rQixLQUFLWSxLQUFLLENBQUNGO1FBQ3RCLEVBQ0EsT0FBT0csT0FBTztZQUNWLE9BQU87UUFDWDtRQUNBLE9BQU8vQjtJQUNYO0FBQ0o7QUFDQXhCLGVBQWUsR0FBR0UsU0FDbEIsa0NBQWtDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc21hcnQtYXVkaXQvLi9ub2RlX21vZHVsZXMvLnBucG0vQHdhbGxldGNvbm5lY3QrbGVnYWN5LWNsaWVudEAyLjAuMC9ub2RlX21vZHVsZXMvQHdhbGxldGNvbm5lY3QvbGVnYWN5LWNsaWVudC9kaXN0L2Nqcy9jcnlwdG8uanM/ODZjOCJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuZGVjcnlwdCA9IGV4cG9ydHMuZW5jcnlwdCA9IGV4cG9ydHMudmVyaWZ5SG1hYyA9IGV4cG9ydHMuZ2VuZXJhdGVLZXkgPSB2b2lkIDA7XG5jb25zdCB0c2xpYl8xID0gcmVxdWlyZShcInRzbGliXCIpO1xuY29uc3QgY3J5cHRvID0gdHNsaWJfMS5fX2ltcG9ydFN0YXIocmVxdWlyZShcIkB3YWxsZXRjb25uZWN0L2NyeXB0b1wiKSk7XG5jb25zdCBlbmNvZGluZyA9IHRzbGliXzEuX19pbXBvcnRTdGFyKHJlcXVpcmUoXCJAd2FsbGV0Y29ubmVjdC9lbmNvZGluZ1wiKSk7XG5jb25zdCBsZWdhY3lfdXRpbHNfMSA9IHJlcXVpcmUoXCJAd2FsbGV0Y29ubmVjdC9sZWdhY3ktdXRpbHNcIik7XG5mdW5jdGlvbiBnZW5lcmF0ZUtleShsZW5ndGgpIHtcbiAgICByZXR1cm4gdHNsaWJfMS5fX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgIGNvbnN0IF9sZW5ndGggPSAobGVuZ3RoIHx8IDI1NikgLyA4O1xuICAgICAgICBjb25zdCBieXRlcyA9IGNyeXB0by5yYW5kb21CeXRlcyhfbGVuZ3RoKTtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gbGVnYWN5X3V0aWxzXzEuY29udmVydEJ1ZmZlclRvQXJyYXlCdWZmZXIoZW5jb2RpbmcuYXJyYXlUb0J1ZmZlcihieXRlcykpO1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH0pO1xufVxuZXhwb3J0cy5nZW5lcmF0ZUtleSA9IGdlbmVyYXRlS2V5O1xuZnVuY3Rpb24gdmVyaWZ5SG1hYyhwYXlsb2FkLCBrZXkpIHtcbiAgICByZXR1cm4gdHNsaWJfMS5fX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgIGNvbnN0IGNpcGhlclRleHQgPSBlbmNvZGluZy5oZXhUb0FycmF5KHBheWxvYWQuZGF0YSk7XG4gICAgICAgIGNvbnN0IGl2ID0gZW5jb2RpbmcuaGV4VG9BcnJheShwYXlsb2FkLml2KTtcbiAgICAgICAgY29uc3QgaG1hYyA9IGVuY29kaW5nLmhleFRvQXJyYXkocGF5bG9hZC5obWFjKTtcbiAgICAgICAgY29uc3QgaG1hY0hleCA9IGVuY29kaW5nLmFycmF5VG9IZXgoaG1hYywgZmFsc2UpO1xuICAgICAgICBjb25zdCB1bnNpZ25lZCA9IGVuY29kaW5nLmNvbmNhdEFycmF5cyhjaXBoZXJUZXh0LCBpdik7XG4gICAgICAgIGNvbnN0IGNobWFjID0geWllbGQgY3J5cHRvLmhtYWNTaGEyNTZTaWduKGtleSwgdW5zaWduZWQpO1xuICAgICAgICBjb25zdCBjaG1hY0hleCA9IGVuY29kaW5nLmFycmF5VG9IZXgoY2htYWMsIGZhbHNlKTtcbiAgICAgICAgaWYgKGVuY29kaW5nLnJlbW92ZUhleFByZWZpeChobWFjSGV4KSA9PT0gZW5jb2RpbmcucmVtb3ZlSGV4UHJlZml4KGNobWFjSGV4KSkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0pO1xufVxuZXhwb3J0cy52ZXJpZnlIbWFjID0gdmVyaWZ5SG1hYztcbmZ1bmN0aW9uIGVuY3J5cHQoZGF0YSwga2V5LCBwcm92aWRlZEl2KSB7XG4gICAgcmV0dXJuIHRzbGliXzEuX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICBjb25zdCBfa2V5ID0gZW5jb2RpbmcuYnVmZmVyVG9BcnJheShsZWdhY3lfdXRpbHNfMS5jb252ZXJ0QXJyYXlCdWZmZXJUb0J1ZmZlcihrZXkpKTtcbiAgICAgICAgY29uc3QgaXZBcnJheUJ1ZmZlciA9IHByb3ZpZGVkSXYgfHwgKHlpZWxkIGdlbmVyYXRlS2V5KDEyOCkpO1xuICAgICAgICBjb25zdCBpdiA9IGVuY29kaW5nLmJ1ZmZlclRvQXJyYXkobGVnYWN5X3V0aWxzXzEuY29udmVydEFycmF5QnVmZmVyVG9CdWZmZXIoaXZBcnJheUJ1ZmZlcikpO1xuICAgICAgICBjb25zdCBpdkhleCA9IGVuY29kaW5nLmFycmF5VG9IZXgoaXYsIGZhbHNlKTtcbiAgICAgICAgY29uc3QgY29udGVudFN0cmluZyA9IEpTT04uc3RyaW5naWZ5KGRhdGEpO1xuICAgICAgICBjb25zdCBjb250ZW50ID0gZW5jb2RpbmcudXRmOFRvQXJyYXkoY29udGVudFN0cmluZyk7XG4gICAgICAgIGNvbnN0IGNpcGhlclRleHQgPSB5aWVsZCBjcnlwdG8uYWVzQ2JjRW5jcnlwdChpdiwgX2tleSwgY29udGVudCk7XG4gICAgICAgIGNvbnN0IGNpcGhlclRleHRIZXggPSBlbmNvZGluZy5hcnJheVRvSGV4KGNpcGhlclRleHQsIGZhbHNlKTtcbiAgICAgICAgY29uc3QgdW5zaWduZWQgPSBlbmNvZGluZy5jb25jYXRBcnJheXMoY2lwaGVyVGV4dCwgaXYpO1xuICAgICAgICBjb25zdCBobWFjID0geWllbGQgY3J5cHRvLmhtYWNTaGEyNTZTaWduKF9rZXksIHVuc2lnbmVkKTtcbiAgICAgICAgY29uc3QgaG1hY0hleCA9IGVuY29kaW5nLmFycmF5VG9IZXgoaG1hYywgZmFsc2UpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgZGF0YTogY2lwaGVyVGV4dEhleCxcbiAgICAgICAgICAgIGhtYWM6IGhtYWNIZXgsXG4gICAgICAgICAgICBpdjogaXZIZXgsXG4gICAgICAgIH07XG4gICAgfSk7XG59XG5leHBvcnRzLmVuY3J5cHQgPSBlbmNyeXB0O1xuZnVuY3Rpb24gZGVjcnlwdChwYXlsb2FkLCBrZXkpIHtcbiAgICByZXR1cm4gdHNsaWJfMS5fX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgIGNvbnN0IF9rZXkgPSBlbmNvZGluZy5idWZmZXJUb0FycmF5KGxlZ2FjeV91dGlsc18xLmNvbnZlcnRBcnJheUJ1ZmZlclRvQnVmZmVyKGtleSkpO1xuICAgICAgICBpZiAoIV9rZXkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIk1pc3Npbmcga2V5OiByZXF1aXJlZCBmb3IgZGVjcnlwdGlvblwiKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB2ZXJpZmllZCA9IHlpZWxkIHZlcmlmeUhtYWMocGF5bG9hZCwgX2tleSk7XG4gICAgICAgIGlmICghdmVyaWZpZWQpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGNpcGhlclRleHQgPSBlbmNvZGluZy5oZXhUb0FycmF5KHBheWxvYWQuZGF0YSk7XG4gICAgICAgIGNvbnN0IGl2ID0gZW5jb2RpbmcuaGV4VG9BcnJheShwYXlsb2FkLml2KTtcbiAgICAgICAgY29uc3QgYnVmZmVyID0geWllbGQgY3J5cHRvLmFlc0NiY0RlY3J5cHQoaXYsIF9rZXksIGNpcGhlclRleHQpO1xuICAgICAgICBjb25zdCB1dGY4ID0gZW5jb2RpbmcuYXJyYXlUb1V0ZjgoYnVmZmVyKTtcbiAgICAgICAgbGV0IGRhdGE7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBkYXRhID0gSlNPTi5wYXJzZSh1dGY4KTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBkYXRhO1xuICAgIH0pO1xufVxuZXhwb3J0cy5kZWNyeXB0ID0gZGVjcnlwdDtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNyeXB0by5qcy5tYXAiXSwibmFtZXMiOlsiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiLCJkZWNyeXB0IiwiZW5jcnlwdCIsInZlcmlmeUhtYWMiLCJnZW5lcmF0ZUtleSIsInRzbGliXzEiLCJyZXF1aXJlIiwiY3J5cHRvIiwiX19pbXBvcnRTdGFyIiwiZW5jb2RpbmciLCJsZWdhY3lfdXRpbHNfMSIsImxlbmd0aCIsIl9fYXdhaXRlciIsIl9sZW5ndGgiLCJieXRlcyIsInJhbmRvbUJ5dGVzIiwicmVzdWx0IiwiY29udmVydEJ1ZmZlclRvQXJyYXlCdWZmZXIiLCJhcnJheVRvQnVmZmVyIiwicGF5bG9hZCIsImtleSIsImNpcGhlclRleHQiLCJoZXhUb0FycmF5IiwiZGF0YSIsIml2IiwiaG1hYyIsImhtYWNIZXgiLCJhcnJheVRvSGV4IiwidW5zaWduZWQiLCJjb25jYXRBcnJheXMiLCJjaG1hYyIsImhtYWNTaGEyNTZTaWduIiwiY2htYWNIZXgiLCJyZW1vdmVIZXhQcmVmaXgiLCJwcm92aWRlZEl2IiwiX2tleSIsImJ1ZmZlclRvQXJyYXkiLCJjb252ZXJ0QXJyYXlCdWZmZXJUb0J1ZmZlciIsIml2QXJyYXlCdWZmZXIiLCJpdkhleCIsImNvbnRlbnRTdHJpbmciLCJKU09OIiwic3RyaW5naWZ5IiwiY29udGVudCIsInV0ZjhUb0FycmF5IiwiYWVzQ2JjRW5jcnlwdCIsImNpcGhlclRleHRIZXgiLCJFcnJvciIsInZlcmlmaWVkIiwiYnVmZmVyIiwiYWVzQ2JjRGVjcnlwdCIsInV0ZjgiLCJhcnJheVRvVXRmOCIsInBhcnNlIiwiZXJyb3IiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/@walletconnect+legacy-client@2.0.0/node_modules/@walletconnect/legacy-client/dist/cjs/crypto.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/@walletconnect+legacy-client@2.0.0/node_modules/@walletconnect/legacy-client/dist/cjs/events.js":
/*!****************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@walletconnect+legacy-client@2.0.0/node_modules/@walletconnect/legacy-client/dist/cjs/events.js ***!
  \****************************************************************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nconst legacy_utils_1 = __webpack_require__(/*! @walletconnect/legacy-utils */ \"(ssr)/./node_modules/.pnpm/@walletconnect+legacy-utils@2.0.0/node_modules/@walletconnect/legacy-utils/dist/cjs/index.js\");\nclass EventManager {\n    constructor(){\n        this._eventEmitters = [];\n    }\n    subscribe(eventEmitter) {\n        this._eventEmitters.push(eventEmitter);\n    }\n    unsubscribe(event) {\n        this._eventEmitters = this._eventEmitters.filter((x)=>x.event !== event);\n    }\n    trigger(payload) {\n        let eventEmitters = [];\n        let event;\n        if (legacy_utils_1.isJsonRpcRequest(payload)) {\n            event = payload.method;\n        } else if (legacy_utils_1.isJsonRpcResponseSuccess(payload) || legacy_utils_1.isJsonRpcResponseError(payload)) {\n            event = `response:${payload.id}`;\n        } else if (legacy_utils_1.isInternalEvent(payload)) {\n            event = payload.event;\n        } else {\n            event = \"\";\n        }\n        if (event) {\n            eventEmitters = this._eventEmitters.filter((eventEmitter)=>eventEmitter.event === event);\n        }\n        if ((!eventEmitters || !eventEmitters.length) && !legacy_utils_1.isReservedEvent(event) && !legacy_utils_1.isInternalEvent(event)) {\n            eventEmitters = this._eventEmitters.filter((eventEmitter)=>eventEmitter.event === \"call_request\");\n        }\n        eventEmitters.forEach((eventEmitter)=>{\n            if (legacy_utils_1.isJsonRpcResponseError(payload)) {\n                const error = new Error(payload.error.message);\n                eventEmitter.callback(error, null);\n            } else {\n                eventEmitter.callback(null, payload);\n            }\n        });\n    }\n}\nexports[\"default\"] = EventManager; //# sourceMappingURL=events.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vQHdhbGxldGNvbm5lY3QrbGVnYWN5LWNsaWVudEAyLjAuMC9ub2RlX21vZHVsZXMvQHdhbGxldGNvbm5lY3QvbGVnYWN5LWNsaWVudC9kaXN0L2Nqcy9ldmVudHMuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYkEsOENBQTZDO0lBQUVHLE9BQU87QUFBSyxDQUFDLEVBQUM7QUFDN0QsTUFBTUMsaUJBQWlCQyxtQkFBT0EsQ0FBQyw0SkFBNkI7QUFDNUQsTUFBTUM7SUFDRkMsYUFBYztRQUNWLElBQUksQ0FBQ0MsY0FBYyxHQUFHLEVBQUU7SUFDNUI7SUFDQUMsVUFBVUMsWUFBWSxFQUFFO1FBQ3BCLElBQUksQ0FBQ0YsY0FBYyxDQUFDRyxJQUFJLENBQUNEO0lBQzdCO0lBQ0FFLFlBQVlDLEtBQUssRUFBRTtRQUNmLElBQUksQ0FBQ0wsY0FBYyxHQUFHLElBQUksQ0FBQ0EsY0FBYyxDQUFDTSxNQUFNLENBQUNDLENBQUFBLElBQUtBLEVBQUVGLEtBQUssS0FBS0E7SUFDdEU7SUFDQUcsUUFBUUMsT0FBTyxFQUFFO1FBQ2IsSUFBSUMsZ0JBQWdCLEVBQUU7UUFDdEIsSUFBSUw7UUFDSixJQUFJVCxlQUFlZSxnQkFBZ0IsQ0FBQ0YsVUFBVTtZQUMxQ0osUUFBUUksUUFBUUcsTUFBTTtRQUMxQixPQUNLLElBQUloQixlQUFlaUIsd0JBQXdCLENBQUNKLFlBQVliLGVBQWVrQixzQkFBc0IsQ0FBQ0wsVUFBVTtZQUN6R0osUUFBUSxDQUFDLFNBQVMsRUFBRUksUUFBUU0sRUFBRSxDQUFDLENBQUM7UUFDcEMsT0FDSyxJQUFJbkIsZUFBZW9CLGVBQWUsQ0FBQ1AsVUFBVTtZQUM5Q0osUUFBUUksUUFBUUosS0FBSztRQUN6QixPQUNLO1lBQ0RBLFFBQVE7UUFDWjtRQUNBLElBQUlBLE9BQU87WUFDUEssZ0JBQWdCLElBQUksQ0FBQ1YsY0FBYyxDQUFDTSxNQUFNLENBQUMsQ0FBQ0osZUFBaUJBLGFBQWFHLEtBQUssS0FBS0E7UUFDeEY7UUFDQSxJQUFJLENBQUMsQ0FBQ0ssaUJBQWlCLENBQUNBLGNBQWNPLE1BQU0sS0FDeEMsQ0FBQ3JCLGVBQWVzQixlQUFlLENBQUNiLFVBQ2hDLENBQUNULGVBQWVvQixlQUFlLENBQUNYLFFBQVE7WUFDeENLLGdCQUFnQixJQUFJLENBQUNWLGNBQWMsQ0FBQ00sTUFBTSxDQUFDLENBQUNKLGVBQWlCQSxhQUFhRyxLQUFLLEtBQUs7UUFDeEY7UUFDQUssY0FBY1MsT0FBTyxDQUFDLENBQUNqQjtZQUNuQixJQUFJTixlQUFla0Isc0JBQXNCLENBQUNMLFVBQVU7Z0JBQ2hELE1BQU1XLFFBQVEsSUFBSUMsTUFBTVosUUFBUVcsS0FBSyxDQUFDRSxPQUFPO2dCQUM3Q3BCLGFBQWFxQixRQUFRLENBQUNILE9BQU87WUFDakMsT0FDSztnQkFDRGxCLGFBQWFxQixRQUFRLENBQUMsTUFBTWQ7WUFDaEM7UUFDSjtJQUNKO0FBQ0o7QUFDQWYsa0JBQWUsR0FBR0ksY0FDbEIsa0NBQWtDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc21hcnQtYXVkaXQvLi9ub2RlX21vZHVsZXMvLnBucG0vQHdhbGxldGNvbm5lY3QrbGVnYWN5LWNsaWVudEAyLjAuMC9ub2RlX21vZHVsZXMvQHdhbGxldGNvbm5lY3QvbGVnYWN5LWNsaWVudC9kaXN0L2Nqcy9ldmVudHMuanM/ODViNCJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmNvbnN0IGxlZ2FjeV91dGlsc18xID0gcmVxdWlyZShcIkB3YWxsZXRjb25uZWN0L2xlZ2FjeS11dGlsc1wiKTtcbmNsYXNzIEV2ZW50TWFuYWdlciB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuX2V2ZW50RW1pdHRlcnMgPSBbXTtcbiAgICB9XG4gICAgc3Vic2NyaWJlKGV2ZW50RW1pdHRlcikge1xuICAgICAgICB0aGlzLl9ldmVudEVtaXR0ZXJzLnB1c2goZXZlbnRFbWl0dGVyKTtcbiAgICB9XG4gICAgdW5zdWJzY3JpYmUoZXZlbnQpIHtcbiAgICAgICAgdGhpcy5fZXZlbnRFbWl0dGVycyA9IHRoaXMuX2V2ZW50RW1pdHRlcnMuZmlsdGVyKHggPT4geC5ldmVudCAhPT0gZXZlbnQpO1xuICAgIH1cbiAgICB0cmlnZ2VyKHBheWxvYWQpIHtcbiAgICAgICAgbGV0IGV2ZW50RW1pdHRlcnMgPSBbXTtcbiAgICAgICAgbGV0IGV2ZW50O1xuICAgICAgICBpZiAobGVnYWN5X3V0aWxzXzEuaXNKc29uUnBjUmVxdWVzdChwYXlsb2FkKSkge1xuICAgICAgICAgICAgZXZlbnQgPSBwYXlsb2FkLm1ldGhvZDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChsZWdhY3lfdXRpbHNfMS5pc0pzb25ScGNSZXNwb25zZVN1Y2Nlc3MocGF5bG9hZCkgfHwgbGVnYWN5X3V0aWxzXzEuaXNKc29uUnBjUmVzcG9uc2VFcnJvcihwYXlsb2FkKSkge1xuICAgICAgICAgICAgZXZlbnQgPSBgcmVzcG9uc2U6JHtwYXlsb2FkLmlkfWA7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAobGVnYWN5X3V0aWxzXzEuaXNJbnRlcm5hbEV2ZW50KHBheWxvYWQpKSB7XG4gICAgICAgICAgICBldmVudCA9IHBheWxvYWQuZXZlbnQ7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBldmVudCA9IFwiXCI7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGV2ZW50KSB7XG4gICAgICAgICAgICBldmVudEVtaXR0ZXJzID0gdGhpcy5fZXZlbnRFbWl0dGVycy5maWx0ZXIoKGV2ZW50RW1pdHRlcikgPT4gZXZlbnRFbWl0dGVyLmV2ZW50ID09PSBldmVudCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCghZXZlbnRFbWl0dGVycyB8fCAhZXZlbnRFbWl0dGVycy5sZW5ndGgpICYmXG4gICAgICAgICAgICAhbGVnYWN5X3V0aWxzXzEuaXNSZXNlcnZlZEV2ZW50KGV2ZW50KSAmJlxuICAgICAgICAgICAgIWxlZ2FjeV91dGlsc18xLmlzSW50ZXJuYWxFdmVudChldmVudCkpIHtcbiAgICAgICAgICAgIGV2ZW50RW1pdHRlcnMgPSB0aGlzLl9ldmVudEVtaXR0ZXJzLmZpbHRlcigoZXZlbnRFbWl0dGVyKSA9PiBldmVudEVtaXR0ZXIuZXZlbnQgPT09IFwiY2FsbF9yZXF1ZXN0XCIpO1xuICAgICAgICB9XG4gICAgICAgIGV2ZW50RW1pdHRlcnMuZm9yRWFjaCgoZXZlbnRFbWl0dGVyKSA9PiB7XG4gICAgICAgICAgICBpZiAobGVnYWN5X3V0aWxzXzEuaXNKc29uUnBjUmVzcG9uc2VFcnJvcihwYXlsb2FkKSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGVycm9yID0gbmV3IEVycm9yKHBheWxvYWQuZXJyb3IubWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgZXZlbnRFbWl0dGVyLmNhbGxiYWNrKGVycm9yLCBudWxsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGV2ZW50RW1pdHRlci5jYWxsYmFjayhudWxsLCBwYXlsb2FkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxufVxuZXhwb3J0cy5kZWZhdWx0ID0gRXZlbnRNYW5hZ2VyO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZXZlbnRzLmpzLm1hcCJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsImxlZ2FjeV91dGlsc18xIiwicmVxdWlyZSIsIkV2ZW50TWFuYWdlciIsImNvbnN0cnVjdG9yIiwiX2V2ZW50RW1pdHRlcnMiLCJzdWJzY3JpYmUiLCJldmVudEVtaXR0ZXIiLCJwdXNoIiwidW5zdWJzY3JpYmUiLCJldmVudCIsImZpbHRlciIsIngiLCJ0cmlnZ2VyIiwicGF5bG9hZCIsImV2ZW50RW1pdHRlcnMiLCJpc0pzb25ScGNSZXF1ZXN0IiwibWV0aG9kIiwiaXNKc29uUnBjUmVzcG9uc2VTdWNjZXNzIiwiaXNKc29uUnBjUmVzcG9uc2VFcnJvciIsImlkIiwiaXNJbnRlcm5hbEV2ZW50IiwibGVuZ3RoIiwiaXNSZXNlcnZlZEV2ZW50IiwiZm9yRWFjaCIsImVycm9yIiwiRXJyb3IiLCJtZXNzYWdlIiwiY2FsbGJhY2siLCJkZWZhdWx0Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/@walletconnect+legacy-client@2.0.0/node_modules/@walletconnect/legacy-client/dist/cjs/events.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/@walletconnect+legacy-client@2.0.0/node_modules/@walletconnect/legacy-client/dist/cjs/index.js":
/*!***************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@walletconnect+legacy-client@2.0.0/node_modules/@walletconnect/legacy-client/dist/cjs/index.js ***!
  \***************************************************************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nconst tslib_1 = __webpack_require__(/*! tslib */ \"(ssr)/./node_modules/.pnpm/tslib@2.6.2/node_modules/tslib/tslib.es6.mjs\");\nconst core_1 = tslib_1.__importDefault(__webpack_require__(/*! ./core */ \"(ssr)/./node_modules/.pnpm/@walletconnect+legacy-client@2.0.0/node_modules/@walletconnect/legacy-client/dist/cjs/core.js\"));\nconst cryptoLib = tslib_1.__importStar(__webpack_require__(/*! ./crypto */ \"(ssr)/./node_modules/.pnpm/@walletconnect+legacy-client@2.0.0/node_modules/@walletconnect/legacy-client/dist/cjs/crypto.js\"));\nclass WalletConnect extends core_1.default {\n    constructor(connectorOpts, pushServerOpts){\n        super({\n            cryptoLib,\n            connectorOpts,\n            pushServerOpts\n        });\n    }\n}\nexports[\"default\"] = WalletConnect; //# sourceMappingURL=index.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vQHdhbGxldGNvbm5lY3QrbGVnYWN5LWNsaWVudEAyLjAuMC9ub2RlX21vZHVsZXMvQHdhbGxldGNvbm5lY3QvbGVnYWN5LWNsaWVudC9kaXN0L2Nqcy9pbmRleC5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiQSw4Q0FBNkM7SUFBRUcsT0FBTztBQUFLLENBQUMsRUFBQztBQUM3RCxNQUFNQyxVQUFVQyxtQkFBT0EsQ0FBQyxzRkFBTztBQUMvQixNQUFNQyxTQUFTRixRQUFRRyxlQUFlLENBQUNGLG1CQUFPQSxDQUFDLHdJQUFRO0FBQ3ZELE1BQU1HLFlBQVlKLFFBQVFLLFlBQVksQ0FBQ0osbUJBQU9BLENBQUMsNElBQVU7QUFDekQsTUFBTUssc0JBQXNCSixPQUFPSyxPQUFPO0lBQ3RDQyxZQUFZQyxhQUFhLEVBQUVDLGNBQWMsQ0FBRTtRQUN2QyxLQUFLLENBQUM7WUFDRk47WUFDQUs7WUFDQUM7UUFDSjtJQUNKO0FBQ0o7QUFDQVosa0JBQWUsR0FBR1EsZUFDbEIsaUNBQWlDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc21hcnQtYXVkaXQvLi9ub2RlX21vZHVsZXMvLnBucG0vQHdhbGxldGNvbm5lY3QrbGVnYWN5LWNsaWVudEAyLjAuMC9ub2RlX21vZHVsZXMvQHdhbGxldGNvbm5lY3QvbGVnYWN5LWNsaWVudC9kaXN0L2Nqcy9pbmRleC5qcz8yNzdlIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuY29uc3QgdHNsaWJfMSA9IHJlcXVpcmUoXCJ0c2xpYlwiKTtcbmNvbnN0IGNvcmVfMSA9IHRzbGliXzEuX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCIuL2NvcmVcIikpO1xuY29uc3QgY3J5cHRvTGliID0gdHNsaWJfMS5fX2ltcG9ydFN0YXIocmVxdWlyZShcIi4vY3J5cHRvXCIpKTtcbmNsYXNzIFdhbGxldENvbm5lY3QgZXh0ZW5kcyBjb3JlXzEuZGVmYXVsdCB7XG4gICAgY29uc3RydWN0b3IoY29ubmVjdG9yT3B0cywgcHVzaFNlcnZlck9wdHMpIHtcbiAgICAgICAgc3VwZXIoe1xuICAgICAgICAgICAgY3J5cHRvTGliLFxuICAgICAgICAgICAgY29ubmVjdG9yT3B0cyxcbiAgICAgICAgICAgIHB1c2hTZXJ2ZXJPcHRzLFxuICAgICAgICB9KTtcbiAgICB9XG59XG5leHBvcnRzLmRlZmF1bHQgPSBXYWxsZXRDb25uZWN0O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwidHNsaWJfMSIsInJlcXVpcmUiLCJjb3JlXzEiLCJfX2ltcG9ydERlZmF1bHQiLCJjcnlwdG9MaWIiLCJfX2ltcG9ydFN0YXIiLCJXYWxsZXRDb25uZWN0IiwiZGVmYXVsdCIsImNvbnN0cnVjdG9yIiwiY29ubmVjdG9yT3B0cyIsInB1c2hTZXJ2ZXJPcHRzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/@walletconnect+legacy-client@2.0.0/node_modules/@walletconnect/legacy-client/dist/cjs/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/@walletconnect+legacy-client@2.0.0/node_modules/@walletconnect/legacy-client/dist/cjs/network.js":
/*!*****************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@walletconnect+legacy-client@2.0.0/node_modules/@walletconnect/legacy-client/dist/cjs/network.js ***!
  \*****************************************************************************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nclass NetworkMonitor {\n    constructor(){\n        this._eventEmitters = [];\n        if (false) {}\n    }\n    on(event, callback) {\n        this._eventEmitters.push({\n            event,\n            callback\n        });\n    }\n    trigger(event) {\n        let eventEmitters = [];\n        if (event) {\n            eventEmitters = this._eventEmitters.filter((eventEmitter)=>eventEmitter.event === event);\n        }\n        eventEmitters.forEach((eventEmitter)=>{\n            eventEmitter.callback();\n        });\n    }\n}\nexports[\"default\"] = NetworkMonitor; //# sourceMappingURL=network.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vQHdhbGxldGNvbm5lY3QrbGVnYWN5LWNsaWVudEAyLjAuMC9ub2RlX21vZHVsZXMvQHdhbGxldGNvbm5lY3QvbGVnYWN5LWNsaWVudC9kaXN0L2Nqcy9uZXR3b3JrLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2JBLDhDQUE2QztJQUFFRyxPQUFPO0FBQUssQ0FBQyxFQUFDO0FBQzdELE1BQU1DO0lBQ0ZDLGFBQWM7UUFDVixJQUFJLENBQUNDLGNBQWMsR0FBRyxFQUFFO1FBQ3hCLElBQUksS0FBK0UsRUFBRSxFQUdwRjtJQUNMO0lBQ0FJLEdBQUdDLEtBQUssRUFBRUMsUUFBUSxFQUFFO1FBQ2hCLElBQUksQ0FBQ04sY0FBYyxDQUFDTyxJQUFJLENBQUM7WUFDckJGO1lBQ0FDO1FBQ0o7SUFDSjtJQUNBSCxRQUFRRSxLQUFLLEVBQUU7UUFDWCxJQUFJRyxnQkFBZ0IsRUFBRTtRQUN0QixJQUFJSCxPQUFPO1lBQ1BHLGdCQUFnQixJQUFJLENBQUNSLGNBQWMsQ0FBQ1MsTUFBTSxDQUFDLENBQUNDLGVBQWlCQSxhQUFhTCxLQUFLLEtBQUtBO1FBQ3hGO1FBQ0FHLGNBQWNHLE9BQU8sQ0FBQyxDQUFDRDtZQUNuQkEsYUFBYUosUUFBUTtRQUN6QjtJQUNKO0FBQ0o7QUFDQVYsa0JBQWUsR0FBR0UsZ0JBQ2xCLG1DQUFtQyIsInNvdXJjZXMiOlsid2VicGFjazovL3NtYXJ0LWF1ZGl0Ly4vbm9kZV9tb2R1bGVzLy5wbnBtL0B3YWxsZXRjb25uZWN0K2xlZ2FjeS1jbGllbnRAMi4wLjAvbm9kZV9tb2R1bGVzL0B3YWxsZXRjb25uZWN0L2xlZ2FjeS1jbGllbnQvZGlzdC9janMvbmV0d29yay5qcz9iZmY5Il0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuY2xhc3MgTmV0d29ya01vbml0b3Ige1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLl9ldmVudEVtaXR0ZXJzID0gW107XG4gICAgICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiICYmIHR5cGVvZiB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lciAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJvbmxpbmVcIiwgKCkgPT4gdGhpcy50cmlnZ2VyKFwib25saW5lXCIpKTtcbiAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwib2ZmbGluZVwiLCAoKSA9PiB0aGlzLnRyaWdnZXIoXCJvZmZsaW5lXCIpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBvbihldmVudCwgY2FsbGJhY2spIHtcbiAgICAgICAgdGhpcy5fZXZlbnRFbWl0dGVycy5wdXNoKHtcbiAgICAgICAgICAgIGV2ZW50LFxuICAgICAgICAgICAgY2FsbGJhY2ssXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICB0cmlnZ2VyKGV2ZW50KSB7XG4gICAgICAgIGxldCBldmVudEVtaXR0ZXJzID0gW107XG4gICAgICAgIGlmIChldmVudCkge1xuICAgICAgICAgICAgZXZlbnRFbWl0dGVycyA9IHRoaXMuX2V2ZW50RW1pdHRlcnMuZmlsdGVyKChldmVudEVtaXR0ZXIpID0+IGV2ZW50RW1pdHRlci5ldmVudCA9PT0gZXZlbnQpO1xuICAgICAgICB9XG4gICAgICAgIGV2ZW50RW1pdHRlcnMuZm9yRWFjaCgoZXZlbnRFbWl0dGVyKSA9PiB7XG4gICAgICAgICAgICBldmVudEVtaXR0ZXIuY2FsbGJhY2soKTtcbiAgICAgICAgfSk7XG4gICAgfVxufVxuZXhwb3J0cy5kZWZhdWx0ID0gTmV0d29ya01vbml0b3I7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1uZXR3b3JrLmpzLm1hcCJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsIk5ldHdvcmtNb25pdG9yIiwiY29uc3RydWN0b3IiLCJfZXZlbnRFbWl0dGVycyIsIndpbmRvdyIsImFkZEV2ZW50TGlzdGVuZXIiLCJ0cmlnZ2VyIiwib24iLCJldmVudCIsImNhbGxiYWNrIiwicHVzaCIsImV2ZW50RW1pdHRlcnMiLCJmaWx0ZXIiLCJldmVudEVtaXR0ZXIiLCJmb3JFYWNoIiwiZGVmYXVsdCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/@walletconnect+legacy-client@2.0.0/node_modules/@walletconnect/legacy-client/dist/cjs/network.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/@walletconnect+legacy-client@2.0.0/node_modules/@walletconnect/legacy-client/dist/cjs/socket.js":
/*!****************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@walletconnect+legacy-client@2.0.0/node_modules/@walletconnect/legacy-client/dist/cjs/socket.js ***!
  \****************************************************************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nconst tslib_1 = __webpack_require__(/*! tslib */ \"(ssr)/./node_modules/.pnpm/tslib@2.6.2/node_modules/tslib/tslib.es6.mjs\");\nconst legacy_utils_1 = __webpack_require__(/*! @walletconnect/legacy-utils */ \"(ssr)/./node_modules/.pnpm/@walletconnect+legacy-utils@2.0.0/node_modules/@walletconnect/legacy-utils/dist/cjs/index.js\");\nconst network_1 = tslib_1.__importDefault(__webpack_require__(/*! ./network */ \"(ssr)/./node_modules/.pnpm/@walletconnect+legacy-client@2.0.0/node_modules/@walletconnect/legacy-client/dist/cjs/network.js\"));\nconst WS = typeof global.WebSocket !== \"undefined\" ? global.WebSocket : __webpack_require__(/*! ws */ \"(ssr)/./node_modules/.pnpm/ws@8.13.0/node_modules/ws/index.js\");\nclass SocketTransport {\n    constructor(opts){\n        this.opts = opts;\n        this._queue = [];\n        this._events = [];\n        this._subscriptions = [];\n        this._protocol = opts.protocol;\n        this._version = opts.version;\n        this._url = \"\";\n        this._netMonitor = null;\n        this._socket = null;\n        this._nextSocket = null;\n        this._subscriptions = opts.subscriptions || [];\n        this._netMonitor = opts.netMonitor || new network_1.default();\n        if (!opts.url || typeof opts.url !== \"string\") {\n            throw new Error(\"Missing or invalid WebSocket url\");\n        }\n        this._url = opts.url;\n        this._netMonitor.on(\"online\", ()=>this._socketCreate());\n    }\n    set readyState(value) {}\n    get readyState() {\n        return this._socket ? this._socket.readyState : -1;\n    }\n    set connecting(value) {}\n    get connecting() {\n        return this.readyState === 0;\n    }\n    set connected(value) {}\n    get connected() {\n        return this.readyState === 1;\n    }\n    set closing(value) {}\n    get closing() {\n        return this.readyState === 2;\n    }\n    set closed(value) {}\n    get closed() {\n        return this.readyState === 3;\n    }\n    open() {\n        this._socketCreate();\n    }\n    close() {\n        this._socketClose();\n    }\n    send(message, topic, silent) {\n        if (!topic || typeof topic !== \"string\") {\n            throw new Error(\"Missing or invalid topic field\");\n        }\n        this._socketSend({\n            topic: topic,\n            type: \"pub\",\n            payload: message,\n            silent: !!silent\n        });\n    }\n    subscribe(topic) {\n        this._socketSend({\n            topic: topic,\n            type: \"sub\",\n            payload: \"\",\n            silent: true\n        });\n    }\n    on(event, callback) {\n        this._events.push({\n            event,\n            callback\n        });\n    }\n    _socketCreate() {\n        if (this._nextSocket) {\n            return;\n        }\n        const url = getWebSocketUrl(this._url, this._protocol, this._version);\n        this._nextSocket = new WS(url);\n        if (!this._nextSocket) {\n            throw new Error(\"Failed to create socket\");\n        }\n        this._nextSocket.onmessage = (event)=>this._socketReceive(event);\n        this._nextSocket.onopen = ()=>this._socketOpen();\n        this._nextSocket.onerror = (event)=>this._socketError(event);\n        this._nextSocket.onclose = ()=>{\n            setTimeout(()=>{\n                this._nextSocket = null;\n                this._socketCreate();\n            }, 1000);\n        };\n    }\n    _socketOpen() {\n        this._socketClose();\n        this._socket = this._nextSocket;\n        this._nextSocket = null;\n        this._queueSubscriptions();\n        this._pushQueue();\n    }\n    _socketClose() {\n        if (this._socket) {\n            this._socket.onclose = ()=>{};\n            this._socket.close();\n        }\n    }\n    _socketSend(socketMessage) {\n        const message = JSON.stringify(socketMessage);\n        if (this._socket && this._socket.readyState === 1) {\n            this._socket.send(message);\n        } else {\n            this._setToQueue(socketMessage);\n            this._socketCreate();\n        }\n    }\n    _socketReceive(event) {\n        return tslib_1.__awaiter(this, void 0, void 0, function*() {\n            let socketMessage;\n            try {\n                socketMessage = JSON.parse(event.data);\n            } catch (error) {\n                return;\n            }\n            this._socketSend({\n                topic: socketMessage.topic,\n                type: \"ack\",\n                payload: \"\",\n                silent: true\n            });\n            if (this._socket && this._socket.readyState === 1) {\n                const events = this._events.filter((event)=>event.event === \"message\");\n                if (events && events.length) {\n                    events.forEach((event)=>event.callback(socketMessage));\n                }\n            }\n        });\n    }\n    _socketError(e) {\n        const events = this._events.filter((event)=>event.event === \"error\");\n        if (events && events.length) {\n            events.forEach((event)=>event.callback(e));\n        }\n    }\n    _queueSubscriptions() {\n        const subscriptions = this._subscriptions;\n        subscriptions.forEach((topic)=>this._queue.push({\n                topic: topic,\n                type: \"sub\",\n                payload: \"\",\n                silent: true\n            }));\n        this._subscriptions = this.opts.subscriptions || [];\n    }\n    _setToQueue(socketMessage) {\n        this._queue.push(socketMessage);\n    }\n    _pushQueue() {\n        const queue = this._queue;\n        queue.forEach((socketMessage)=>this._socketSend(socketMessage));\n        this._queue = [];\n    }\n}\nfunction getWebSocketUrl(_url, protocol, version) {\n    var _a, _b;\n    const url = _url.startsWith(\"https\") ? _url.replace(\"https\", \"wss\") : _url.startsWith(\"http\") ? _url.replace(\"http\", \"ws\") : _url;\n    const splitUrl = url.split(\"?\");\n    const params = legacy_utils_1.isBrowser() ? {\n        protocol,\n        version,\n        env: \"browser\",\n        host: ((_a = legacy_utils_1.getLocation()) === null || _a === void 0 ? void 0 : _a.host) || \"\"\n    } : {\n        protocol,\n        version,\n        env: ((_b = legacy_utils_1.detectEnv()) === null || _b === void 0 ? void 0 : _b.name) || \"\"\n    };\n    const queryString = legacy_utils_1.appendToQueryString(legacy_utils_1.getQueryString(splitUrl[1] || \"\"), params);\n    return splitUrl[0] + \"?\" + queryString;\n}\nexports[\"default\"] = SocketTransport; //# sourceMappingURL=socket.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vQHdhbGxldGNvbm5lY3QrbGVnYWN5LWNsaWVudEAyLjAuMC9ub2RlX21vZHVsZXMvQHdhbGxldGNvbm5lY3QvbGVnYWN5LWNsaWVudC9kaXN0L2Nqcy9zb2NrZXQuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYkEsOENBQTZDO0lBQUVHLE9BQU87QUFBSyxDQUFDLEVBQUM7QUFDN0QsTUFBTUMsVUFBVUMsbUJBQU9BLENBQUMsc0ZBQU87QUFDL0IsTUFBTUMsaUJBQWlCRCxtQkFBT0EsQ0FBQyw0SkFBNkI7QUFDNUQsTUFBTUUsWUFBWUgsUUFBUUksZUFBZSxDQUFDSCxtQkFBT0EsQ0FBQyw4SUFBVztBQUM3RCxNQUFNSSxLQUFLLE9BQU9DLE9BQU9DLFNBQVMsS0FBSyxjQUFjRCxPQUFPQyxTQUFTLEdBQUdOLG1CQUFPQSxDQUFDLHlFQUFJO0FBQ3BGLE1BQU1PO0lBQ0ZDLFlBQVlDLElBQUksQ0FBRTtRQUNkLElBQUksQ0FBQ0EsSUFBSSxHQUFHQTtRQUNaLElBQUksQ0FBQ0MsTUFBTSxHQUFHLEVBQUU7UUFDaEIsSUFBSSxDQUFDQyxPQUFPLEdBQUcsRUFBRTtRQUNqQixJQUFJLENBQUNDLGNBQWMsR0FBRyxFQUFFO1FBQ3hCLElBQUksQ0FBQ0MsU0FBUyxHQUFHSixLQUFLSyxRQUFRO1FBQzlCLElBQUksQ0FBQ0MsUUFBUSxHQUFHTixLQUFLTyxPQUFPO1FBQzVCLElBQUksQ0FBQ0MsSUFBSSxHQUFHO1FBQ1osSUFBSSxDQUFDQyxXQUFXLEdBQUc7UUFDbkIsSUFBSSxDQUFDQyxPQUFPLEdBQUc7UUFDZixJQUFJLENBQUNDLFdBQVcsR0FBRztRQUNuQixJQUFJLENBQUNSLGNBQWMsR0FBR0gsS0FBS1ksYUFBYSxJQUFJLEVBQUU7UUFDOUMsSUFBSSxDQUFDSCxXQUFXLEdBQUdULEtBQUthLFVBQVUsSUFBSSxJQUFJcEIsVUFBVXFCLE9BQU87UUFDM0QsSUFBSSxDQUFDZCxLQUFLZSxHQUFHLElBQUksT0FBT2Ys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RCxPQUFPLENBQUMsUUFBUSxRQUNyQjFEO0lBQ1YsTUFBTTJELFdBQVdwRCxJQUFJcUQsS0FBSyxDQUFDO0lBQzNCLE1BQU1DLFNBQVM3RSxlQUFlOEUsU0FBUyxLQUNqQztRQUNFakU7UUFDQUU7UUFDQWdFLEtBQUs7UUFDTEMsTUFBTSxDQUFDLENBQUNULEtBQUt2RSxlQUFlaUYsV0FBVyxFQUFDLE1BQU8sUUFBUVYsT0FBTyxLQUFLLElBQUksS0FBSyxJQUFJQSxHQUFHUyxJQUFJLEtBQUs7SUFDaEcsSUFDRTtRQUNFbkU7UUFDQUU7UUFDQWdFLEtBQUssQ0FBQyxDQUFDUCxLQUFLeEUsZUFBZWtGLFNBQVMsRUFBQyxNQUFPLFFBQVFWLE9BQU8sS0FBSyxJQUFJLEtBQUssSUFBSUEsR0FBR1csSUFBSSxLQUFLO0lBQzdGO0lBQ0osTUFBTUMsY0FBY3BGLGVBQWVxRixtQkFBbUIsQ0FBQ3JGLGVBQWVzRixjQUFjLENBQUNYLFFBQVEsQ0FBQyxFQUFFLElBQUksS0FBS0U7SUFDekcsT0FBT0YsUUFBUSxDQUFDLEVBQUUsR0FBRyxNQUFNUztBQUMvQjtBQUNBeEYsa0JBQWUsR0FBR1UsaUJBQ2xCLGtDQUFrQyIsInNvdXJjZXMiOlsid2VicGFjazovL3NtYXJ0LWF1ZGl0Ly4vbm9kZV9tb2R1bGVzLy5wbnBtL0B3YWxsZXRjb25uZWN0K2xlZ2FjeS1jbGllbnRAMi4wLjAvbm9kZV9tb2R1bGVzL0B3YWxsZXRjb25uZWN0L2xlZ2FjeS1jbGllbnQvZGlzdC9janMvc29ja2V0LmpzPzhjYTAiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5jb25zdCB0c2xpYl8xID0gcmVxdWlyZShcInRzbGliXCIpO1xuY29uc3QgbGVnYWN5X3V0aWxzXzEgPSByZXF1aXJlKFwiQHdhbGxldGNvbm5lY3QvbGVnYWN5LXV0aWxzXCIpO1xuY29uc3QgbmV0d29ya18xID0gdHNsaWJfMS5fX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIi4vbmV0d29ya1wiKSk7XG5jb25zdCBXUyA9IHR5cGVvZiBnbG9iYWwuV2ViU29ja2V0ICE9PSBcInVuZGVmaW5lZFwiID8gZ2xvYmFsLldlYlNvY2tldCA6IHJlcXVpcmUoXCJ3c1wiKTtcbmNsYXNzIFNvY2tldFRyYW5zcG9ydCB7XG4gICAgY29uc3RydWN0b3Iob3B0cykge1xuICAgICAgICB0aGlzLm9wdHMgPSBvcHRzO1xuICAgICAgICB0aGlzLl9xdWV1ZSA9IFtdO1xuICAgICAgICB0aGlzLl9ldmVudHMgPSBbXTtcbiAgICAgICAgdGhpcy5fc3Vic2NyaXB0aW9ucyA9IFtdO1xuICAgICAgICB0aGlzLl9wcm90b2NvbCA9IG9wdHMucHJvdG9jb2w7XG4gICAgICAgIHRoaXMuX3ZlcnNpb24gPSBvcHRzLnZlcnNpb247XG4gICAgICAgIHRoaXMuX3VybCA9IFwiXCI7XG4gICAgICAgIHRoaXMuX25ldE1vbml0b3IgPSBudWxsO1xuICAgICAgICB0aGlzLl9zb2NrZXQgPSBudWxsO1xuICAgICAgICB0aGlzLl9uZXh0U29ja2V0ID0gbnVsbDtcbiAgICAgICAgdGhpcy5fc3Vic2NyaXB0aW9ucyA9IG9wdHMuc3Vic2NyaXB0aW9ucyB8fCBbXTtcbiAgICAgICAgdGhpcy5fbmV0TW9uaXRvciA9IG9wdHMubmV0TW9uaXRvciB8fCBuZXcgbmV0d29ya18xLmRlZmF1bHQoKTtcbiAgICAgICAgaWYgKCFvcHRzLnVybCB8fCB0eXBlb2Ygb3B0cy51cmwgIT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIk1pc3Npbmcgb3IgaW52YWxpZCBXZWJTb2NrZXQgdXJsXCIpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX3VybCA9IG9wdHMudXJsO1xuICAgICAgICB0aGlzLl9uZXRNb25pdG9yLm9uKFwib25saW5lXCIsICgpID0+IHRoaXMuX3NvY2tldENyZWF0ZSgpKTtcbiAgICB9XG4gICAgc2V0IHJlYWR5U3RhdGUodmFsdWUpIHtcbiAgICB9XG4gICAgZ2V0IHJlYWR5U3RhdGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9zb2NrZXQgPyB0aGlzLl9zb2NrZXQucmVhZHlTdGF0ZSA6IC0xO1xuICAgIH1cbiAgICBzZXQgY29ubmVjdGluZyh2YWx1ZSkge1xuICAgIH1cbiAgICBnZXQgY29ubmVjdGluZygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVhZHlTdGF0ZSA9PT0gMDtcbiAgICB9XG4gICAgc2V0IGNvbm5lY3RlZCh2YWx1ZSkge1xuICAgIH1cbiAgICBnZXQgY29ubmVjdGVkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yZWFkeVN0YXRlID09PSAxO1xuICAgIH1cbiAgICBzZXQgY2xvc2luZyh2YWx1ZSkge1xuICAgIH1cbiAgICBnZXQgY2xvc2luZygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVhZHlTdGF0ZSA9PT0gMjtcbiAgICB9XG4gICAgc2V0IGNsb3NlZCh2YWx1ZSkge1xuICAgIH1cbiAgICBnZXQgY2xvc2VkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yZWFkeVN0YXRlID09PSAzO1xuICAgIH1cbiAgICBvcGVuKCkge1xuICAgICAgICB0aGlzLl9zb2NrZXRDcmVhdGUoKTtcbiAgICB9XG4gICAgY2xvc2UoKSB7XG4gICAgICAgIHRoaXMuX3NvY2tldENsb3NlKCk7XG4gICAgfVxuICAgIHNlbmQobWVzc2FnZSwgdG9waWMsIHNpbGVudCkge1xuICAgICAgICBpZiAoIXRvcGljIHx8IHR5cGVvZiB0b3BpYyAhPT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTWlzc2luZyBvciBpbnZhbGlkIHRvcGljIGZpZWxkXCIpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX3NvY2tldFNlbmQoe1xuICAgICAgICAgICAgdG9waWM6IHRvcGljLFxuICAgICAgICAgICAgdHlwZTogXCJwdWJcIixcbiAgICAgICAgICAgIHBheWxvYWQ6IG1lc3NhZ2UsXG4gICAgICAgICAgICBzaWxlbnQ6ICEhc2lsZW50LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgc3Vic2NyaWJlKHRvcGljKSB7XG4gICAgICAgIHRoaXMuX3NvY2tldFNlbmQoe1xuICAgICAgICAgICAgdG9waWM6IHRvcGljLFxuICAgICAgICAgICAgdHlwZTogXCJzdWJcIixcbiAgICAgICAgICAgIHBheWxvYWQ6IFwiXCIsXG4gICAgICAgICAgICBzaWxlbnQ6IHRydWUsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBvbihldmVudCwgY2FsbGJhY2spIHtcbiAgICAgICAgdGhpcy5fZXZlbnRzLnB1c2goeyBldmVudCwgY2FsbGJhY2sgfSk7XG4gICAgfVxuICAgIF9zb2NrZXRDcmVhdGUoKSB7XG4gICAgICAgIGlmICh0aGlzLl9uZXh0U29ja2V0KSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdXJsID0gZ2V0V2ViU29ja2V0VXJsKHRoaXMuX3VybCwgdGhpcy5fcHJvdG9jb2wsIHRoaXMuX3ZlcnNpb24pO1xuICAgICAgICB0aGlzLl9uZXh0U29ja2V0ID0gbmV3IFdTKHVybCk7XG4gICAgICAgIGlmICghdGhpcy5fbmV4dFNvY2tldCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRmFpbGVkIHRvIGNyZWF0ZSBzb2NrZXRcIik7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fbmV4dFNvY2tldC5vbm1lc3NhZ2UgPSAoZXZlbnQpID0+IHRoaXMuX3NvY2tldFJlY2VpdmUoZXZlbnQpO1xuICAgICAgICB0aGlzLl9uZXh0U29ja2V0Lm9ub3BlbiA9ICgpID0+IHRoaXMuX3NvY2tldE9wZW4oKTtcbiAgICAgICAgdGhpcy5fbmV4dFNvY2tldC5vbmVycm9yID0gKGV2ZW50KSA9PiB0aGlzLl9zb2NrZXRFcnJvcihldmVudCk7XG4gICAgICAgIHRoaXMuX25leHRTb2NrZXQub25jbG9zZSA9ICgpID0+IHtcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuX25leHRTb2NrZXQgPSBudWxsO1xuICAgICAgICAgICAgICAgIHRoaXMuX3NvY2tldENyZWF0ZSgpO1xuICAgICAgICAgICAgfSwgMTAwMCk7XG4gICAgICAgIH07XG4gICAgfVxuICAgIF9zb2NrZXRPcGVuKCkge1xuICAgICAgICB0aGlzLl9zb2NrZXRDbG9zZSgpO1xuICAgICAgICB0aGlzLl9zb2NrZXQgPSB0aGlzLl9uZXh0U29ja2V0O1xuICAgICAgICB0aGlzLl9uZXh0U29ja2V0ID0gbnVsbDtcbiAgICAgICAgdGhpcy5fcXVldWVTdWJzY3JpcHRpb25zKCk7XG4gICAgICAgIHRoaXMuX3B1c2hRdWV1ZSgpO1xuICAgIH1cbiAgICBfc29ja2V0Q2xvc2UoKSB7XG4gICAgICAgIGlmICh0aGlzLl9zb2NrZXQpIHtcbiAgICAgICAgICAgIHRoaXMuX3NvY2tldC5vbmNsb3NlID0gKCkgPT4ge1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMuX3NvY2tldC5jbG9zZSgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIF9zb2NrZXRTZW5kKHNvY2tldE1lc3NhZ2UpIHtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IEpTT04uc3RyaW5naWZ5KHNvY2tldE1lc3NhZ2UpO1xuICAgICAgICBpZiAodGhpcy5fc29ja2V0ICYmIHRoaXMuX3NvY2tldC5yZWFkeVN0YXRlID09PSAxKSB7XG4gICAgICAgICAgICB0aGlzLl9zb2NrZXQuc2VuZChtZXNzYWdlKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuX3NldFRvUXVldWUoc29ja2V0TWVzc2FnZSk7XG4gICAgICAgICAgICB0aGlzLl9zb2NrZXRDcmVhdGUoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBfc29ja2V0UmVjZWl2ZShldmVudCkge1xuICAgICAgICByZXR1cm4gdHNsaWJfMS5fX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBsZXQgc29ja2V0TWVzc2FnZTtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgc29ja2V0TWVzc2FnZSA9IEpTT04ucGFyc2UoZXZlbnQuZGF0YSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLl9zb2NrZXRTZW5kKHtcbiAgICAgICAgICAgICAgICB0b3BpYzogc29ja2V0TWVzc2FnZS50b3BpYyxcbiAgICAgICAgICAgICAgICB0eXBlOiBcImFja1wiLFxuICAgICAgICAgICAgICAgIHBheWxvYWQ6IFwiXCIsXG4gICAgICAgICAgICAgICAgc2lsZW50OiB0cnVlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAodGhpcy5fc29ja2V0ICYmIHRoaXMuX3NvY2tldC5yZWFkeVN0YXRlID09PSAxKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZXZlbnRzID0gdGhpcy5fZXZlbnRzLmZpbHRlcihldmVudCA9PiBldmVudC5ldmVudCA9PT0gXCJtZXNzYWdlXCIpO1xuICAgICAgICAgICAgICAgIGlmIChldmVudHMgJiYgZXZlbnRzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICBldmVudHMuZm9yRWFjaChldmVudCA9PiBldmVudC5jYWxsYmFjayhzb2NrZXRNZXNzYWdlKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgX3NvY2tldEVycm9yKGUpIHtcbiAgICAgICAgY29uc3QgZXZlbnRzID0gdGhpcy5fZXZlbnRzLmZpbHRlcihldmVudCA9PiBldmVudC5ldmVudCA9PT0gXCJlcnJvclwiKTtcbiAgICAgICAgaWYgKGV2ZW50cyAmJiBldmVudHMubGVuZ3RoKSB7XG4gICAgICAgICAgICBldmVudHMuZm9yRWFjaChldmVudCA9PiBldmVudC5jYWxsYmFjayhlKSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgX3F1ZXVlU3Vic2NyaXB0aW9ucygpIHtcbiAgICAgICAgY29uc3Qgc3Vic2NyaXB0aW9ucyA9IHRoaXMuX3N1YnNjcmlwdGlvbnM7XG4gICAgICAgIHN1YnNjcmlwdGlvbnMuZm9yRWFjaCgodG9waWMpID0+IHRoaXMuX3F1ZXVlLnB1c2goe1xuICAgICAgICAgICAgdG9waWM6IHRvcGljLFxuICAgICAgICAgICAgdHlwZTogXCJzdWJcIixcbiAgICAgICAgICAgIHBheWxvYWQ6IFwiXCIsXG4gICAgICAgICAgICBzaWxlbnQ6IHRydWUsXG4gICAgICAgIH0pKTtcbiAgICAgICAgdGhpcy5fc3Vic2NyaXB0aW9ucyA9IHRoaXMub3B0cy5zdWJzY3JpcHRpb25zIHx8IFtdO1xuICAgIH1cbiAgICBfc2V0VG9RdWV1ZShzb2NrZXRNZXNzYWdlKSB7XG4gICAgICAgIHRoaXMuX3F1ZXVlLnB1c2goc29ja2V0TWVzc2FnZSk7XG4gICAgfVxuICAgIF9wdXNoUXVldWUoKSB7XG4gICAgICAgIGNvbnN0IHF1ZXVlID0gdGhpcy5fcXVldWU7XG4gICAgICAgIHF1ZXVlLmZvckVhY2goKHNvY2tldE1lc3NhZ2UpID0+IHRoaXMuX3NvY2tldFNlbmQoc29ja2V0TWVzc2FnZSkpO1xuICAgICAgICB0aGlzLl9xdWV1ZSA9IFtdO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGdldFdlYlNvY2tldFVybChfdXJsLCBwcm90b2NvbCwgdmVyc2lvbikge1xuICAgIHZhciBfYSwgX2I7XG4gICAgY29uc3QgdXJsID0gX3VybC5zdGFydHNXaXRoKFwiaHR0cHNcIilcbiAgICAgICAgPyBfdXJsLnJlcGxhY2UoXCJodHRwc1wiLCBcIndzc1wiKVxuICAgICAgICA6IF91cmwuc3RhcnRzV2l0aChcImh0dHBcIilcbiAgICAgICAgICAgID8gX3VybC5yZXBsYWNlKFwiaHR0cFwiLCBcIndzXCIpXG4gICAgICAgICAgICA6IF91cmw7XG4gICAgY29uc3Qgc3BsaXRVcmwgPSB1cmwuc3BsaXQoXCI/XCIpO1xuICAgIGNvbnN0IHBhcmFtcyA9IGxlZ2FjeV91dGlsc18xLmlzQnJvd3NlcigpXG4gICAgICAgID8ge1xuICAgICAgICAgICAgcHJvdG9jb2wsXG4gICAgICAgICAgICB2ZXJzaW9uLFxuICAgICAgICAgICAgZW52OiBcImJyb3dzZXJcIixcbiAgICAgICAgICAgIGhvc3Q6ICgoX2EgPSBsZWdhY3lfdXRpbHNfMS5nZXRMb2NhdGlvbigpKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuaG9zdCkgfHwgXCJcIixcbiAgICAgICAgfVxuICAgICAgICA6IHtcbiAgICAgICAgICAgIHByb3RvY29sLFxuICAgICAgICAgICAgdmVyc2lvbixcbiAgICAgICAgICAgIGVudjogKChfYiA9IGxlZ2FjeV91dGlsc18xLmRldGVjdEVudigpKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IubmFtZSkgfHwgXCJcIixcbiAgICAgICAgfTtcbiAgICBjb25zdCBxdWVyeVN0cmluZyA9IGxlZ2FjeV91dGlsc18xLmFwcGVuZFRvUXVlcnlTdHJpbmcobGVnYWN5X3V0aWxzXzEuZ2V0UXVlcnlTdHJpbmcoc3BsaXRVcmxbMV0gfHwgXCJcIiksIHBhcmFtcyk7XG4gICAgcmV0dXJuIHNwbGl0VXJsWzBdICsgXCI/XCIgKyBxdWVyeVN0cmluZztcbn1cbmV4cG9ydHMuZGVmYXVsdCA9IFNvY2tldFRyYW5zcG9ydDtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXNvY2tldC5qcy5tYXAiXSwibmFtZXMiOlsiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiLCJ0c2xpYl8xIiwicmVxdWlyZSIsImxlZ2FjeV91dGlsc18xIiwibmV0d29ya18xIiwiX19pbXBvcnREZWZhdWx0IiwiV1MiLCJnbG9iYWwiLCJXZWJTb2NrZXQiLCJTb2NrZXRUcmFuc3BvcnQiLCJjb25zdHJ1Y3RvciIsIm9wdHMiLCJfcXVldWUiLCJfZXZlbnRzIiwiX3N1YnNjcmlwdGlvbnMiLCJfcHJvdG9jb2wiLCJwcm90b2NvbCIsIl92ZXJzaW9uIiwidmVyc2lvbiIsIl91cmwiLCJfbmV0TW9uaXRvciIsIl9zb2NrZXQiLCJfbmV4dFNvY2tldCIsInN1YnNjcmlwdGlvbnMiLCJuZXRNb25pdG9yIiwiZGVmYXVsdCIsInVybCIsIkVycm9yIiwib24iLCJfc29ja2V0Q3JlYXRlIiwicmVhZHlTdGF0ZSIsImNvbm5lY3RpbmciLCJjb25uZWN0ZWQiLCJjbG9zaW5nIiwiY2xvc2VkIiwib3BlbiIsImNsb3NlIiwiX3NvY2tldENsb3NlIiwic2VuZCIsIm1lc3NhZ2UiLCJ0b3BpYyIsInNpbGVudCIsIl9zb2NrZXRTZW5kIiwidHlwZSIsInBheWxvYWQiLCJzdWJzY3JpYmUiLCJldmVudCIsImNhbGxiYWNrIiwicHVzaCIsImdldFdlYlNvY2tldFVybCIsIm9ubWVzc2FnZSIsIl9zb2NrZXRSZWNlaXZlIiwib25vcGVuIiwiX3NvY2tldE9wZW4iLCJvbmVycm9yIiwiX3NvY2tldEVycm9yIiwib25jbG9zZSIsInNldFRpbWVvdXQiLCJfcXVldWVTdWJzY3JpcHRpb25zIiwiX3B1c2hRdWV1ZSIsInNvY2tldE1lc3NhZ2UiLCJKU09OIiwic3RyaW5naWZ5IiwiX3NldFRvUXVldWUiLCJfX2F3YWl0ZXIiLCJwYXJzZSIsImRhdGEiLCJlcnJvciIsImV2ZW50cyIsImZpbHRlciIsImxlbmd0aCIsImZvckVhY2giLCJlIiwicXVldWUiLCJfYSIsIl9iIiwic3RhcnRzV2l0aCIsInJlcGxhY2UiLCJzcGxpdFVybCIsInNwbGl0IiwicGFyYW1zIiwiaXNCcm93c2VyIiwiZW52IiwiaG9zdCIsImdldExvY2F0aW9uIiwiZGV0ZWN0RW52IiwibmFtZSIsInF1ZXJ5U3RyaW5nIiwiYXBwZW5kVG9RdWVyeVN0cmluZyIsImdldFF1ZXJ5U3RyaW5nIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/@walletconnect+legacy-client@2.0.0/node_modules/@walletconnect/legacy-client/dist/cjs/socket.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/@walletconnect+legacy-client@2.0.0/node_modules/@walletconnect/legacy-client/dist/cjs/storage.js":
/*!*****************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@walletconnect+legacy-client@2.0.0/node_modules/@walletconnect/legacy-client/dist/cjs/storage.js ***!
  \*****************************************************************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nconst legacy_utils_1 = __webpack_require__(/*! @walletconnect/legacy-utils */ \"(ssr)/./node_modules/.pnpm/@walletconnect+legacy-utils@2.0.0/node_modules/@walletconnect/legacy-utils/dist/cjs/index.js\");\nclass SessionStorage {\n    constructor(storageId = \"walletconnect\"){\n        this.storageId = storageId;\n    }\n    getSession() {\n        let session = null;\n        const json = legacy_utils_1.getLocal(this.storageId);\n        if (json && legacy_utils_1.isWalletConnectSession(json)) {\n            session = json;\n        }\n        return session;\n    }\n    setSession(session) {\n        legacy_utils_1.setLocal(this.storageId, session);\n        return session;\n    }\n    removeSession() {\n        legacy_utils_1.removeLocal(this.storageId);\n    }\n}\nexports[\"default\"] = SessionStorage; //# sourceMappingURL=storage.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vQHdhbGxldGNvbm5lY3QrbGVnYWN5LWNsaWVudEAyLjAuMC9ub2RlX21vZHVsZXMvQHdhbGxldGNvbm5lY3QvbGVnYWN5LWNsaWVudC9kaXN0L2Nqcy9zdG9yYWdlLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2JBLDhDQUE2QztJQUFFRyxPQUFPO0FBQUssQ0FBQyxFQUFDO0FBQzdELE1BQU1DLGlCQUFpQkMsbUJBQU9BLENBQUMsNEpBQTZCO0FBQzVELE1BQU1DO0lBQ0ZDLFlBQVlDLFlBQVksZUFBZSxDQUFFO1FBQ3JDLElBQUksQ0FBQ0EsU0FBUyxHQUFHQTtJQUNyQjtJQUNBQyxhQUFhO1FBQ1QsSUFBSUMsVUFBVTtRQUNkLE1BQU1DLE9BQU9QLGVBQWVRLFFBQVEsQ0FBQyxJQUFJLENBQUNKLFNBQVM7UUFDbkQsSUFBSUcsUUFBUVAsZUFBZVMsc0JBQXNCLENBQUNGLE9BQU87WUFDckRELFVBQVVDO1FBQ2Q7UUFDQSxPQUFPRDtJQUNYO0lBQ0FJLFdBQVdKLE9BQU8sRUFBRTtRQUNoQk4sZUFBZVcsUUFBUSxDQUFDLElBQUksQ0FBQ1AsU0FBUyxFQUFFRTtRQUN4QyxPQUFPQTtJQUNYO0lBQ0FNLGdCQUFnQjtRQUNaWixlQUFlYSxXQUFXLENBQUMsSUFBSSxDQUFDVCxTQUFTO0lBQzdDO0FBQ0o7QUFDQU4sa0JBQWUsR0FBR0ksZ0JBQ2xCLG1DQUFtQyIsInNvdXJjZXMiOlsid2VicGFjazovL3NtYXJ0LWF1ZGl0Ly4vbm9kZV9tb2R1bGVzLy5wbnBtL0B3YWxsZXRjb25uZWN0K2xlZ2FjeS1jbGllbnRAMi4wLjAvbm9kZV9tb2R1bGVzL0B3YWxsZXRjb25uZWN0L2xlZ2FjeS1jbGllbnQvZGlzdC9janMvc3RvcmFnZS5qcz8zNzFmIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuY29uc3QgbGVnYWN5X3V0aWxzXzEgPSByZXF1aXJlKFwiQHdhbGxldGNvbm5lY3QvbGVnYWN5LXV0aWxzXCIpO1xuY2xhc3MgU2Vzc2lvblN0b3JhZ2Uge1xuICAgIGNvbnN0cnVjdG9yKHN0b3JhZ2VJZCA9IFwid2FsbGV0Y29ubmVjdFwiKSB7XG4gICAgICAgIHRoaXMuc3RvcmFnZUlkID0gc3RvcmFnZUlkO1xuICAgIH1cbiAgICBnZXRTZXNzaW9uKCkge1xuICAgICAgICBsZXQgc2Vzc2lvbiA9IG51bGw7XG4gICAgICAgIGNvbnN0IGpzb24gPSBsZWdhY3lfdXRpbHNfMS5nZXRMb2NhbCh0aGlzLnN0b3JhZ2VJZCk7XG4gICAgICAgIGlmIChqc29uICYmIGxlZ2FjeV91dGlsc18xLmlzV2FsbGV0Q29ubmVjdFNlc3Npb24oanNvbikpIHtcbiAgICAgICAgICAgIHNlc3Npb24gPSBqc29uO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzZXNzaW9uO1xuICAgIH1cbiAgICBzZXRTZXNzaW9uKHNlc3Npb24pIHtcbiAgICAgICAgbGVnYWN5X3V0aWxzXzEuc2V0TG9jYWwodGhpcy5zdG9yYWdlSWQsIHNlc3Npb24pO1xuICAgICAgICByZXR1cm4gc2Vzc2lvbjtcbiAgICB9XG4gICAgcmVtb3ZlU2Vzc2lvbigpIHtcbiAgICAgICAgbGVnYWN5X3V0aWxzXzEucmVtb3ZlTG9jYWwodGhpcy5zdG9yYWdlSWQpO1xuICAgIH1cbn1cbmV4cG9ydHMuZGVmYXVsdCA9IFNlc3Npb25TdG9yYWdlO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c3RvcmFnZS5qcy5tYXAiXSwibmFtZXMiOlsiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiLCJsZWdhY3lfdXRpbHNfMSIsInJlcXVpcmUiLCJTZXNzaW9uU3RvcmFnZSIsImNvbnN0cnVjdG9yIiwic3RvcmFnZUlkIiwiZ2V0U2Vzc2lvbiIsInNlc3Npb24iLCJqc29uIiwiZ2V0TG9jYWwiLCJpc1dhbGxldENvbm5lY3RTZXNzaW9uIiwic2V0U2Vzc2lvbiIsInNldExvY2FsIiwicmVtb3ZlU2Vzc2lvbiIsInJlbW92ZUxvY2FsIiwiZGVmYXVsdCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/@walletconnect+legacy-client@2.0.0/node_modules/@walletconnect/legacy-client/dist/cjs/storage.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/@walletconnect+legacy-client@2.0.0/node_modules/@walletconnect/legacy-client/dist/cjs/url.js":
/*!*************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@walletconnect+legacy-client@2.0.0/node_modules/@walletconnect/legacy-client/dist/cjs/url.js ***!
  \*************************************************************************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.getBridgeUrl = exports.shouldSelectRandomly = exports.selectRandomBridgeUrl = exports.randomBridgeIndex = exports.extractRootDomain = exports.extractHostname = void 0;\nconst domain = \"walletconnect.org\";\nconst alphanumerical = \"abcdefghijklmnopqrstuvwxyz0123456789\";\nconst bridges = alphanumerical.split(\"\").map((char)=>`https://${char}.bridge.walletconnect.org`);\nfunction extractHostname(url) {\n    let hostname = url.indexOf(\"//\") > -1 ? url.split(\"/\")[2] : url.split(\"/\")[0];\n    hostname = hostname.split(\":\")[0];\n    hostname = hostname.split(\"?\")[0];\n    return hostname;\n}\nexports.extractHostname = extractHostname;\nfunction extractRootDomain(url) {\n    return extractHostname(url).split(\".\").slice(-2).join(\".\");\n}\nexports.extractRootDomain = extractRootDomain;\nfunction randomBridgeIndex() {\n    return Math.floor(Math.random() * bridges.length);\n}\nexports.randomBridgeIndex = randomBridgeIndex;\nfunction selectRandomBridgeUrl() {\n    return bridges[randomBridgeIndex()];\n}\nexports.selectRandomBridgeUrl = selectRandomBridgeUrl;\nfunction shouldSelectRandomly(url) {\n    return extractRootDomain(url) === domain;\n}\nexports.shouldSelectRandomly = shouldSelectRandomly;\nfunction getBridgeUrl(url) {\n    if (shouldSelectRandomly(url)) {\n        return selectRandomBridgeUrl();\n    }\n    return url;\n}\nexports.getBridgeUrl = getBridgeUrl; //# sourceMappingURL=url.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vQHdhbGxldGNvbm5lY3QrbGVnYWN5LWNsaWVudEAyLjAuMC9ub2RlX21vZHVsZXMvQHdhbGxldGNvbm5lY3QvbGVnYWN5LWNsaWVudC9kaXN0L2Nqcy91cmwuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYkEsOENBQTZDO0lBQUVHLE9BQU87QUFBSyxDQUFDLEVBQUM7QUFDN0RELG9CQUFvQixHQUFHQSw0QkFBNEIsR0FBR0EsNkJBQTZCLEdBQUdBLHlCQUF5QixHQUFHQSx5QkFBeUIsR0FBR0EsdUJBQXVCLEdBQUcsS0FBSztBQUM3SyxNQUFNUSxTQUFTO0FBQ2YsTUFBTUMsaUJBQWlCO0FBQ3ZCLE1BQU1DLFVBQVVELGVBQWVFLEtBQUssQ0FBQyxJQUFJQyxHQUFHLENBQUNDLENBQUFBLE9BQVEsQ0FBQyxRQUFRLEVBQUVBLEtBQUsseUJBQXlCLENBQUM7QUFDL0YsU0FBU04sZ0JBQWdCTyxHQUFHO0lBQ3hCLElBQUlDLFdBQVdELElBQUlFLE9BQU8sQ0FBQyxRQUFRLENBQUMsSUFBSUYsSUFBSUgsS0FBSyxDQUFDLElBQUksQ0FBQyxFQUFFLEdBQUdHLElBQUlILEtBQUssQ0FBQyxJQUFJLENBQUMsRUFBRTtJQUM3RUksV0FBV0EsU0FBU0osS0FBSyxDQUFDLElBQUksQ0FBQyxFQUFFO0lBQ2pDSSxXQUFXQSxTQUFTSixLQUFLLENBQUMsSUFBSSxDQUFDLEVBQUU7SUFDakMsT0FBT0k7QUFDWDtBQUNBZix1QkFBdUIsR0FBR087QUFDMUIsU0FBU0Qsa0JBQWtCUSxHQUFHO0lBQzFCLE9BQU9QLGdCQUFnQk8sS0FDbEJILEtBQUssQ0FBQyxLQUNOTSxLQUFLLENBQUMsQ0FBQyxHQUNQQyxJQUFJLENBQUM7QUFDZDtBQUNBbEIseUJBQXlCLEdBQUdNO0FBQzVCLFNBQVNEO0lBQ0wsT0FBT2MsS0FBS0MsS0FBSyxDQUFDRCxLQUFLRSxNQUFNLEtBQUtYLFFBQVFZLE1BQU07QUFDcEQ7QUFDQXRCLHlCQUF5QixHQUFHSztBQUM1QixTQUFTRDtJQUNMLE9BQU9NLE9BQU8sQ0FBQ0wsb0JBQW9CO0FBQ3ZDO0FBQ0FMLDZCQUE2QixHQUFHSTtBQUNoQyxTQUFTRCxxQkFBcUJXLEdBQUc7SUFDN0IsT0FBT1Isa0JBQWtCUSxTQUFTTjtBQUN0QztBQUNBUiw0QkFBNEIsR0FBR0c7QUFDL0IsU0FBU0QsYUFBYVksR0FBRztJQUNyQixJQUFJWCxxQkFBcUJXLE1BQU07UUFDM0IsT0FBT1Y7SUFDWDtJQUNBLE9BQU9VO0FBQ1g7QUFDQWQsb0JBQW9CLEdBQUdFLGNBQ3ZCLCtCQUErQiIsInNvdXJjZXMiOlsid2VicGFjazovL3NtYXJ0LWF1ZGl0Ly4vbm9kZV9tb2R1bGVzLy5wbnBtL0B3YWxsZXRjb25uZWN0K2xlZ2FjeS1jbGllbnRAMi4wLjAvbm9kZV9tb2R1bGVzL0B3YWxsZXRjb25uZWN0L2xlZ2FjeS1jbGllbnQvZGlzdC9janMvdXJsLmpzPzkzNmEiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLmdldEJyaWRnZVVybCA9IGV4cG9ydHMuc2hvdWxkU2VsZWN0UmFuZG9tbHkgPSBleHBvcnRzLnNlbGVjdFJhbmRvbUJyaWRnZVVybCA9IGV4cG9ydHMucmFuZG9tQnJpZGdlSW5kZXggPSBleHBvcnRzLmV4dHJhY3RSb290RG9tYWluID0gZXhwb3J0cy5leHRyYWN0SG9zdG5hbWUgPSB2b2lkIDA7XG5jb25zdCBkb21haW4gPSBcIndhbGxldGNvbm5lY3Qub3JnXCI7XG5jb25zdCBhbHBoYW51bWVyaWNhbCA9IFwiYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5XCI7XG5jb25zdCBicmlkZ2VzID0gYWxwaGFudW1lcmljYWwuc3BsaXQoXCJcIikubWFwKGNoYXIgPT4gYGh0dHBzOi8vJHtjaGFyfS5icmlkZ2Uud2FsbGV0Y29ubmVjdC5vcmdgKTtcbmZ1bmN0aW9uIGV4dHJhY3RIb3N0bmFtZSh1cmwpIHtcbiAgICBsZXQgaG9zdG5hbWUgPSB1cmwuaW5kZXhPZihcIi8vXCIpID4gLTEgPyB1cmwuc3BsaXQoXCIvXCIpWzJdIDogdXJsLnNwbGl0KFwiL1wiKVswXTtcbiAgICBob3N0bmFtZSA9IGhvc3RuYW1lLnNwbGl0KFwiOlwiKVswXTtcbiAgICBob3N0bmFtZSA9IGhvc3RuYW1lLnNwbGl0KFwiP1wiKVswXTtcbiAgICByZXR1cm4gaG9zdG5hbWU7XG59XG5leHBvcnRzLmV4dHJhY3RIb3N0bmFtZSA9IGV4dHJhY3RIb3N0bmFtZTtcbmZ1bmN0aW9uIGV4dHJhY3RSb290RG9tYWluKHVybCkge1xuICAgIHJldHVybiBleHRyYWN0SG9zdG5hbWUodXJsKVxuICAgICAgICAuc3BsaXQoXCIuXCIpXG4gICAgICAgIC5zbGljZSgtMilcbiAgICAgICAgLmpvaW4oXCIuXCIpO1xufVxuZXhwb3J0cy5leHRyYWN0Um9vdERvbWFpbiA9IGV4dHJhY3RSb290RG9tYWluO1xuZnVuY3Rpb24gcmFuZG9tQnJpZGdlSW5kZXgoKSB7XG4gICAgcmV0dXJuIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGJyaWRnZXMubGVuZ3RoKTtcbn1cbmV4cG9ydHMucmFuZG9tQnJpZGdlSW5kZXggPSByYW5kb21CcmlkZ2VJbmRleDtcbmZ1bmN0aW9uIHNlbGVjdFJhbmRvbUJyaWRnZVVybCgpIHtcbiAgICByZXR1cm4gYnJpZGdlc1tyYW5kb21CcmlkZ2VJbmRleCgpXTtcbn1cbmV4cG9ydHMuc2VsZWN0UmFuZG9tQnJpZGdlVXJsID0gc2VsZWN0UmFuZG9tQnJpZGdlVXJsO1xuZnVuY3Rpb24gc2hvdWxkU2VsZWN0UmFuZG9tbHkodXJsKSB7XG4gICAgcmV0dXJuIGV4dHJhY3RSb290RG9tYWluKHVybCkgPT09IGRvbWFpbjtcbn1cbmV4cG9ydHMuc2hvdWxkU2VsZWN0UmFuZG9tbHkgPSBzaG91bGRTZWxlY3RSYW5kb21seTtcbmZ1bmN0aW9uIGdldEJyaWRnZVVybCh1cmwpIHtcbiAgICBpZiAoc2hvdWxkU2VsZWN0UmFuZG9tbHkodXJsKSkge1xuICAgICAgICByZXR1cm4gc2VsZWN0UmFuZG9tQnJpZGdlVXJsKCk7XG4gICAgfVxuICAgIHJldHVybiB1cmw7XG59XG5leHBvcnRzLmdldEJyaWRnZVVybCA9IGdldEJyaWRnZVVybDtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXVybC5qcy5tYXAiXSwibmFtZXMiOlsiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiLCJnZXRCcmlkZ2VVcmwiLCJzaG91bGRTZWxlY3RSYW5kb21seSIsInNlbGVjdFJhbmRvbUJyaWRnZVVybCIsInJhbmRvbUJyaWRnZUluZGV4IiwiZXh0cmFjdFJvb3REb21haW4iLCJleHRyYWN0SG9zdG5hbWUiLCJkb21haW4iLCJhbHBoYW51bWVyaWNhbCIsImJyaWRnZXMiLCJzcGxpdCIsIm1hcCIsImNoYXIiLCJ1cmwiLCJob3N0bmFtZSIsImluZGV4T2YiLCJzbGljZSIsImpvaW4iLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJsZW5ndGgiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/@walletconnect+legacy-client@2.0.0/node_modules/@walletconnect/legacy-client/dist/cjs/url.js\n");

/***/ })

};
;